<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>CSS纸张阴影二三事</title>
    <link href="/posts/731037148/"/>
    <url>/posts/731037148/</url>
    
    <content type="html"><![CDATA[<h2 id="开篇废话"><a href="#开篇废话" class="headerlink" title="开篇废话"></a>开篇废话</h2><p>众所周知，我博客是模仿“纸”来进行设计的（真的众所周知吗？<br>纸的纹理使用的<br><a href="https://www.zhongguose.com/">zhongguose － 传统颜色</a><br><img src="https://www.zhongguose.com/img/texture.png" alt="纸张纹理"><br>包括字体，采用的<a href="https://www.foundertype.com/index.php/FontInfo/index/id/12224">方正聚珍仿宋</a><br><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/paper-shadow/02.png" alt="字体展示"></p><blockquote><p>方正聚珍仿宋是复刻民国丁善之、丁辅之兄弟所创制的聚珍仿宋的版本。源于宋元时期雕版印刷，横竖笔画粗细均匀，折笔处棱角分明，整体字形刚劲灵动</p></blockquote><p>本人非常喜欢这个风格，尤其是放大后还有书写的真实痕迹<br><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/paper-shadow/03.png" alt="&quot;永字八法&quot;"><br>以上目的都是为了营造一种单纯为阅读而设计的，但又不失细节的设计风格，<br>毕竟博客就是为了写文章的嘛。</p><p>今日想让博客的<code>#board</code>再像“纸”一点，想要模仿纸张略微弯曲的效果，因此求于网络。<br>（并非今日）</p><h2 id="借鉴"><a href="#借鉴" class="headerlink" title="借鉴"></a>借鉴</h2><p>于是发现了张鑫旭老师的文章<br><a href="https://www.zhangxinxu.com/wordpress/2011/02/%E5%87%A0%E7%A7%8D%E7%BA%AFcsscss3%E4%B8%8B%E7%9A%84%E7%BA%B8%E5%BC%A0%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA/">几种纯CSS(CSS3)下的纸张效果实现展示 « 张鑫旭-鑫空间-鑫生活</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;curve-paper&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.curve-paper</span> &#123;<br><span class="hljs-attribute">width</span>: <span class="hljs-number">12em</span>;<br><span class="hljs-attribute">height</span>: <span class="hljs-number">16em</span>;<br><span class="hljs-attribute">position</span>: relative;<br><span class="hljs-attribute">margin</span>: <span class="hljs-number">1em</span>;<br><span class="hljs-attribute">display</span>:inline-block;<br><span class="hljs-attribute">background-color</span>: white;<br><span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;<br><span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.27</span>), <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">40px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.06</span>) inset;<br>&#125;<br><span class="hljs-selector-class">.curve-paper</span><span class="hljs-selector-pseudo">::before</span> &#123;<br><span class="hljs-attribute">left</span>: <span class="hljs-number">1em</span>;<br><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">skew</span>(-<span class="hljs-number">18deg</span>) <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">8deg</span>);<br>&#125;<br><span class="hljs-selector-class">.curve-paper</span><span class="hljs-selector-pseudo">::after</span> &#123;<br><span class="hljs-attribute">right</span>: <span class="hljs-number">1em</span>;<br><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">skew</span>(<span class="hljs-number">10deg</span>, <span class="hljs-number">7deg</span>)<br>&#125;<br><span class="hljs-selector-class">.curve-paper</span><span class="hljs-selector-pseudo">::before</span>, <span class="hljs-selector-class">.curve-paper</span><span class="hljs-selector-pseudo">::after</span> &#123;<br><span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-attribute">width</span>: <span class="hljs-number">70%</span>;<br><span class="hljs-attribute">height</span>: <span class="hljs-number">50%</span>;<br><span class="hljs-attribute">position</span>: absolute;<br><span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid black;<br><span class="hljs-attribute">bottom</span>: .<span class="hljs-number">5em</span>;<br><span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">8px</span> <span class="hljs-number">16px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);<br><span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="http://mms2.baidu.com/it/u=2308017939,76490206&fm=253&app=138&f=JPEG?w=440&h=277" alt="实例"><br>图片来源：<a href="https://blog.csdn.net/chy555chy/article/details/83821208">CSS3 box-shadow（3D球，翘边纸）_3d阴影 css-CSDN博客</a></p><p>思路就是使用伪元素生成两个平行四边形，把他俩定位到底部，加上阴影，让四边形被盖住，阴影漏出来。</p><h2 id="解决bug"><a href="#解决bug" class="headerlink" title="解决bug"></a>解决bug</h2><h3 id="bug其一："><a href="#bug其一：" class="headerlink" title="bug其一："></a>bug其一：</h3><p>在hexo博客中，使用<code>z-index</code>并不能让纸挡住菱形</p><h4 id="原因在于"><a href="#原因在于" class="headerlink" title="原因在于"></a>原因在于</h4><p><code>#board 设置了 </code>position: relative;且设置了<code>z-index</code><br>我们观察发现，在文件<code>main.css</code>中，<code>#board</code>的<code>z-index</code>为3。</p><p>元素本体 <code>#board</code> 没有 z-index，不会创建新的 stacking context（堆叠上下文）<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_positioned_layout/Stacking_context">层叠上下文 - CSS：层叠样式表 | MDN</a><br>CSS 中只有以下情况会创建新的 stacking context：</p><ul><li><code>position: relative|absolute|fixed</code> + <code>z-index</code> <strong>非 auto</strong></li><li><code>opacity &lt; 1</code></li><li><code>transform</code></li><li><code>filter</code></li><li><code>will-change</code></li><li><code>isolation: isolate</code></li><li><code>flex/inline-flex/grid 子元素 + z-index</code><br>所以 <code>.page</code> 虽然有 <code>position: relative</code>，但<strong>没有 z-index</strong>，所以不会自己阻止子元素（伪元素）的 z-index 起作用。</li></ul><h4 id="简化理解："><a href="#简化理解：" class="headerlink" title="简化理解："></a>简化理解：</h4><ul><li><code>.page</code> 本体是“auto”，</li><li><code>.page::before</code> 是 <code>-1</code>，</li><li>所以 <code>.page::before</code> 会画在下面。<br>一旦你给 <code>.page</code> 设置了 z-index，那伪元素的 z-index: -1 就会<strong>被锁死在 <code>.page</code> 的堆叠上下文内</strong>，只能在 <code>.page</code> 的“内部最底层”，但永远不能压过 <code>.page</code> 自身。</li></ul><h4 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h4><p>因此我们需要</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#board</span> &#123;  <br>  <span class="hljs-attribute">z-index</span>: unset <span class="hljs-meta">!important</span>;<br>  &#125;<br></code></pre></td></tr></table></figure><p>不提倡，会破坏博客框架原有的层叠关系，导致某些bug的出现</p><h4 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h4><p>我们还可以利用3D</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#board</span>&#123;<br> <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d;<br>&#125;<br><span class="hljs-selector-id">#board</span><span class="hljs-selector-pseudo">::before</span>, <span class="hljs-selector-id">#board</span><span class="hljs-selector-pseudo">::after</span> &#123;<br><span class="hljs-attribute">transform</span>:... <span class="hljs-built_in">translateZ</span>(-<span class="hljs-number">1px</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="bug其二："><a href="#bug其二：" class="headerlink" title="bug其二："></a>bug其二：</h3><p>当纸张高度到达一定大小，就会导致两个菱形跑出来（不完全被纸张挡住）<br><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/paper-shadow/01.png" alt="如图所示，菱形跑出来了"><br>如图<br>因此我们需要一个固定的高度，且高度不能过大，比如</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#board</span><span class="hljs-selector-pseudo">::before</span>, <span class="hljs-selector-id">#board</span><span class="hljs-selector-pseudo">::after</span> &#123; <span class="hljs-comment">/* before和after用来作纸张的两个角的阴影 */</span>  <br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;  <br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;  <br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>;  <br>  <span class="hljs-attribute">position</span>: absolute;<br>&#125;<br></code></pre></td></tr></table></figure><p>因为设备宽度的不同，会导致两个平行四边形不能很好的「钉在」下方两个页脚处<br>并且我们需要适配多平台</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">767px</span>) &#123;&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) &#123;&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">992px</span>) &#123;&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1200px</span>)&#123;&#125;<br></code></pre></td></tr></table></figure><p>自行调整left和right</p><h2 id="展示"><a href="#展示" class="headerlink" title="展示"></a>展示</h2><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/paper-shadow/04.png" alt="阴影效果"></p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker：网络</title>
    <link href="/posts/4017790120/"/>
    <url>/posts/4017790120/</url>
    
    <content type="html"><![CDATA[<h1 id="Docker：网络"><a href="#Docker：网络" class="headerlink" title="Docker：网络"></a>Docker：网络</h1><h2 id="理解Docker-0"><a href="#理解Docker-0" class="headerlink" title="理解Docker 0"></a>理解Docker 0</h2><h3 id="测试环节"><a href="#测试环节" class="headerlink" title="测试环节"></a>测试环节</h3><p>清空全环境</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ip addr<br>lo:      inet 127.0.0.1       <span class="hljs-comment"># 本机环回地址</span><br>eth0:    inet 114.51.41.191   <span class="hljs-comment"># 阿里云内网地址</span><br>docker0: inet 172.16.0.1      <span class="hljs-comment"># Docker内网地址</span><br></code></pre></td></tr></table></figure><p>三个网络</p><blockquote><p>Docker 如何处理容器的网络访问的</p></blockquote><p>我们随便创个容器，然后康康里面的网络</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -d -P --name tomcat01 tomcat<br>docker <span class="hljs-built_in">exec</span> -it tomcat01 ip addr<br>1: lo:  mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000         <br>    <span class="hljs-built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00                     <br>    inet 127.0.0.1/8 scope host lo                                            <br>       valid_lft forever preferred_lft forever                                <br>    inet6 ::1/128 scope host                                                  <br>       valid_lft forever preferred_lft forever                                <br>2: eth0@if104:  mtu 1500 qdisc noqueue state UP group default                 <br>    <span class="hljs-built_in">link</span>/ether e2:1e:66:14:2a:3b brd ff:ff:ff:ff:ff:ff link-netnsid 0         <br>    inet 172.16.0.2/24 brd 172.16.0.255 scope global eth0                     <br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure><p>这里如果提示找不到命令之类的很正常，是因为官方下载的精简版啥都没有</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 换国内镜像源下载一下相关的东西</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;deb http://mirrors.tuna.tsinghua.edu.cn/debian stable main&quot;</span> &gt; /etc/apt/sources.list<br>apt update<br>apt install -y iproute2<br></code></pre></td></tr></table></figure><p>试试能不能<code>ping</code>通</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">root@iZf8z4m0zzs3eoirsd64fvZ:~# ping 172.16.0.2                               <br>PING 172.16.0.2 (172.16.0.2) 56(84) bytes of data.                            <br>64 bytes from 172.16.0.2: icmp_seq=1 ttl=64 <span class="hljs-keyword">time</span>=0.046 ms                     <br>64 bytes from 172.16.0.2: icmp_seq=2 ttl=64 <span class="hljs-keyword">time</span>=0.048 ms                     <br>64 bytes from 172.16.0.2: icmp_seq=3 ttl=64 <span class="hljs-keyword">time</span>=0.046 ms<br></code></pre></td></tr></table></figure><p>Linux 可以 ping 通容器<br>我们每启动一个docker容器，docker 就会给 docker 容器分配一个 ip，我们只要安装了docker，就会有一个网卡docker0桥接模式，使用的技术是<code>evth-pair</code></p><blockquote><p>主机中Docker的内网地址<code>172.16.0.1</code><br>容器中内网地址<code>172.16.0.2</code></p></blockquote><p>查看过容器之后，我们回到Linux，再次使用<code>ip addr</code><br>发现多了一个</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">104</span>: veth68a85b9@if2:  mtu <span class="hljs-number">1500</span> qdisc noqueue master docker0 state UP group default                                 <br>    <span class="hljs-attribute">link</span>/ether <span class="hljs-number">32</span>:<span class="hljs-number">28</span>:<span class="hljs-number">55</span>:e1:<span class="hljs-number">23</span>:<span class="hljs-number">68</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="hljs-number">0</span>         <br>    <span class="hljs-attribute">inet6</span> fe80::c05d:c8ff:fe40:<span class="hljs-number">159</span>d/<span class="hljs-number">64</span> scope link                             <br>       <span class="hljs-attribute">valid_lft</span> forever preferred_lft forever<br></code></pre></td></tr></table></figure><p>我们和之前容器里的对比一下</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">2: eth0@if104:  mtu 1500 qdisc noqueue state UP group default                 <br>    <span class="hljs-built_in">link</span>/ether e2:1e:66:14:2a:3b brd ff:ff:ff:ff:ff:ff link-netnsid 0         <br>    inet 172.16.0.2/24 brd 172.16.0.255 scope global eth0                     <br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure><p>发现都是104，这两个很像啊（警撅</p><p>我们再启动一个测试一下</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -d -P --name tomcat02 tomcat<br>$ docker <span class="hljs-built_in">exec</span> -it tomcat02 ip addr<br>2: eth0@if105:  mtu 1500 qdisc noqueue state UP group default                 <br>    <span class="hljs-built_in">link</span>/ether 22:2f:74:<span class="hljs-built_in">cd</span>:49:fd brd ff:ff:ff:ff:ff:ff link-netnsid 0         <br>    inet 172.16.0.3/24 brd 172.16.0.255 scope global eth0<br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure><p>我们回到主机也查看一下</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ip addr<br>105: veth1fe5858@if2:  mtu 1500 qdisc noqueue master docker0 state UP group default<br>    <span class="hljs-built_in">link</span>/ether e6:ce:78:85:15:79 brd ff:ff:ff:ff:ff:ff link-netnsid 1         <br>    inet6 fe80::e4ce:78ff:fe85:1579/64 scope <span class="hljs-built_in">link</span>                             <br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure><p>哦！容器内的网卡和Linux上的网卡总是同时出现，是一对的（我不反对这门亲事<br>这是 veth-pair 技术（虚拟以太网对）</p><h4 id="veth-pair-是什么？"><a href="#veth-pair-是什么？" class="headerlink" title="veth pair 是什么？"></a>veth pair 是什么？</h4><blockquote><p>veth（virtual ethernet device） 是一对成对的虚拟网卡，<strong>一端连着容器的网络命名空间，另一端连着宿主机或 bridge（桥接网络）</strong></p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[容器 eth0]</span> ←→ <span class="hljs-selector-attr">[veth-pair]</span> ←→ <span class="hljs-selector-attr">[宿主机 vethXXX]</span> ←→ <span class="hljs-selector-attr">[docker0 bridge]</span><br></code></pre></td></tr></table></figure><p><code>veth pair</code>是一对虚拟接口，<code>&gt;-----&lt;</code>可以当做一个桥梁，链接虚拟网络设备<br><code>OpenStac</code>，Docker 容器之间的连接，ovs 的连接，都是使用<code>veth pair</code><br><del>可恶啊，连网卡都是成对出现的😭</del></p><h4 id="主机和容器能-ping-通，容器和容器可以吗？"><a href="#主机和容器能-ping-通，容器和容器可以吗？" class="headerlink" title="主机和容器能 ping 通，容器和容器可以吗？"></a>主机和容器能 ping 通，容器和容器可以吗？</h4><p>我们逝逝用tomcat01<code>ping</code>tomcat02</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ docker exec -it tomcat01<span class="hljs-built_in"> ping </span>172.16.0.3<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>172.16.0.3 (172.16.0.3) 56(84) bytes of data.<br>64 bytes <span class="hljs-keyword">from</span> 172.16.0.3: <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=64 <span class="hljs-attribute">time</span>=0.069 ms<br>64 bytes <span class="hljs-keyword">from</span> 172.16.0.3: <span class="hljs-attribute">icmp_seq</span>=2 <span class="hljs-attribute">ttl</span>=64 <span class="hljs-attribute">time</span>=0.058 ms<br></code></pre></td></tr></table></figure><p><strong>可以！</strong></p><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">172.16.0.1</span> - Docker <span class="hljs-number">0</span>,安装就有，相当于一个路由器<br><span class="hljs-number">172.16.0.2</span> - Tomcat01 <br><span class="hljs-number">172.16.0.3</span> - Tomcat02<br><br><span class="hljs-number">172.16.0.2</span> - <span class="hljs-string">[2: eth0@if104]</span> &gt;-&lt; <span class="hljs-string">[104: veth68a85b9@if2]</span> - |----------|<br>    |<span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>|<br><span class="hljs-number">172.16.0.3</span> - <span class="hljs-string">[2: eth0@if105]</span> &gt;-&lt; <span class="hljs-string">[105: veth1fe5858@if2]</span> - |----------|<br></code></pre></td></tr></table></figure><p><strong>结论：</strong><br>tomcat01和tomcat02是公用的一个路由器，docker0。<br>所有的容器不指定网络的情况下，都是 docker0 路由的，docker 会给我们的容器分配一个默认的可用IP。<br>Docker中的所有的网络接口都是虚拟的，虚拟的转发效率高。<br>如果把容器删除，对应网桥也会自动被删除。</p><h3 id="–link（弃用）"><a href="#–link（弃用）" class="headerlink" title="–link（弃用）"></a><del>–link（弃用）</del></h3><blockquote><p><del>我们编写了一个微服务，<code>database url = ip</code>，项目不重启，但是换掉了ip，如何通过名字来访问容器，就像域名一样</del></p></blockquote><h2 id="自定义网络"><a href="#自定义网络" class="headerlink" title="自定义网络"></a>自定义网络</h2><blockquote><p>查看所有的 Docker 网络</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker network <span class="hljs-built_in">ls</span>                             <br>NETWORK ID     NAME      DRIVER    SCOP<br>65ad4e5d1a43   bridge    bridge    <span class="hljs-built_in">local</span><br>6a0642ae8ae9   host      host      <span class="hljs-built_in">local</span><br>fc39f8592507   none      null      <span class="hljs-built_in">local</span><br></code></pre></td></tr></table></figure><h4 id="网络模式"><a href="#网络模式" class="headerlink" title="网络模式"></a>网络模式</h4><p><strong>bridge</strong>：桥接 Docker（默认，自己创建也使用该模式）<br><strong>none</strong>：不配置<br><strong>host</strong>：和宿主机共享网络<br><strong>container</strong>：容器内网络连通（用得少，局限性大）</p><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><blockquote><p>清空容器</p></blockquote><p>网络又恢复原状了</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker <span class="hljs-built_in">rm</span> -f $(docker ps -aq)<br>$ ip addr<br>lo:      inet 127.0.0.1       <span class="hljs-comment"># 本机环回地址</span><br>eth0:    inet 114.51.41.191   <span class="hljs-comment"># 阿里云内网地址</span><br>docker0: inet 172.16.0.1      <span class="hljs-comment"># Docker内网地址</span><br><br><span class="hljs-comment"># --net bridge是默认值，不加也会自动设为 bridge</span><br>$ docker run -d -P --name tomcat01 --net bridge tomcat<br></code></pre></td></tr></table></figure><h5 id="自定义一个网络"><a href="#自定义一个网络" class="headerlink" title="自定义一个网络"></a>自定义一个网络</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#我们可以自定义一个网络！</span><br>--driver bridge<br>--subnet 192.168.0.0/16 <span class="hljs-comment"># 192.168.0.1 ~ 192.168.255.255</span><br>--gateway 192.168.0.1<br><span class="hljs-comment"># 创建一个网络</span><br>$ docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet<br><span class="hljs-comment"># 查看网络</span><br>$ docker network <span class="hljs-built_in">ls</span><br>NETWORK ID     NAME      DRIVER    SCOPE<br>4f37c97635e1   mynet     bridge    <span class="hljs-built_in">local</span><br>$ docker network inspect mynet<br>...<br></code></pre></td></tr></table></figure><h6 id="subnet"><a href="#subnet" class="headerlink" title="subnet"></a>subnet</h6><blockquote><p>声明 IP 地址范围</p></blockquote><p>这是一个 <strong>CIDR 格式</strong> 的子网表示法</p><ul><li><code>192.168.0.0</code> 是网络地址（起点）</li><li><code>/16</code> 表示 <strong>子网掩码是 255.255.0.0</strong>，也就是前 16 位固定</li><li><code>192.168.0.0</code> ~ <code>192.168.255.254</code>（共 65534 个 IP）</li></ul><h6 id="gateway"><a href="#gateway" class="headerlink" title="gateway"></a>gateway</h6><blockquote><p>“容器从这个网络访问外部网络的时候，默认要经过的那个 IP”。</p></blockquote><p>通常就是 <strong>Docker 自动分配的第一号 IP 地址</strong>（比如你没写的话，它就会默认设为<code>192.168.0.1</code>）</p><h5 id="使用自定义网络"><a href="#使用自定义网络" class="headerlink" title="使用自定义网络"></a>使用自定义网络</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker run -d -P --name tomcat-net-01 --net mynet tomcat<br>fa95dccba1c86e4d3ca0a5e5605dabf828e9cd90b59f7176f0f18e685fafd0e7<br>$ docker run -d -P --name tomcat-net-02 --net mynet tomcat         <br>6ce874f753348ddbd20d8ed4d5d713029e1316e59804f7c0b28462e8833c163a<br></code></pre></td></tr></table></figure><h6 id="再次查看自定义网络"><a href="#再次查看自定义网络" class="headerlink" title="再次查看自定义网络"></a>再次查看自定义网络</h6><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker network inspect mynet<br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;Containers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;6ce874f753348ddbd20d8ed4d5d713029e1316e59804f7c0b28462e8833c163a&quot;</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;Name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tomcat-net-02&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;EndpointID&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;970adc2b31a5c20120712c95c812513431d87435802d4ed72781eed755affdae&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;MacAddress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;f6:0b:b1:87:9a:ff&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;IPv4Address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192.168.0.3/16&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;IPv6Address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;fa95dccba1c86e4d3ca0a5e5605dabf828e9cd90b59f7176f0f18e685fafd0e7&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;Name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tomcat-net-01&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;EndpointID&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;b30b5f497ce519e32e0b164e4db684c8f74eb8997f3b6803e1bb28c81dbca643&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;MacAddress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;52:5c:3c:8b:66:e4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;IPv4Address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192.168.0.2/16&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;IPv6Address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>...<br></code></pre></td></tr></table></figure><h5 id="容器间ping测试"><a href="#容器间ping测试" class="headerlink" title="容器间ping测试"></a>容器间<code>ping</code>测试</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker <span class="hljs-built_in">exec</span> -it tomcat-net-01 ping **tomcat**-net-02<br>PING tomcat-net-02 （192.168.0.3) 56（84)bytes of data.<br>64 bytes from tomcat-net-02.mynet (192.168.0.3):icmp_seq=1 ttl=64 <span class="hljs-keyword">time</span>=0.055 ms<br>64 bytes from tomcat-net-02.mynet (192.168.0.3):icmp_seq=2 ttl=64 <span class="hljs-keyword">time</span>=0.063 ms<br>64 bytes from ttl=64 <span class="hljs-keyword">time</span>=0.073 ms<br></code></pre></td></tr></table></figure><p>我们发现自定义网络 Docker 会自动维护好对应的关系</p><h4 id="自定义网络的好处"><a href="#自定义网络的好处" class="headerlink" title="自定义网络的好处"></a>自定义网络的好处</h4><p>redis | mysql：不同的集群使用不同的网络，保证集群是安全和健康的</p><h2 id="网络连通"><a href="#网络连通" class="headerlink" title="网络连通"></a>网络连通</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">172.16.0.1</span> - Docker <span class="hljs-number">0</span><br><span class="hljs-number">172.16.0.2</span> - Tomcat01 <br><span class="hljs-number">172.16.0.3</span> - Tomcat02<br><br><span class="hljs-number">172.16.0.2</span> - <span class="hljs-string">[2: eth0@if104]</span> &gt;-&lt; <span class="hljs-string">[104: veth68a85b9@if2]</span> - |-Docker <span class="hljs-number">0</span>-|<br>        |<span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>|<br><span class="hljs-number">172.16.0.3</span> - <span class="hljs-string">[2: eth0@if105]</span> &gt;-&lt; <span class="hljs-string">[105: veth1fe5858@if2]</span> - |-Docker <span class="hljs-number">0</span>-|<br><br>-----------------------------------------------------------------------------<br><br><span class="hljs-number">192.168.0.1</span> - mynet<br><span class="hljs-number">192.168.0.2</span> - tomcat-net-<span class="hljs-number">01</span><br><span class="hljs-number">192.168.0.3</span> - tomcat-net-<span class="hljs-number">02</span><br><br><span class="hljs-number">192.168.0.2</span> - tomcat-net-<span class="hljs-number">01</span> &gt;-&lt; - |---mynet---|<br>       |<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>|<br><span class="hljs-number">192.168.0.3</span> - tomcat-net-<span class="hljs-number">02</span> &gt;-&lt; - |---mynet---|<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker <span class="hljs-built_in">exec</span> -it tomcat01 ping tomcat-net-01<br>ping: tomcat-net-01: Name or service not known<br></code></pre></td></tr></table></figure><p>如上所示，tomcat-net-01和Tomcat01属于不同的网段，互不干扰，因此不能直接 ping 通<br>因此我们需要网络连通</p><h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker network --<span class="hljs-built_in">help</span>                                            <br>...<br>Commands:<br>  connect     Connect a container to a network<br><span class="hljs-comment"># 把一个容器连接到一个网络上</span><br></code></pre></td></tr></table></figure><p>目标：打通<code>tomcat01 - mynet</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker network connect mynet tomcat01<br>$ docker network inspect mynet<br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;Containers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;1844c7d02186d8483facb4110ad19e141e8cdb7b31d2581357078bfe6ae16cb6&quot;</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;Name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tomcat01&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;EndpointID&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;58ccd4d9dc59d07b20982d65aa4899a2afdd...&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;MacAddress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;e6:78:90:20:f3:25&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;IPv4Address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192.168.0.4/16&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;IPv6Address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  ...<br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>我们发现连通之后，<code>tomcat01</code>直接被加进了<code>mynet</code>中<br>而且是拥有了新的 ip ：<code>192.168.0.4</code><br>一个容器，两个地址<br>很像阿里云服务里的公网 ip 和私网 ip<br>其实就是多加了块虚拟网卡<br>假设要跨网络操作别人，就需要使用docker network connect连通</p><h2 id="实践：部署Redis集群"><a href="#实践：部署Redis集群" class="headerlink" title="实践：部署Redis集群"></a>实践：部署Redis集群</h2><h3 id="创建网卡"><a href="#创建网卡" class="headerlink" title="创建网卡"></a>创建网卡</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker network create redis --subnet 172.38.0.0/16<br></code></pre></td></tr></table></figure><center><h3>忙，停更</h3></center>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker：DockerFile</title>
    <link href="/posts/2158545144/"/>
    <url>/posts/2158545144/</url>
    
    <content type="html"><![CDATA[<h1 id="Docker：DockerFile"><a href="#Docker：DockerFile" class="headerlink" title="Docker：DockerFile"></a>Docker：DockerFile</h1><h2 id="是什么？"><a href="#是什么？" class="headerlink" title="是什么？"></a>是什么？</h2><p>Dockerfile 是用来构建 docker 镜像的文件，是命令参数脚本<br>构建步骤：</p><ol><li>编写一个 dockerfile 文件</li><li>docker build 构建成为一个镜像</li><li>docker run 运行镜像</li><li>docker push 发布镜像（DockerHub、阿里云镜像仓库！）<br>我们打开<a href="https://hub.docker.com/_/centos">centos - Official Image | Docker Hub</a><br>就能够看到官方的 Dockerfile</li></ol><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> scratch  <br><span class="hljs-keyword">ADD</span><span class="language-bash"> centos-7-x86_64-docker.tar.xz /  </span><br>  <br><span class="hljs-keyword">LABEL</span><span class="language-bash"></span><br><span class="language-bash">    org.label-schema.schema-version=<span class="hljs-string">&quot;1.0&quot;</span> \</span><br><span class="language-bash">    org.label-schema.name=<span class="hljs-string">&quot;CentOS Base Image&quot;</span>\</span><br><span class="language-bash">    org.label-schema.vendor=<span class="hljs-string">&quot;Centos&quot;</span> \</span><br><span class="language-bash">    org.label-schema.1icense=<span class="hljs-string">&quot;GPLv2&quot;</span>\</span><br><span class="language-bash">    org.1abel-schema.bui1ddate=<span class="hljs-string">&quot;20200504&quot;</span>\</span><br><span class="language-bash">    org.opencontainers.image.title=<span class="hljs-string">&quot;CentOS Base Image&quot;</span>\</span><br><span class="language-bash">    org.opencontainers.image.vendor=<span class="hljs-string">&quot;Centos&quot;</span>\</span><br><span class="language-bash">    org.opencontainers.image.1icenses=<span class="hljs-string">&quot;GPL-2.0-only&quot;</span></span><br>org.opencontainers.image.created=<span class="hljs-string">&quot;2020-05-04 00:00:00+01:00&quot;</span>  <br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;/bin/bash&quot;</span>]  </span><br></code></pre></td></tr></table></figure><p>官方都是基础包，啥都没有，我们通常自己搭建镜像</p><h2 id="DockerFile构建过程"><a href="#DockerFile构建过程" class="headerlink" title="DockerFile构建过程"></a>DockerFile构建过程</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><ol><li>每个保留关键字（指令）都是必须是大写字母</li><li>从上到下顺序执行</li><li><code>#</code>表示注释</li><li>每一个指令都会创建提交一个新的镜像层并提交<br><img src="http://mms2.baidu.com/it/u=2074446393,4206080514&fm=253&app=138&f=JPEG?w=589&h=500" alt="镜像结构"><br>步骤：开发，部署，运维<br>DockerFile：构建文件，定义步骤，源码<br>Docker Images：通过DockerFile 构建生成镜像，是最终发布和运行的产品<br>Docker 容器：镜像运行之后提供的服务器</li></ol><p>后两块都是用别人的，会第一步才是自己的</p><h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><table><thead><tr><th>指令</th><th>说明</th></tr></thead><tbody><tr><td><strong>FROM</strong></td><td>指定基础镜像，构建镜像的 一切都从这里开始</td></tr><tr><td><strong>MAINTAINER</strong></td><td>指定镜像作者的信息（如姓名+邮箱），<em>现在推荐使用 LABEL 代替</em></td></tr><tr><td><strong>RUN</strong></td><td>构建镜像时执行的命令（如安装软件等）</td></tr><tr><td><strong>ADD</strong></td><td>添加文件&#x2F;目录到镜像中，支持自动解压 <code>.tar.gz</code>（比 COPY 强大）</td></tr><tr><td><strong>COPY</strong></td><td>简单的文件&#x2F;目录复制，不解压，推荐优先使用 COPY 而不是 ADD</td></tr><tr><td><strong>WORKDIR</strong></td><td>设置工作目录，相当于 <code>cd</code>，之后的指令都基于这个目录运行</td></tr><tr><td><strong>VOLUME</strong></td><td>定义挂载点，用于数据卷（数据持久化）</td></tr><tr><td><strong>EXPOSE</strong></td><td>声明容器运行时监听的端口（不会自动映射）</td></tr><tr><td><strong>CMD</strong></td><td>容器启动时执行的命令，<strong>只能有一个生效</strong>，可被 <code>docker run</code> 覆盖</td></tr><tr><td><strong>ENTRYPOINT</strong></td><td>容器启动时执行的命令，<strong>不会被覆盖</strong>，但可以追加参数</td></tr><tr><td><strong>ONBUILD</strong></td><td>给未来继承这个镜像的 Dockerfile 预设指令（父镜像的“钩子”）</td></tr><tr><td><strong>ENV</strong></td><td>构建的时候设置环境变量</td></tr></tbody></table><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>Docker Hub中 99% 镜像都是从这个基础镜像过来的——<code>FROM scratch</code>，然后配置需要的软件和配置来进行的构建</p><blockquote><p>创建一个自己的ubuntu</p></blockquote><h4 id="1、编写DockerFile文件"><a href="#1、编写DockerFile文件" class="headerlink" title="1、编写DockerFile文件"></a>1、编写DockerFile文件</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span>  <br><span class="hljs-keyword">MAINTAINER</span> zheep &lt;zheep1209@foxmail.com&gt;  <br><span class="hljs-keyword">ENV</span> PATH=/usr/local  <br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-variable">$PATH</span>  </span><br><span class="hljs-keyword">ENV</span> DEBIAN_FRONTEND=noninteractive <span class="hljs-comment"># 防止 tzdata 交互式安装卡住  </span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; \  </span><br>apt-get install -y vim net-tools &amp;&amp; \  <br>apt-get clean &amp;&amp; \  <br>rm -rf /var/lib/apt/lists/*  <br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span>  <br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;/bin/bash&quot;</span>]  </span><br></code></pre></td></tr></table></figure><h4 id="2、通过该文件构建镜像"><a href="#2、通过该文件构建镜像" class="headerlink" title="2、通过该文件构建镜像"></a>2、通过该文件构建镜像</h4><p><code>docker build -f dockerfile 文件路径 -t 镜像名:[tag]</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker build -f mydockerfile -t zheep-ubuntu:0.1 .  <br>$ docker images  <br>REPOSITORYTAG IMAGE ID CREATEDSIZEzheep-ubuntu0.1 212648d1b860 About a minute ago 142MB<br></code></pre></td></tr></table></figure><p>最末尾的这个 <strong><code>.</code></strong>，是 <strong>构建上下文（build context）</strong> 的路径，意思是：  </p><blockquote><p>把当前目录 <code>.</code>（就是你运行这个命令的目录）作为 Docker 构建所用的上下文目录。  </p></blockquote><p>建议在构建目录添加 <code>.dockerignore</code> 文件，排除掉如 node_modules、target、.git 等大文件夹</p><h4 id="3、测试运行"><a href="#3、测试运行" class="headerlink" title="3、测试运行"></a>3、测试运行</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">pwd</span>/usr/local  <br>$ vim# 正常开启vim面板  <br></code></pre></td></tr></table></figure><p>使用<code>docker history 镜像id</code>可以查看镜像如何一步步构建的<br>拿到新镜像就可以这样查看怎么做的。</p><blockquote><p>CMD 和 ENTRYPOINT 区别</p></blockquote><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">CMD</span><span class="language-bash"><span class="hljs-comment">#指定这个容器启动的时候要运行的命令，只有最后一个会生效，可被替代  </span></span><br><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> <span class="hljs-comment">#指定这个容器启动的时候要运行的命令，可以追加命令  </span></span><br></code></pre></td></tr></table></figure><h2 id="实践："><a href="#实践：" class="headerlink" title="实践："></a>实践：</h2><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><ol><li><p>准备镜像文件 Tomcat 压缩包，jdk 压缩包</p></li><li><p>编写 Dockerfile 文件，官方命名 Dockerfile ，build 会自动寻找这个文件，就不需要 -f 指定了</p></li></ol><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span>  <br><span class="hljs-keyword">LABEL</span><span class="language-bash"> maintainer=<span class="hljs-string">&quot;zheep&quot;</span>  </span><br><span class="hljs-comment"># 设置非交互，避免 tzdata 卡住  </span><br><span class="hljs-keyword">ENV</span> DEBIAN_FRONTEND=noninteractive  <br><span class="hljs-comment"># 安装工具  </span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; \  </span><br>    apt-get install -y vim net-tools &amp;&amp; \<br>    apt-get clean &amp;&amp; \<br>    rm -rf /var/lib/apt/lists/*               <span class="hljs-comment"># 复制文件  </span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> readme.txt /usr/local/readme.txt  </span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> jdk-8u451-linux-x64.tar.gz /usr/local  </span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> apache-tomcat-9.0.105.tar.gz /usr/local  </span><br><span class="hljs-comment"># 设置环境变量  </span><br><span class="hljs-keyword">ENV</span> JAVA_HOME=/usr/local/jdk1.<span class="hljs-number">8.0</span>_451  <br><span class="hljs-keyword">ENV</span> CATALINA_HOME=/usr/local/apache-tomcat-<span class="hljs-number">9.0</span>.<span class="hljs-number">105</span>  <br><span class="hljs-keyword">ENV</span> PATH=<span class="hljs-string">&quot;$JAVA_HOME/bin:$CATALINA_HOME/bin:$PATH&quot;</span>  <br><span class="hljs-comment"># 工作目录（非必须）  </span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-variable">$CATALINA_HOME</span>  </span><br><span class="hljs-comment"># 暴露端口  </span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8080</span>  <br><span class="hljs-comment"># 启动 tomcat（前台）  </span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;catalina.sh&quot;</span>, <span class="hljs-string">&quot;run&quot;</span>]  </span><br></code></pre></td></tr></table></figure><h3 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker build -t diytomcat .<br></code></pre></td></tr></table></figure><h3 id="启动镜像…访问测试…（咕咕咕…"><a href="#启动镜像…访问测试…（咕咕咕…" class="headerlink" title="启动镜像…访问测试…（咕咕咕…"></a>启动镜像…访问测试…（咕咕咕…</h3><p>这里直说了，前面都是代码演示，教你什么代码能做什么事<br>这里请自行测试，自行构建，根据你擅长的项目<br>比如你擅长前后端，就配个jdk和nginx再来个数据库</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span><br><br><span class="hljs-comment"># 设置为非交互模式，避免 tzdata 等卡住</span><br><span class="hljs-keyword">ENV</span> DEBIAN_FRONTEND=noninteractive<br><br><span class="hljs-comment"># 安装常用工具</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; \</span><br><span class="language-bash">    apt-get install -y wget curl gnupg lsb-release vim net-tools software-properties-common &amp;&amp; \</span><br><span class="language-bash">    <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*</span><br><br><span class="hljs-comment"># 安装 Nginx</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; \</span><br><span class="language-bash">    apt-get install -y nginx &amp;&amp; \</span><br><span class="language-bash">    <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*</span><br><br><span class="hljs-comment"># 安装 Java 17</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; \</span><br><span class="language-bash">    apt-get install -y openjdk-17-jdk &amp;&amp; \</span><br><span class="language-bash">    <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*</span><br><br><span class="hljs-keyword">ENV</span> JAVA_HOME=/usr/lib/jvm/java-<span class="hljs-number">17</span>-openjdk-amd64<br><span class="hljs-keyword">ENV</span> PATH=<span class="hljs-string">&quot;$&#123;JAVA_HOME&#125;/bin:$&#123;PATH&#125;&quot;</span><br><br><span class="hljs-comment"># 安装 MySQL（仅测试用，不建议生产使用此方式）</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; \</span><br><span class="language-bash">    apt-get install -y mysql-server &amp;&amp; \</span><br><span class="language-bash">    <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*</span><br><br><span class="hljs-keyword">ENV</span> MYSQL_ROOT_PASSWORD=root<br><span class="hljs-keyword">ENV</span> MYSQL_DATABASE=testdb<br><br><span class="hljs-comment"># 暴露端口</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span> <span class="hljs-number">3306</span> <span class="hljs-number">8080</span><br><br><span class="hljs-comment"># 启动多个服务（注意：这种写法适合测试，不适合生产）</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> service mysql start &amp;&amp; service nginx start &amp;&amp; bash</span><br></code></pre></td></tr></table></figure><p>然后在启动的时候做一个卷挂载，<strong>路径只是演示</strong>，仅提供思路</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">-v /home/project/mysql/conf:/etc/mysql/comf.d <br>-v /home/project/mysql/data:/var/lib/mysql<br>-v /home/project/nginx/html:/home/share/nginx/html<br>-v /home/project/java/:/home/java/...  <br></code></pre></td></tr></table></figure><p>然后把不同端口映射出去，数据库和jar是在容器内互相访问的，因此不用映射数据库</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">-p 1008:80    <span class="hljs-comment"># 映射nginx  </span><br>-p 1145:8080  <span class="hljs-comment"># 映射后端  </span><br></code></pre></td></tr></table></figure><p>如果你想让这三个服务真正「长期运行」，可以用 <code>supervisord</code> 来管理<br>这种很多项目组合在一起的东西，<font color="#ff0000">建议分开来写，分成单独的容器</font>，后面我们使用<code>docker-compose</code>来组装容器<br>终究…现在还是做不到吗…（不是<br>挖坑（挖坑（挖坑（<br><img src="https://terraria.wiki.gg/images/7/73/Gravedigger%27s_Shovel.png?36cda8" alt="挖坑"></p><h3 id="发布镜像"><a href="#发布镜像" class="headerlink" title="发布镜像"></a>发布镜像</h3><p>因为上一步，我们在<code>run</code>的时候做了卷挂载，因此我们可以直接在本地编写项目，说白了就是把你的数据库，jar，前端打包好的文件等等放到挂载到本地的文件夹里</p><p>接下来的步骤上文已经全部讲过了，就是 build 成镜像，然后 run 一个容器<br>如果部署成功，你是可以直接访问的</p><p>本文就是教你怎么写DockerFile，以及相关的一系列流程，下期再见<br><img src="https://terraria.wiki.gg/images/a/a8/Emote_Item_Pickaxe.gif?d3c3d3" alt="镐击"><br>吗？</p><h2 id="如何发布自己的镜像到网上"><a href="#如何发布自己的镜像到网上" class="headerlink" title="如何发布自己的镜像到网上"></a>如何发布自己的镜像到网上</h2><h3 id="DockerHub"><a href="#DockerHub" class="headerlink" title="DockerHub"></a>DockerHub</h3><p><a href="https://hub.docker.com/">DockerHub官网</a></p><ol><li>自己注册登录账号</li><li>在自己的服务器上提交自己的镜像</li></ol><h4 id="控制台登录"><a href="#控制台登录" class="headerlink" title="控制台登录"></a>控制台登录</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ docker login --<span class="hljs-built_in">help</span>                                       <br><br>Usage:  docker login [OPTIONS] [SERVER]<br>Authenticate to a registry.                                                 <br>Defaults to Docker Hub <span class="hljs-keyword">if</span> no server is specified.                           <br>Options:                                                                    <br>  -p, --password string   Password or Personal Access Token (PAT)           <br>      --password-stdin    Take the Password or Personal Access Token (PAT) from stdin<br>  -u, --username string   Username<br></code></pre></td></tr></table></figure><p><code>docker login -u 你的名字</code><br>如果你是国内服务器则需要魔法，不过本来也是写给自己的，不可能有别人看的 XD</p><h4 id="push"><a href="#push" class="headerlink" title="push"></a>push</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker push 你的名字/镜像名:版本号<br></code></pre></td></tr></table></figure><p>提一嘴：给镜像加版本号<code>docker 镜像id/tomcat:1.0</code></p><h3 id="阿里云镜像服务"><a href="#阿里云镜像服务" class="headerlink" title="阿里云镜像服务"></a>阿里云镜像服务</h3><ol><li>登录阿里云</li><li>找到容器镜像服务</li><li>创建命名空间</li><li>创建镜像仓库<br>参考官方，自己看（无慈悲</li></ol><h2 id="小结（还需要么"><a href="#小结（还需要么" class="headerlink" title="小结（还需要么"></a>小结（还需要么</h2><p><img src="https://www.netadmin.com.tw/upload/news/NP170801000317080114394102.png"></p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker：容器数据卷</title>
    <link href="/posts/944518175/"/>
    <url>/posts/944518175/</url>
    
    <content type="html"><![CDATA[<h1 id="Docker：容器数据卷"><a href="#Docker：容器数据卷" class="headerlink" title="Docker：容器数据卷"></a>Docker：容器数据卷</h1><h2 id="是什么？可以吃吗？"><a href="#是什么？可以吃吗？" class="headerlink" title="是什么？可以吃吗？"></a>是什么？可以吃吗？</h2><p><strong>Docker 理念</strong>：把应用和环境打包成一个镜像<br>那么数据呢？如果数据都在容器里面，那把容器删了不就啥都没有了吗？<br>需求：数据持久化<br>比如：我有一个MySQL容器，删了就没有了，我想让数据存在本地而不是在容器里。</p><p>容器之间有一个数据共享的技术，Docker容器中产生的数据可以同步到本地。<br>这就是卷技术，目录的挂载，将我们容器内的目录，挂在到Linux上面。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mysql<span class="hljs-regexp">/usr/my</span>sql -&gt; linux<span class="hljs-regexp">/home/my</span>sql<br></code></pre></td></tr></table></figure><p><strong>就是容器的持久化和同步操作，容器间的数据也可以共享</strong></p><h2 id="如何使用？"><a href="#如何使用？" class="headerlink" title="如何使用？"></a>如何使用？</h2><h3 id="直接使用命令挂载-v"><a href="#直接使用命令挂载-v" class="headerlink" title="直接使用命令挂载 -v"></a>直接使用命令挂载 -v</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -it -v 主机目录:容器内目录<br></code></pre></td></tr></table></figure><p>这样主机目录和容器内目录的文件会进行双向同步</p><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><h5 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -d -p 1919:3306 -v /home/mysql/conf:/etc/mysql/comf.d -v /home/mysql/data:/var/lib/mysql -e ES_JAVA_OPTS=-Xms64m -Xmx512m -e MYSQL_ROOT_PASSWORD=114514 --name mysql-demo  mysql:latest<br></code></pre></td></tr></table></figure><p>假设我们删除这个容器，本地的数据依旧不会丢失，这就实现了容器数据持久化的功能</p><h4 id="具名和匿名挂载"><a href="#具名和匿名挂载" class="headerlink" title="具名和匿名挂载"></a>具名和匿名挂载</h4><h5 id="匿名挂载"><a href="#匿名挂载" class="headerlink" title="匿名挂载"></a>匿名挂载</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">-v 容器内路径<br>docker run -d -P --name nginx01 -v /ect/nginx nginx<br><span class="hljs-comment"># 查看所有 volume 的情况</span><br>docker volume <span class="hljs-built_in">ls</span><br>DRIVER    VOLUME NAME<br><span class="hljs-built_in">local</span>     9af6582b20e390febba278f366682dd8aaf6ab58f0e2b96c21f6eabd40ef5fb2<br><span class="hljs-built_in">local</span>     5462336c5e984de19ce4c89b9fbf66920409b9b165e5a5bb6a10c88916698487<br><span class="hljs-built_in">local</span>     d2e5f63f05a5810ce371fe7a9c5f453c15405053018890ff8e0cee881a84eb9<br><span class="hljs-comment"># 这里发现，这种就是匿名挂载，我们在-V只写了容器内的路径，没有写容器外的路径！</span><br></code></pre></td></tr></table></figure><h5 id="具名挂载"><a href="#具名挂载" class="headerlink" title="具名挂载"></a>具名挂载</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">-v 卷名:容器内路径<br>docker run -d -P --name nginx02 -v jvmk-nginx:/ec/nginx nginx<br>docker volume <span class="hljs-built_in">ls</span><br>DRIVER    VOLUME NAME<br>...<br><span class="hljs-built_in">local</span>     jvmk-nginx<br><span class="hljs-comment"># 查看卷</span><br>docker volume inspect jvmk-nginx<br>...<br><span class="hljs-string">&quot;Mountpoint&quot;</span>:<span class="hljs-string">&quot;/var/lib/docker/volumes/juming-ninx/_data&quot;</span>,<br></code></pre></td></tr></table></figure><p>所有的docker容器内的卷，没有指定目录的情况下都是在<code>/var/lib/docker/volumes/xxxx/_data</code><br>我们通过具名挂载可以方便的找到我们的卷，大多数情况在使用的具名挂载</p><h5 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">-v 容器内路径                    <span class="hljs-comment">#匿名挂载</span><br>-v 卷名:容器内路径               <span class="hljs-comment">#具名挂载</span><br>-v /宿主机路径:容器内路径       <span class="hljs-comment">#指定路径挂载！</span><br></code></pre></td></tr></table></figure><p><strong>拓展</strong><br>通过<code> -v 容器内路径：ro / rw</code>改变读写权限</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 只能从外部改变，无法在容器内改变</span><br>docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:ro nginx<br><span class="hljs-comment"># 可读写</span><br>docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:rw nginx<br></code></pre></td></tr></table></figure><h3 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h3><p>就是专门用来提供数据卷的容器<br>创建一个容器A，让它管理数据卷，然后别的容器通过 <code>--volumes-from</code> 把它的数据挂过来用，还可以容器间的数据共享</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 创建一个数据卷容器</span><br>docker create -v /data --name data-container ubuntu<br><span class="hljs-comment"># 其他容器挂载 data-container 的数据卷</span><br>docker run -d --volumes-from data-container ubuntu<br></code></pre></td></tr></table></figure><p>生命周期持续到没有人使用为止</p><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><blockquote><p>Dockerfile 就是用来构建 docker 镜像的构建文件(命令脚本)</p></blockquote><p>创建一个dockerfile文件，名字可以随机，建议 dockerfile</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 文件内容 指令（大写） 参数</span><br>FROM centos<br>VOLUME [<span class="hljs-string">&quot;vo1ume01&quot;</span>,<span class="hljs-string">&quot;vo1ume02&quot;</span>]<br>CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;----end----&quot;</span><br>CMD /bin/bash<br><span class="hljs-comment"># 这里每个命令，就是镜像的一层</span><br></code></pre></td></tr></table></figure><p>下一篇文章再讲<br><img src="https://terraria.wiki.gg/images/0/09/Propeller_Gato_%28buff%29.png?a542f5"></p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker：镜像讲解</title>
    <link href="/posts/1932302360/"/>
    <url>/posts/1932302360/</url>
    
    <content type="html"><![CDATA[<h1 id="Docker：镜像讲解"><a href="#Docker：镜像讲解" class="headerlink" title="Docker：镜像讲解"></a>Docker：镜像讲解</h1><h2 id="什么是镜像"><a href="#什么是镜像" class="headerlink" title="什么是镜像?"></a>什么是镜像?</h2><p>镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。<br>因为程序需要的环境，配置都已经准备好了，所以打包好的docker镜像可以直接跑起来。</p><h2 id="Docker镜像加载原理"><a href="#Docker镜像加载原理" class="headerlink" title="Docker镜像加载原理"></a>Docker镜像加载原理</h2><blockquote><p>UnionFS（联合文件系统）</p></blockquote><p>UnionFS（联合文件系统）：是一种分层、轻量级关并且高性能的文件系统，它<strong>支持对文件系统的修改作为一次次提交来一层层的叠加</strong><br>，同时可以将不同目录挂载到同一个虚拟文件系统下（unite several directories into a single virtual file system)<br>。Union文件系统是Docker镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。<br>特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录。</p><p>叠加就像git提交一样，我们下载的时候所看到的<a href="https://www.zheep.top/2025/05/11/Docker%EF%BC%9A%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/#docker-pull-%E9%95%9C%E5%83%8F%E5%90%8D-tag-%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F">一层层的文件</a><br>就是这个东西。</p><p>如果两个镜像都有同一个文件，那后面下的镜像就不需要再下这一层文件了。<br>比如</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">MySQL</span> == CentOS + MySQL<br><span class="hljs-attr">Tomcat</span> == CentOs + Mysql<br><span class="hljs-comment"># 当你下载Tomcat的时候，就不需要下载CentOS了</span><br></code></pre></td></tr></table></figure><table><thead><tr><th>Git 控制版本</th><th>记录</th></tr></thead><tbody><tr><td>安装了CentOS</td><td>1</td></tr><tr><td>安装了Docker</td><td>2</td></tr><tr><td>安装了jdk</td><td>3</td></tr></tbody></table><blockquote><p>Docker 镜像加载原理</p></blockquote><p><em>docker的镜像实际上由一层一层的文件系统组成</em>，这种层级的文件系统 UnionFS</p><p>bootfs(boot file system)主要包含 <strong>bootloader</strong> 和 <strong>kernel</strong>，bootloader<br>主要是引导加载kernel，Linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层是bootfs。这一层与我们典型的Linux&#x2F;Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</p><p>rootfs (root file system），在bootfs之上。包含的就是典型 Linux 系统中的&#x2F;dev，&#x2F;proc，&#x2F;bin，&#x2F;etc等标准目录和文件。rootfs<br>就是各种不同的操作系统发行版，比如Ubuntu，Centos等等。</p><p><em>容器就是一个小的虚拟机环境</em></p><p>为什么上一篇文章中安装的CentOS镜像才200M？<br>对于一个精简的OS，rootfs可以很小，只需要包含最基本的命令，工具和程序库就可以了，因为底层直接用Host的kernel，自己只需要提供rootfs就可以了。由此可见对于不同的linux发行版，bootfs基本是一致的，rootfs会有差别，因此不同的发行版可以公用bootfs<br><em><strong>也就是说内核是共用的</strong></em><br>虚拟机是分钟级，而容器是秒级启动</p><h2 id="分层理解"><a href="#分层理解" class="headerlink" title="分层理解"></a>分层理解</h2><blockquote><p>分层的镜像</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">root@zheep:~# docker pull mysql<br>Using default tag: latest<br>latest: Pulling from library/mysql<br>72a69066d2fe: Pull complete<br>93619dbc5b36: Pull complete<br>99da31dd6142: Pull complete<br>626033c43d70: Pull complete<br>...         <br></code></pre></td></tr></table></figure><p>下载是一步一步的，就像上面的shell一样，有很多<code>Pull complete</code></p><h3 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h3><p>所有的Docker镜像都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前镜像层之上，创建新的镜像层。<br>举例：<br>假如基于Ubuntu Linux16.04创建一个新的镜像，这就是新镜像的第一层；<br>如果在该镜像中添加Python包，就会在基础镜像层之上创建第二个镜像层；<br>如果继续添加一个安全补丁，就会创建第三个镜像层。</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">↑ <span class="hljs-keyword">Sccurity </span>Patch<br>↑ Python<br>↑ Ubuntu <span class="hljs-number">16</span>.<span class="hljs-number">04</span><br></code></pre></td></tr></table></figure><p>在添加额外的镜像层的同时，镜像始终保持是当前所有镜像的组合。<br>下表中举了一个简单的例子，每个镜像层包含3个文件，而镜像包含了来自两个镜像层的6个文件。</p><table><thead><tr><th>第一层</th><th>第二层</th></tr></thead><tbody><tr><td>文件1</td><td></td></tr><tr><td>文件2</td><td></td></tr><tr><td>文件3</td><td></td></tr><tr><td></td><td>文件4</td></tr><tr><td></td><td>文件5</td></tr><tr><td></td><td>文件6</td></tr></tbody></table><p>上表中的镜像层跟之前的略有区别，主要目的是便于展示文件。<br>下图中展示了一个稍微复杂的三层镜像，在外部看来整个镜像只有6个文件，这是因为最上层中的文件7是文件5的一个更新版本。</p><table><thead><tr><th>第一层</th><th>第二层</th><th>第三层</th></tr></thead><tbody><tr><td>文件1</td><td></td><td></td></tr><tr><td>文件2</td><td></td><td></td></tr><tr><td>文件3</td><td></td><td></td></tr><tr><td></td><td>文件4</td><td></td></tr><tr><td></td><td><del>文件5</del></td><td>文件7</td></tr><tr><td></td><td>文件6</td><td></td></tr></tbody></table><p>还是文章刚开始的概念，就是把文件分层，分成一块一块，就像乐高玩具一样，各种积木的排列组合。</p><p>这种情况下，上层镜像层中的文件覆盖了底层镜像层中的文件。这样就使得文件的更新版本作为一个新镜像层添加到镜像当中。<br>Docker通过存储引擎（新版本采用快照机制）的方式来实现镜像层堆栈，并保证多镜像层对外展示为统一的文件系统。<br>Linux上可用的存储引擎有AUFS、Overlay2、DeviceMapper、Btrfs以及ZFS。顾名思义，每种存储引擎都基于Linux中对应的文件系统或者块设备技术，并且每种存储引擎都有其独有的性能特点。<br>Docker在Windows上仅支持 windowsdfilter 一种存储引擎，该引擎基于 NTFS 文件系统之上实现了分层和CoW。<br>下表展示了与系统显示相同的三层镜像。所有镜像层堆叠并合并，对外提供统一的视图。</p><table><thead><tr><th>镜像</th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>文件1</td><td>文件2</td><td>文件3</td><td>文件4</td><td>文件5</td><td>文件6</td></tr></tbody></table><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部<br>这一层就是我们通常说的容器层，容器之下的都叫镜像层</p><p>就相当于，原来的乐高积木已经搭建好了，无法改变，你新建的容器只是在原来的积木上增加了一层</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">——————————————————<br>容器层1|容器层2|...<br>——————————————————<br>镜      像      层 <br>——————————————————<br></code></pre></td></tr></table></figure><p>如何提交自己的镜像</p><h2 id="commit-镜像"><a href="#commit-镜像" class="headerlink" title="commit 镜像"></a>commit 镜像</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker commit 提交容器成为一个新的副本<br><span class="hljs-comment"># 命令和git原理类似</span><br>docker commit -m=<span class="hljs-string">&quot;提交的描述信息&quot;</span> -a=<span class="hljs-string">&quot;作者&quot;</span> 容器<span class="hljs-built_in">id</span> 目标镜像名:[TAG]<br><br><span class="hljs-comment"># 实例</span><br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker commit -m=<span class="hljs-string">&quot;Tomcat提交测试&quot;</span> -a=<span class="hljs-string">&quot;西行寺岩羊&quot;</span> tomcat-demo tomcat:fix404<br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker images                                   <br>REPOSITORY            TAG       IMAGE ID       CREATED         SIZE<br>tomcat                fix404    56493a6f51e7   4 seconds ago   684MB<br></code></pre></td></tr></table></figure><p>如果你想保存当前容器状态，就可以通过commit来提交，获得一个镜像，就和快照一样。</p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Doker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker：基本命令</title>
    <link href="/posts/34398092/"/>
    <url>/posts/34398092/</url>
    
    <content type="html"><![CDATA[<h1 id="Docker：基本命令"><a href="#Docker：基本命令" class="headerlink" title="Docker：基本命令"></a>Docker：基本命令</h1><h2 id="Docker的常用命令"><a href="#Docker的常用命令" class="headerlink" title="Docker的常用命令"></a>Docker的常用命令</h2><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker version      <span class="hljs-comment">#查看版本</span><br>docker inf          <span class="hljs-comment">#显示系统信息</span><br>docker 命令 --<span class="hljs-built_in">help</span>  <span class="hljs-comment">#万能命令</span><br></code></pre></td></tr></table></figure><h2 id="Docker的常用命令-1"><a href="#Docker的常用命令-1" class="headerlink" title="Docker的常用命令"></a>Docker的常用命令</h2><h3 id="帮助命令-1"><a href="#帮助命令-1" class="headerlink" title="帮助命令"></a>帮助命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker version      <span class="hljs-comment">#查看版本</span><br>docker inf          <span class="hljs-comment">#显示系统信息</span><br>docker 命令 --<span class="hljs-built_in">help</span>  <span class="hljs-comment">#万能命令</span><br></code></pre></td></tr></table></figure><h3 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h3><h4 id="docker-images查看所有本地的主机上的镜像"><a href="#docker-images查看所有本地的主机上的镜像" class="headerlink" title="docker images查看所有本地的主机上的镜像"></a><code>docker images</code>查看所有本地的主机上的镜像</h4><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-a</code> 或 <code>--all</code></td><td>显示所有镜像（默认只显示最终镜像，隐藏中间镜像）</td></tr><tr><td><code>-q</code> 或 <code>--quiet</code></td><td>只显示镜像的 ID，不显示其它信息</td></tr></tbody></table><h4 id="docker-search搜索镜像"><a href="#docker-search搜索镜像" class="headerlink" title="docker search搜索镜像"></a><code>docker search</code>搜索镜像</h4><table><thead><tr><th>选项</th><th>作用</th></tr></thead><tbody><tr><td><code>-f</code> 或 <code>--filter</code></td><td>根据条件过滤结果，例如 <code>--filter stars=10</code> 只显示点赞数大于 10 的镜像</td></tr><tr><td><code>--format</code></td><td>使用 Go 模板美化输出结果，例如输出成表格或 JSON</td></tr><tr><td><code>--limit</code></td><td>设置最大返回条数，比如 <code>--limit 5</code> 最多返回 5 个镜像</td></tr><tr><td><code>--no-trunc</code></td><td>不截断输出（比如镜像描述不会被省略）</td></tr></tbody></table><h4 id="docker-pull-镜像名-tag-下载镜像"><a href="#docker-pull-镜像名-tag-下载镜像" class="headerlink" title="docker pull 镜像名[:tag]下载镜像"></a><code>docker pull 镜像名[:tag]</code>下载镜像</h4><p>^55fc23</p><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-a</code>, <code>--all-tags</code></td><td>拉取仓库中<strong>所有 tag</strong> 的镜像，<code>docker pull mysql:5.7</code> 指定版本</td></tr><tr><td><code>--disable-content-trust</code></td><td>跳过镜像验证（默认是 true，意思是跳过，不做签名验证）</td></tr><tr><td><code>--platform string</code></td><td>指定平台，比如拉 ARM 架构的镜像：<code>--platform linux/arm64</code></td></tr><tr><td><code>-q</code>, <code>--quiet</code></td><td>安静模式，不显示下载进度条，只显示镜像 ID</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sh">root@zheep:~# docker pull mysql                    <br>Using default tag: latest                <span class="hljs-comment"># 如果不写tag，默认就是latest</span><br>latest: Pulling from library/mysql                                   <br>72a69066d2fe: Pull complete              <span class="hljs-comment"># 分层下载，docker iamge的核心联合文件系统</span><br>93619dbc5b36: Pull complete                                          <br>99da31dd6142: Pull complete                                          <br>626033c43d70: Pull complete                                          <br>...                                        <br>Digest: sha256:e9027fe4d91c0153429607251656806cc784e914937271037f7738 <span class="hljs-comment"># 签名</span><br>bd5b8e7709                                                           <br>Status: Downloaded newer image <span class="hljs-keyword">for</span> mysql:latest                      <br>docker.io/library/mysql:latest           <span class="hljs-comment"># 真实地址</span><br><span class="hljs-comment"># 等价于</span><br>docker pull mysql<br>docker pul1 docker.io/library/mysql:1atest<br></code></pre></td></tr></table></figure><h4 id="docker-rmi删除镜像"><a href="#docker-rmi删除镜像" class="headerlink" title="docker rmi删除镜像"></a><code>docker rmi</code>删除镜像</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker rmi -f 容器<span class="hljs-built_in">id</span>                      <span class="hljs-comment"># 删除指定镜像</span><br>docker rmi -f 容器<span class="hljs-built_in">id</span> 容器<span class="hljs-built_in">id</span> 容器<span class="hljs-built_in">id</span> 容器<span class="hljs-built_in">id</span>  <span class="hljs-comment"># 删除多个镜像</span><br>docker rmi -f $(docker images -aq)       <span class="hljs-comment"># 删除全部的镜像</span><br></code></pre></td></tr></table></figure><h3 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h3><p>说明：我们有了镜像才可以创建容器，linux，下载一个centos镜像来测试学习</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker pull centos<br></code></pre></td></tr></table></figure><h4 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动"></a>新建容器并启动</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run [可选参数] image<br><br><span class="hljs-comment"># 参数说明</span><br>-name=<span class="hljs-string">&quot;Name&quot;</span>  容器名字tomcat01 tomcat02，用来区分容器<br>-d            后台方式运行<br>-it           使用交互方式运行，进入容器查看内容<br>-p            指定容器的端口 -p 8080:8080<br>    -p  ip:主机端口：容器端口<br>-p  主机端口：容器端口（常用）<br>-p  容器端口<br>-P            随机指定端口<br><br><span class="hljs-comment"># 测试 并进入容器</span><br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker run -it centos /bin/bash      <br>[root@061d6401141d /]# <span class="hljs-built_in">ls</span>     <span class="hljs-comment"># 查看容器内的CentOS              </span><br>bin  etc   lib    lost+found  mnt  proc  run   srv  tmp  var         <br>dev  home  lib64  media       opt  root  sbin  sys  usr<br>[root@061d6401141d /]# <span class="hljs-built_in">exit</span>                                          <br><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure><h4 id="列出所有运行中的容器"><a href="#列出所有运行中的容器" class="headerlink" title="列出所有运行中的容器"></a>列出所有运行中的容器</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#docker ps命令</span><br>    <span class="hljs-comment">#列出当前正在运行的容器</span><br>-a      <span class="hljs-comment">#列出当前正在运行的容器+带出历史运行过的容器</span><br>-n=?    <span class="hljs-comment">#显示最近创建的容器</span><br>-q      <span class="hljs-comment">#只显示容器的编号</span><br><br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker ps<br>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES             <br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker ps -a<br>CONTAINER ID   IMAGE         COMMAND       CREATED          STATUS                     PORTS     NAMES                          <br>061d6401141d   centos        <span class="hljs-string">&quot;/bin/bash&quot;</span>   17 minutes ago   Exited (0) 7 minutes ago             frosty_zhukovsky<br>df72a233637c   hello-world   <span class="hljs-string">&quot;/hello&quot;</span>      2 hours ago      Exited (0) 2 hours ago               recursing_proskuriakova<br></code></pre></td></tr></table></figure><h4 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">exit</span>         <span class="hljs-comment">#直接容器停车并退出</span><br>Ctr1 + P + Q <span class="hljs-comment">#容器不停止退出</span><br></code></pre></td></tr></table></figure><h4 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker <span class="hljs-built_in">rm</span> 容器<span class="hljs-built_in">id</span>                         <span class="hljs-comment"># 删除指定容器，强制删除 -f</span><br>docker <span class="hljs-built_in">rm</span> -f $(docker ps -aq)            <span class="hljs-comment"># 删除全部的容器</span><br>docker ps -a -q|xargs docker <span class="hljs-built_in">rm</span>          <span class="hljs-comment"># 删除全部的容器</span><br></code></pre></td></tr></table></figure><h4 id="启动和停止容器的操作"><a href="#启动和停止容器的操作" class="headerlink" title="启动和停止容器的操作"></a>启动和停止容器的操作</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker start 容器<span class="hljs-built_in">id</span><br>docker restart 容器<span class="hljs-built_in">id</span><br>docker stop 容器<span class="hljs-built_in">id</span><br>docker <span class="hljs-built_in">kill</span> 容器<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure><h3 id="常用其他命令"><a href="#常用其他命令" class="headerlink" title="常用其他命令"></a>常用其他命令</h3><h4 id="后台启动容器"><a href="#后台启动容器" class="headerlink" title="后台启动容器"></a>后台启动容器</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -d centos<br><span class="hljs-comment"># 问题docker ps，发现centos停止了</span><br><span class="hljs-comment"># 常见的坑：docker容器使用后台运行，就必须要有要一个前台进程，docker发现没有应用，自动停止</span><br><span class="hljs-comment"># nginx，容器启动后，发现自己没有提供服务，就会立刻停止</span><br></code></pre></td></tr></table></figure><h4 id="查看日志命令"><a href="#查看日志命令" class="headerlink" title="查看日志命令"></a>查看日志命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker logs -t <span class="hljs-comment"># 加时间</span><br>            -f <span class="hljs-comment"># 持续打印</span><br>-tf --<span class="hljs-built_in">tail</span> 条数 容器  <span class="hljs-comment">#显示指定条数日志</span><br>            -tf 容器             <span class="hljs-comment">#显示全部日志</span><br>            <br><span class="hljs-comment"># 自己编写一段she1l脚本</span><br>docker run -d centos /bin/sh -c <span class="hljs-string">&quot;while true;do echo zheep;sleep 1;done&quot;</span><br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker logs -f -t --<span class="hljs-built_in">tail</span> 10 e0817c5740be           <br>2025-05-12T09:17:53.276619691Z zheep                                               <br>2025-05-12T09:17:54.278736383Z zheep<br>...<br></code></pre></td></tr></table></figure><h4 id="查看容器中进程命令"><a href="#查看容器中进程命令" class="headerlink" title="查看容器中进程命令"></a>查看容器中进程命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker top 容器<span class="hljs-built_in">id</span><br>UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD<br><br>root                2754169             2754145             0                   17:17               ?                   00:00:00            /bin/sh -c <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>;<span class="hljs-keyword">do</span> <span class="hljs-built_in">echo</span> zheep;<span class="hljs-built_in">sleep</span> 1;<span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><h4 id="查看镜像的元数据"><a href="#查看镜像的元数据" class="headerlink" title="查看镜像的元数据"></a>查看镜像的元数据</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker inspect 容器<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure><h4 id="进入当前正在运行的容器"><a href="#进入当前正在运行的容器" class="headerlink" title="进入当前正在运行的容器"></a>进入当前正在运行的容器</h4><h5 id="docker-exec-it-容器id-bashShell"><a href="#docker-exec-it-容器id-bashShell" class="headerlink" title="docker exec -it 容器id bashShell"></a><code>docker exec -it 容器id bashShell</code></h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">root@iZf8z4m0zzs3eoirsd64fvZ:~# docker <span class="hljs-built_in">exec</span> -it e0817c5740be /bin/bash <br><span class="hljs-comment"># 让你进入容器内部并获得一个 bash 交互式命令行界面</span><br>[root@e0817c5740be /]# <span class="hljs-built_in">ls</span> -a<br>.   .dockerenv  dev  home  lib64       media  opt   root  sbin  sys  usr   <br>..  bin         etc  lib   lost+found  mnt    proc  run   srv   tmp  var<br></code></pre></td></tr></table></figure><h5 id="docker-attach-容器id"><a href="#docker-attach-容器id" class="headerlink" title="docker attach 容器id"></a><code>docker attach 容器id</code></h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZf8z4m0zzs3eoirsd64fvZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker attach e0817c5740be                 </span><br>当前正在执行的代码...<br></code></pre></td></tr></table></figure><h5 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker <span class="hljs-built_in">exec</span> -it 容器<span class="hljs-built_in">id</span> bashShell <span class="hljs-comment"># 进入容器后开启一个新的终端，可以在里面操作（常用）</span><br>docker attach 容器<span class="hljs-built_in">id</span>             <span class="hljs-comment"># 进入容器正在执行的终端，不会启动新的进程</span><br></code></pre></td></tr></table></figure><h4 id="从容器内拷贝文件到主机"><a href="#从容器内拷贝文件到主机" class="headerlink" title="从容器内拷贝文件到主机"></a>从容器内拷贝文件到主机</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker <span class="hljs-built_in">cp</span> 容器<span class="hljs-built_in">id</span>:容器内路径 目的地的主机路径<br>容器可以直接退出，因为数据依然存在<br><span class="hljs-comment"># 拷贝是一个手动过程，未来我们使用-V卷的技术，可以实现，自动同步fhome/home</span><br></code></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 容器生命周期管理</span><br>run         <span class="hljs-comment"># 创建一个新的容器并运行一个命令</span><br>create      <span class="hljs-comment"># 创建一个新的容器，但不启动</span><br>start       <span class="hljs-comment"># 启动一个已停止的容器</span><br>restart     <span class="hljs-comment"># 重启一个运行中的容器</span><br>stop        <span class="hljs-comment"># 停止一个运行中的容器</span><br>pause       <span class="hljs-comment"># 暂停容器中的所有进程</span><br>unpause     <span class="hljs-comment"># 取消暂停容器</span><br><span class="hljs-built_in">kill</span>        <span class="hljs-comment"># 强制终止容器</span><br><span class="hljs-built_in">rm</span>          <span class="hljs-comment"># 删除一个或多个容器</span><br><span class="hljs-built_in">wait</span>        <span class="hljs-comment"># 阻塞直到容器停止，然后输出其退出码</span><br><br><span class="hljs-comment"># 容器交互与调试</span><br><span class="hljs-built_in">exec</span>        <span class="hljs-comment"># 在已有容器中执行命令</span><br>attach      <span class="hljs-comment"># 连接到一个运行中的容器</span><br>logs        <span class="hljs-comment"># 获取容器的日志</span><br>top         <span class="hljs-comment"># 查看容器中运行的进程信息</span><br>inspect     <span class="hljs-comment"># 获取容器或镜像的详细信息</span><br>port        <span class="hljs-comment"># 查看容器端口映射</span><br>diff        <span class="hljs-comment"># 查看容器文件系统变化</span><br>events      <span class="hljs-comment"># 实时获取容器事件</span><br><br><span class="hljs-comment"># 镜像管理</span><br>build       <span class="hljs-comment"># 通过Dockerfile构建镜像</span><br>images      <span class="hljs-comment"># 列出本地镜像</span><br>rmi         <span class="hljs-comment"># 删除一个或多个镜像</span><br>pull        <span class="hljs-comment"># 从镜像仓库拉取镜像</span><br>push        <span class="hljs-comment"># 将镜像推送到镜像仓库</span><br>tag         <span class="hljs-comment"># 给镜像打标签</span><br><span class="hljs-built_in">history</span>     <span class="hljs-comment"># 查看镜像的创建历史</span><br><br><span class="hljs-comment"># 镜像导入导出</span><br>save        <span class="hljs-comment"># 保存镜像为tar包</span><br>load        <span class="hljs-comment"># 从tar包加载镜像</span><br><span class="hljs-built_in">export</span>      <span class="hljs-comment"># 导出容器文件系统为tar包</span><br>import      <span class="hljs-comment"># 从tar包创建镜像</span><br><br><span class="hljs-comment"># 文件拷贝</span><br><span class="hljs-built_in">cp</span>          <span class="hljs-comment"># 从容器中拷贝文件到宿主机或相反</span><br><br><span class="hljs-comment"># Docker Registry 登录操作</span><br>login       <span class="hljs-comment"># 登录到Docker镜像仓库</span><br><span class="hljs-built_in">logout</span>      <span class="hljs-comment"># 登出镜像仓库</span><br>search      <span class="hljs-comment"># 在Docker Hub中搜索镜像</span><br><br><span class="hljs-comment"># 系统信息</span><br>info        <span class="hljs-comment"># 显示Docker系统信息</span><br>version     <span class="hljs-comment"># 显示Docker版本信息</span><br>stats       <span class="hljs-comment"># 查看cpu状态</span><br></code></pre></td></tr></table></figure><h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><h4 id="Docker安装nginx"><a href="#Docker安装nginx" class="headerlink" title="Docker安装nginx"></a>Docker安装nginx</h4><h5 id="1-搜索镜像"><a href="#1-搜索镜像" class="headerlink" title="1. 搜索镜像"></a>1. 搜索镜像</h5><h5 id="2-下载镜像"><a href="#2-下载镜像" class="headerlink" title="2. 下载镜像"></a>2. 下载镜像</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker pull nginx<br></code></pre></td></tr></table></figure><h5 id="3-运行测试"><a href="#3-运行测试" class="headerlink" title="3. 运行测试"></a>3. 运行测试</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -d --name demo-nginx -p 1145:80 nginx:latest<br>                                   暴露端口:容器内端口<br>curl localhost:1145<br><span class="hljs-comment"># Welcome to nginx!</span><br><br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker <span class="hljs-built_in">exec</span> -it demo-nginx /bin/bash          <br>root@b1aeedc7b8f3:/# whereis nginx<br>nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx<br><span class="hljs-comment"># 思考问题：我们每次改动nginx配置文件，都需要进入容器内部？十分的麻烦，我要是可以在容器外部提供一个映射路径，达到在容器外部修改文件，容器内部就可以自动修改？</span><br>-v <span class="hljs-comment"># 数据卷</span><br></code></pre></td></tr></table></figure><h4 id="Docker安装tomcat"><a href="#Docker安装tomcat" class="headerlink" title="Docker安装tomcat"></a>Docker安装tomcat</h4><p>…省略</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#官方的使用</span><br>docker run -it --<span class="hljs-built_in">rm</span> tomcat:9.0<br>--<span class="hljs-built_in">rm</span> <span class="hljs-comment"># 关闭后删除该容器（一般用于测试）</span><br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker run -d -p 1234:8080 --name tomcat-dome<br>root@iZf8z4m0zzs3eoirsd64fvZ:~# docker <span class="hljs-built_in">exec</span> -it tomcat-demo /bin/bash<br>root@a31230fef10b:/usr/local/tomcat# <span class="hljs-built_in">cd</span> webapps                                    <br>root@a31230fef10b:/usr/local/tomcat/webapps# <span class="hljs-built_in">ls</span> -a<br>.  ..<br><span class="hljs-comment"># 然后发现 linux命令少了，没有webapps，这是阿里云镜像的问题，默认最小镜像，排除了不必要的东西</span><br><span class="hljs-comment"># 思考问题：我们以后要部署项目，如果每次都要进入容器是不是我要是可以个映射路径，webapps我们在外部放置项目，就自动同步到内部就好了！</span><br></code></pre></td></tr></table></figure><h4 id="Docker安装es-kibana"><a href="#Docker安装es-kibana" class="headerlink" title="Docker安装es + kibana"></a>Docker安装es + kibana</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># es十分的耗内存</span><br><span class="hljs-comment"># es的数据一般需要放置到安全目录 挂载</span><br><span class="hljs-comment"># -net somenetwork ? 网络配置</span><br><br><span class="hljs-comment"># 启动elasticsearch</span><br>docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e <span class="hljs-string">&quot;discovery.type=single-node&quot;</span> elasticsearch:7.6.2<br><span class="hljs-comment"># 启动了linux就卡住了，使用dockerstats查看cpu的状态</span><br><br><span class="hljs-comment"># 低内存服务器如何运行高内存容器</span><br><span class="hljs-comment"># 我们需要增加内存限制，修改配置文件 -e 环境   配置修改</span><br><br>dockerrun -d --name elasticsearch -p 9200:9200 -p9300:9300 -e <span class="hljs-string">&quot;discovery.type=sing1e-node&quot;</span> -e ES_JAVA_OPTS=-Xms64m -Xmx512m<span class="hljs-string">&quot;e1asticsearch:7.6.2</span><br><span class="hljs-string">&quot;</span><br><span class="hljs-comment"># 使用kibana连接es？思考网络如果才能连接过去！</span><br></code></pre></td></tr></table></figure><h3 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h3><ul><li>portainer（先用这个）</li><li>Rancher（CI&#x2F;CD再用）</li></ul><h4 id="什么portainer？"><a href="#什么portainer？" class="headerlink" title="什么portainer？"></a>什么portainer？</h4><p>Docker图形化界面管理工具！提供一个后台面板供我们操作！</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=<span class="hljs-literal">true</span> portainer/portainer<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring：登录后逻辑：JWT、拦截器与ThreadLocal</title>
    <link href="/posts/1587478215/"/>
    <url>/posts/1587478215/</url>
    
    <content type="html"><![CDATA[<h1 id="spring：登录后逻辑：JWT、拦截器与ThreadLocal"><a href="#spring：登录后逻辑：JWT、拦截器与ThreadLocal" class="headerlink" title="spring：登录后逻辑：JWT、拦截器与ThreadLocal"></a>spring：登录后逻辑：JWT、拦截器与ThreadLocal</h1><h2 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h2><p>做好网页登录了？为什么一刷新就要重新登录？如何才能像各大平台一样登录后一段时间之内不用重复登录？<br>也许你需要JWT令牌这个东西。</p><p>JWT 全名是 <strong>JSON Web Token</strong>，是一个用于在<strong>用户和服务器之间安全传递信息</strong>的东西，尤其常用于“登录后的身份认证”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jwt">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.<br>eyJ1c2VySWQiOjEyMywidXNlcm5hbWUiOiJ4eXoifQ.<br>SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c<br></code></pre></td></tr></table></figure><p>它其实分三部分，用 <code>.</code> 分隔：</p><ol><li><p><strong>Header（头部）</strong>：算法和类型</p></li><li><p><strong>Payload（载荷）</strong>：真正传递的用户信息，比如 userId、权限等级、过期时间等</p></li><li><p><strong>Signature（签名）</strong>：用来验证这个 token 是不是被伪造的</p></li></ol><h3 id="为什么说需要JWT呢？"><a href="#为什么说需要JWT呢？" class="headerlink" title="为什么说需要JWT呢？"></a>为什么说需要JWT呢？</h3><p>我们为了让你的网站登录之后短期内不需要登录，我们可以把用户的信息浓缩进一个“卡片“内，就跟现在的NFC卡片一样，只要向机器上刷卡，机器就知道你是谁了。<br>JWT也同理，后端通过用户信息+过期时间+签名然后使用一些算法就可生成一段加密的文字。<br>当前端用户登录成功之后，后端把这个加密文字交给前端，前端执行某些操作：比如获取个人信息，点赞，评论的时候，把这一串加密的文字交给后端，后端拿着签名进行解密就获取了请求者的个人信息，于是就知道是谁发起请求的。</p><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><h3 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-impl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-jackson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> io.jsonwebtoken.*;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.security.Keys;<br><span class="hljs-keyword">import</span> java.security.Key;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtUtil</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">EXPIRE_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span>; <span class="hljs-comment">// 1天</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Key</span> <span class="hljs-variable">KEY</span> <span class="hljs-operator">=</span> Keys.hmacShaKeyFor(<span class="hljs-string">&quot;1234567890abcdef1234567890abcdef&quot;</span>.getBytes());<br><br>    <span class="hljs-comment">// 创建 Token</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">createToken</span><span class="hljs-params">(String userId)</span> &#123;<br>        <span class="hljs-keyword">return</span> Jwts.builder()<br>                .setSubject(userId)<br>                .setIssuedAt(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())<br>                .setExpiration(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + EXPIRE_TIME))<br>                .signWith(KEY, SignatureAlgorithm.HS256)<br>                .compact();<br>    &#125;<br><br>    <span class="hljs-comment">// 解析 Token</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getUserId</span><span class="hljs-params">(String token)</span> &#123;<br>        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> Jwts.parserBuilder()<br>                .setSigningKey(KEY)<br>                .build()<br>                .parseClaimsJws(token)<br>                .getBody();<br>        <span class="hljs-keyword">return</span> claims.getSubject();<br>    &#125;<br><br>    <span class="hljs-comment">// 判断 Token 是否过期</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isExpired</span><span class="hljs-params">(String token)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> Jwts.parserBuilder()<br>                    .setSigningKey(KEY)<br>                    .build()<br>                    .parseClaimsJws(token)<br>                    .getBody();<br>            <span class="hljs-keyword">return</span> claims.getExpiration().before(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="发送令牌"><a href="#发送令牌" class="headerlink" title="发送令牌"></a>发送令牌</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(&quot;/login&quot;)</span><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">login</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> LoginDTO dto)</span> &#123;<br>    <span class="hljs-comment">// 假设验证用户名密码成功</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> JwtUtil.createToken(dto.getUserId());<br>    <span class="hljs-keyword">return</span> Result.success(token);<br>&#125;<br></code></pre></td></tr></table></figure><p>到这里，令牌已经交到前端的手里了，除了登录注册以外，用户一系列的行为：点赞，评论，收藏等等都需要带上他的令牌与后端交互，难道每一个接口都要检测一下用户有没有令牌吗？<br>显然不是，在Spring中，有一个名为拦截器的东西。</p><h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>拦截器，顾名思义，就是用来拦截的。</p><h3 id="创建拦截器"><a href="#创建拦截器" class="headerlink" title="创建拦截器"></a>创建拦截器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">&quot;Authorization&quot;</span>);<br>        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span> || JwtUtil.isExpired(token)) &#123;<br>            response.setStatus(<span class="hljs-number">401</span>); <span class="hljs-comment">// 未授权</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="形参"><a href="#形参" class="headerlink" title="形参"></a>形参</h4><h5 id="1-HttpServletRequest-request-表示当前的请求"><a href="#1-HttpServletRequest-request-表示当前的请求" class="headerlink" title="1. HttpServletRequest request 表示当前的请求"></a>1. HttpServletRequest request 表示当前的请求</h5><p>获取请求头、参数、URL、方法名：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">request.getHeader(<span class="hljs-string">&quot;Authorization&quot;</span>)<br>request.getRequestURI()<br>request.getMethod()<br>request.getParameter(<span class="hljs-string">&quot;username&quot;</span>)<br></code></pre></td></tr></table></figure><p>拿登录信息、IP、Session、Cookie 等等：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">request.getRemoteAddr()<br>request.getSession()<br>request.getCookies()<br></code></pre></td></tr></table></figure><h5 id="2-HttpServletResponse-response"><a href="#2-HttpServletResponse-response" class="headerlink" title="2. HttpServletResponse response"></a>2. HttpServletResponse response</h5><p>表示 <strong>当前响应</strong>，你可以用它：</p><ul><li>修改响应状态码：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">response.setStatus(<span class="hljs-number">401</span>) <span class="hljs-comment">// 未授权</span><br></code></pre></td></tr></table></figure><ul><li>设置返回数据（例如拦截后自己返回错误信息）：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">response.setContentType(<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>);<br>response.getWriter().write(<span class="hljs-string">&quot;&#123;\&quot;error\&quot;: \&quot;未登录\&quot;&#125;&quot;</span>);<br></code></pre></td></tr></table></figure><p>一般配合 <code>return false</code> 使用，用来终止请求继续向下执行</p><h5 id="3-Object-handler"><a href="#3-Object-handler" class="headerlink" title="3. Object handler"></a>3. Object handler</h5><p>写这篇文章的时候我也不太清楚，查了一下</p><ul><li>判断被访问的方法是哪个 Controller 的哪个方法</li><li>拿到方法上的注解（比如自定义注解做权限控制）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (handler <span class="hljs-keyword">instanceof</span> HandlerMethod) &#123;<br>    <span class="hljs-type">HandlerMethod</span> <span class="hljs-variable">hm</span> <span class="hljs-operator">=</span> (HandlerMethod) handler;<br>    <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> hm.getMethod();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> method.getName();<br>    <span class="hljs-type">MyAuth</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> method.getAnnotation(MyAuth.class);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h4><p>返回值是boolean，想必你已经知道答案了，为true的时候放行，false拦截。</p><h3 id="配置拦截器"><a href="#配置拦截器" class="headerlink" title="配置拦截器"></a>配置拦截器</h3><p>讲了这么多，是不是觉得少了点什么，拦截器该拦截什么请求，放行什么请求呢？<br>我们得给这个拦截器加一个配置才行。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> &#123;<br>        registry.addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JwtInterceptor</span>())<br>                .addPathPatterns(<span class="hljs-string">&quot;/**&quot;</span>)<br>                .excludePathPatterns(<span class="hljs-string">&quot;/login&quot;</span>, <span class="hljs-string">&quot;/register&quot;</span>); <span class="hljs-comment">// 放行登录注册接口</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;<br><span class="hljs-keyword">import</span> org.springframework.web.method.HandlerMethod;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br><br>    <span class="hljs-comment">// 预处理逻辑：在 Controller 方法执行前执行</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">                             HttpServletResponse response,</span><br><span class="hljs-params">                             Object handler)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">// 只拦截方法（排除静态资源等）</span><br>        <span class="hljs-keyword">if</span> (!(handler <span class="hljs-keyword">instanceof</span> HandlerMethod)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">&quot;Authorization&quot;</span>);<br><br>        <span class="hljs-comment">// 没带 token，拒绝访问</span><br>        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span> || token.isBlank()) &#123;<br>            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);<br>            response.setContentType(<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>);<br>            response.getWriter().write(<span class="hljs-string">&quot;&#123;\&quot;code\&quot;:401, \&quot;msg\&quot;:\&quot;请先登录\&quot;&#125;&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// 校验 token 合法性</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> JwtUtil.getUserId(token); <span class="hljs-comment">// 自己实现的工具类</span><br>            <span class="hljs-comment">// 可选：将 userId 存到 request 供后续 Controller 使用</span><br>            request.setAttribute(<span class="hljs-string">&quot;userId&quot;</span>, userId);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);<br>            response.setContentType(<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>);<br>            response.getWriter().write(<span class="hljs-string">&quot;&#123;\&quot;code\&quot;:401, \&quot;msg\&quot;:\&quot;token 无效或已过期\&quot;&#125;&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>拿到密钥了，密钥正确，要让后端知道用户是谁，要把密钥解开<br><code>String userId = JwtUtil.getUserId(token);</code><br>上文已经解开了<br>用户ID什么时候才有用呢？<br>当然是和数据库做交互的时候，如果你的发表评论的逻辑是：<br>后端接收到令牌和评论信息，解读令牌，通过后在评论数据表中插入 用户ID + 评论数据<br>那么，Controller层需要拿到你的用户ID吗？<br>我们可以直接在Service层把用户ID+评论数据放到一个comment对象中，而不是通过request从Controller一层层往下传。<br>这时候，我们就需要用到</p><h2 id="线程本地变量（ThreadLocal）"><a href="#线程本地变量（ThreadLocal）" class="headerlink" title="线程本地变量（ThreadLocal）"></a>线程本地变量（<code>ThreadLocal</code>）</h2><p>Spring MVC 每个请求都会用一个线程处理，你可以用 <code>ThreadLocal</code> 在<strong>整个请求生命周期</strong>中共享变量：</p><ul><li>登录拦截器里解析完 token，把用户 ID 存进去</li><li>后续任何地方（Service、Controller）都可以直接拿到当前用户 ID<br>你可以理解为：每一个请求都相当于一个平行宇宙，每一个平行宇宙中都有单独的<code>ThreadLocal</code></li></ul><h3 id="工具类-1"><a href="#工具类-1" class="headerlink" title="工具类"></a>工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserContext</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;String&gt; USER_ID_HOLDER = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();<br><span class="hljs-comment">//设置</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUserId</span><span class="hljs-params">(String userId)</span> &#123;<br>        USER_ID_HOLDER.set(userId);<br>    &#125;<br><span class="hljs-comment">//获取</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getUserId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> USER_ID_HOLDER.get();<br>    &#125;<br><span class="hljs-comment">//删除</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> &#123;<br>        USER_ID_HOLDER.remove();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h3><h4 id="存储用户ID"><a href="#存储用户ID" class="headerlink" title="存储用户ID"></a>存储用户ID</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">                             HttpServletResponse response,</span><br><span class="hljs-params">                             Object handler)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">&quot;Authorization&quot;</span>);<br><br>        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span> || token.isBlank()) &#123;<br>            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);<br>            response.setContentType(<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>);<br>            response.getWriter().write(<span class="hljs-string">&quot;&#123;\&quot;code\&quot;:401, \&quot;msg\&quot;:\&quot;请先登录\&quot;&#125;&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> JwtUtil.getUserId(token);<br>            UserContext.setUserId(userId); <span class="hljs-comment">// 存入当前线程</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);<br>            response.setContentType(<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>);<br>            response.getWriter().write(<span class="hljs-string">&quot;&#123;\&quot;code\&quot;:401, \&quot;msg\&quot;:\&quot;token 无效或已过期\&quot;&#125;&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 在请求结束后自动清理 ThreadLocal，防止内存泄露</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCompletion</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">                                HttpServletResponse response,</span><br><span class="hljs-params">                                Object handler,</span><br><span class="hljs-params">                                Exception ex)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        UserContext.clear();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="拿取用户ID"><a href="#拿取用户ID" class="headerlink" title="拿取用户ID"></a>拿取用户ID</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getProfile</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> UserContext.getUserId(); <span class="hljs-comment">// 拿到当前登录用户 ID</span><br>        <span class="hljs-comment">// 继续查询用户数据</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>像不像Terraria里的<a href="https://terraria.wiki.gg/zh/wiki/%E8%99%9A%E7%A9%BA%E8%A2%8B">虚空袋</a><img src="https://terraria.wiki.gg/images/e/ed/Void_Bag_%28projectile%29.gif?182088">，Minecraft里的<a href="https://zh.minecraft.wiki/w/%E6%9C%AB%E5%BD%B1%E7%AE%B1">末影箱</a><img src="https://zh.minecraft.wiki/images/Invicon_Ender_Chest_BE.png?c861c"></p></blockquote><p>以上，你完成了登录模块的一系列功能，你能够进行登录拦截，能够持久化登录，能够让当前请求的用户ID像放在末影箱里一样随取随用。</p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>网站</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring：Redis</title>
    <link href="/posts/1509927759/"/>
    <url>/posts/1509927759/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring：Redis"><a href="#Spring：Redis" class="headerlink" title="Spring：Redis"></a>Spring：Redis</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><strong>Redis（Remote Dictionary Server）</strong> 是一个<strong>开源的内存数据库</strong>，用来存储键值对（key-value）的数据。和传统的 MySQL 这些“硬盘数据库”不同，Redis 是把数据放在内存里，速度非常快，适合做缓存、计数器、排行榜、验证码这些对性能要求很高的场景。</p><h3 id="Redis-有啥特点？"><a href="#Redis-有啥特点？" class="headerlink" title="Redis 有啥特点？"></a>Redis 有啥特点？</h3><ul><li><p><strong>基于内存，读写巨快</strong>（能达到几十万QPS）</p></li><li><p><strong>支持多种数据结构</strong>：</p><ul><li><p><code>String</code> 字符串（最常用）</p></li><li><p><code>List</code> 列表（可以当消息队列用）</p></li><li><p><code>Set</code> 集合（不重复元素）</p></li><li><p><code>Hash</code> 哈希（类似小型对象）</p></li><li><p><code>ZSet</code> 有序集合（排行榜）</p></li></ul></li><li><p><strong>支持过期时间</strong>（适合验证码、登录状态）</p></li><li><p><strong>支持发布&#x2F;订阅、事务、Lua 脚本</strong></p></li><li><p><strong>可持久化</strong>：虽然是内存数据库，但也可以保存到磁盘，断电不丢数据（RDB、AOF）</p></li></ul><h3 id="为什么不用SQL呢？"><a href="#为什么不用SQL呢？" class="headerlink" title="为什么不用SQL呢？"></a>为什么不用SQL呢？</h3><ul><li><p>数据库操作更重、I&#x2F;O 更慢，不适合高频的验证码读写。</p></li><li><p>验证码属于“临时数据”，放进主业务数据库污染数据表。</p></li><li><p>还要考虑清理过期验证码的问题，而 Redis 本身就能自动淘汰。</p></li></ul><h3 id="Redis-常见应用场景"><a href="#Redis-常见应用场景" class="headerlink" title="Redis 常见应用场景"></a>Redis 常见应用场景</h3><ul><li><p>缓存热点数据（比如首页文章列表）</p></li><li><p>存验证码、短连接、Token 等临时信息</p></li><li><p>限流防刷（比如登录失败超过5次就锁账号）</p></li><li><p>实现排行榜（有序集合 ZSet）</p></li><li><p>实现分布式锁（高并发资源控制）</p></li></ul><h2 id="代码实践"><a href="#代码实践" class="headerlink" title="代码实践"></a>代码实践</h2><p>既然要使用Redis，我们首先得拥有Redis<br>常见的有两种使用方法，使用各大平台上的云Redis，免费的或者付费的<br>或者下载一个本地的Redis服务。</p><h3 id="在本地使用Redis"><a href="#在本地使用Redis" class="headerlink" title="在本地使用Redis"></a>在本地使用Redis</h3><p><a href="https://github.com/redis-windows/redis-windows/releases">Redis下载</a></p><ul><li><a href="https://github.com/redis-windows/redis-windows/releases/download/8.0.0/Redis-8.0.0-Windows-x64-cygwin-with-Service.zip">Redis-8.0.0-Windows-x64-cygwin-with-Service.zip</a></li></ul><p>好，你下好了，接下来我们进入解压好的文件夹<br>直接点击<strong>start.bat</strong>开始运行……吗？<br>你也不想让别人知道你的Redis吧😋<br>我们直接进入<strong>redis.conf</strong>文件进行配置</p><h4 id="修改端口号"><a href="#修改端口号" class="headerlink" title="修改端口号"></a>修改端口号</h4><p>CTRL + F 搜索 port 6379<br>6379是你的默认端口号，请修改为自己喜欢的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs conf">port 1145<br></code></pre></td></tr></table></figure><h4 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs conf"># requirepass foobared<br>requirepass 114514<br></code></pre></td></tr></table></figure><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>在Redis根目录打开控制台输入</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">redis-cli -p 1145<br>auth 114514<br>&gt;OK<br></code></pre></td></tr></table></figure><p><strong>这样本地服务就正常启动了</strong></p><h4 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h4><p>推荐一个可视化Redis管理客户端咩~<br><a href="https://goanother.com/cn/">Another Redis Desktop Manager | 更快、更好、更稳定的Redis桌面(GUI)管理客户端，兼容Windows、Mac、Linux，性能出众，轻松加载海量键值</a></p><h3 id="在Spring中使用"><a href="#在Spring中使用" class="headerlink" title="在Spring中使用"></a>在Spring中使用</h3><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>首先，和其他模块一样，上来先配置一手</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br><span class="hljs-attr">redis:</span><br>  <span class="hljs-attr">host:</span> <span class="hljs-string">你的Redis地址</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-string">Redis端口号</span><br>  <span class="hljs-attr">password:</span> <span class="hljs-string">密码</span><br>  <span class="hljs-attr">username:</span> <span class="hljs-string">default</span><br>  <span class="hljs-attr">timeout:</span> <span class="hljs-number">5000</span>  <span class="hljs-comment"># 连接超时时间（ms）</span><br>      <span class="hljs-attr">lettuce:</span><br>        <span class="hljs-attr">pool:</span><br>          <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span><br>          <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span><br>          <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h4 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h4><p>无非就是 设置，获取，删除</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.dawnlight.chronicle_dawnlight.common.utils;  <br>  <br><span class="hljs-keyword">import</span> com.fasterxml.jackson.core.type.TypeReference;  <br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;  <br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;  <br><span class="hljs-keyword">import</span> com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;  <br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;  <br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;  <br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;  <br>  <br><span class="hljs-keyword">import</span> java.util.Set;  <br><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;  <br>  <br><span class="hljs-meta">@Component</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisUtil</span> &#123;  <br>  <br>    <span class="hljs-meta">@Autowired</span>  <br>    <span class="hljs-keyword">private</span> StringRedisTemplate stringRedisTemplate;  <br>  <br>    <span class="hljs-comment">// 配置支持 Java 8 时间类型的 ObjectMapper    private final ObjectMapper objectMapper;  </span><br>  <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisUtil</span><span class="hljs-params">()</span> &#123;  <br>        <span class="hljs-built_in">this</span>.objectMapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();  <br>        <span class="hljs-built_in">this</span>.objectMapper.registerModule(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JavaTimeModule</span>());  <br>        <span class="hljs-built_in">this</span>.objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS); <span class="hljs-comment">// 避免时间戳格式  </span><br>    &#125;  <br>  <br>    <span class="hljs-comment">/**  </span><br><span class="hljs-comment">     * 设置键值对（对象序列化为 JSON 存储），并设置过期时间  </span><br><span class="hljs-comment">     */</span>  <br>    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(String key, T value, <span class="hljs-type">long</span> timeout)</span> &#123;  <br>        <span class="hljs-keyword">if</span> (key == <span class="hljs-literal">null</span> || value == <span class="hljs-literal">null</span>) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Key or value cannot be null&quot;</span>);  <br>        &#125;  <br>        <span class="hljs-keyword">try</span> &#123;  <br>            <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(value);  <br>            stringRedisTemplate.opsForValue().set(key, json, timeout, TimeUnit.MINUTES);  <br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;Redis set operation failed&quot;</span>, e);  <br>        &#125;  <br>    &#125;  <br>  <br>    <span class="hljs-comment">/**  </span><br><span class="hljs-comment">     * 获取值（JSON 反序列化为对象）  </span><br><span class="hljs-comment">     */</span>  <br>    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">get</span><span class="hljs-params">(String key, TypeReference&lt;T&gt; typeReference)</span> &#123;  <br>        <span class="hljs-keyword">try</span> &#123;  <br>            <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue().get(key);  <br>            <span class="hljs-keyword">if</span> (json == <span class="hljs-literal">null</span>) &#123;  <br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <br>            &#125;  <br>            <span class="hljs-comment">// 使用 ObjectMapper 解析 JSON 字符串为指定类型  </span><br>            <span class="hljs-keyword">return</span> objectMapper.readValue(json, typeReference);  <br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;Redis get operation failed&quot;</span>, e);  <br>        &#125;  <br>    &#125;  <br>  <br>    <span class="hljs-comment">/**  </span><br><span class="hljs-comment">     * 删除键  </span><br><span class="hljs-comment">     */</span>  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(String key)</span> &#123;  <br>        stringRedisTemplate.delete(key);  <br>    &#125;  <br>    <span class="hljs-comment">/**  </span><br><span class="hljs-comment">     * 删除指定前缀的所有键  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> folderPrefix 前缀，例如 &quot;folder:subfolder:&quot;  </span><br><span class="hljs-comment">     */</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteFolder</span><span class="hljs-params">(String folderPrefix)</span> &#123;  <br>        <span class="hljs-keyword">try</span> &#123;  <br>            <span class="hljs-comment">// 使用 Redis 模糊查询匹配键  </span><br>            Set&lt;String&gt; keys = stringRedisTemplate.keys(folderPrefix + <span class="hljs-string">&quot;*&quot;</span>);  <br>            <span class="hljs-keyword">if</span> (keys != <span class="hljs-literal">null</span> &amp;&amp; !keys.isEmpty()) &#123;  <br>                <span class="hljs-comment">// 删除匹配的键  </span><br>                stringRedisTemplate.delete(keys);  <br>                System.out.println(<span class="hljs-string">&quot;删除成功，删除键数量：&quot;</span> + keys.size());  <br>            &#125; <span class="hljs-keyword">else</span> &#123;  <br>                System.out.println(<span class="hljs-string">&quot;未找到匹配的键&quot;</span>);  <br>            &#125;  <br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;删除文件夹失败&quot;</span>, e);  <br>        &#125;  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>拿验证码举例<br>当用户点击“获取验证码”按钮的时候，前端请求一个&#x2F;sendMailCaptcha</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/sendMailCaptcha&quot;)</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendHtmlMailMessage</span><span class="hljs-params">(String to)</span> &#123;<br>    <span class="hljs-comment">//生成验证码  </span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> generateSixDigitCode();  <br>    redisUtil.set(to + <span class="hljs-string">&quot;code&quot;</span>, code, <span class="hljs-number">1</span>);<br>    ...<br></code></pre></td></tr></table></figure><p>生成验证码后，把用户的id和字段“code“拼接，作为key<br>把验证码的值作为 Value<br>过去时间设置为“1”（一分钟）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>Key<span class="hljs-punctuation">:</span>xxxxxcode<span class="hljs-punctuation">,</span><br>Value<span class="hljs-punctuation">:</span><span class="hljs-number">1145</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>就把这串东西存到了Redis中。</p><p>验证码是用来用来注册或者邮箱登录之类的，<br>我们写注册或者邮箱登录的时候，除了基础信息，再新增一个 code字段</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">registerUser</span><span class="hljs-params">(UserDTO userDTO, String code)</span> <span class="hljs-keyword">throws</span> BaseException &#123;<br>...<br><span class="hljs-type">String</span> <span class="hljs-variable">redisCode</span> <span class="hljs-operator">=</span> redisUtil.get(userDTO.getEmail() + <span class="hljs-string">&quot;code&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&lt;String&gt;() &#123;&#125;);<br>   <span class="hljs-comment">// 校验验证码  </span><br>   <span class="hljs-keyword">if</span> (code.isEmpty()) &#123;  <br>       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;请输入验证码&quot;</span>);  <br>   &#125;  <br>   <span class="hljs-keyword">if</span> (redisUtil.get(redisCode) == <span class="hljs-literal">null</span>)&#123;  <br>       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;验证码已过期&quot;</span>);<br>   &#125;  <br>   <span class="hljs-keyword">if</span> (!code.equals(redisCode)) &#123;  <br>       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;验证码错误&quot;</span>);  <br>   &#125;<br>    ...<br></code></pre></td></tr></table></figure><p>当验证码通过的时候，我们再使用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">redisUtil.delete(userDTO.getEmail()+<span class="hljs-string">&quot;code&quot;</span>)<br></code></pre></td></tr></table></figure><p>把验证码删除。</p><p>以上<br>如果有错误，还请在评论区指出，谢谢大佬们。</p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
      <tag>网站</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring：邮箱验证码</title>
    <link href="/posts/1626624342/"/>
    <url>/posts/1626624342/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring：邮箱验证码"><a href="#Spring：邮箱验证码" class="headerlink" title="Spring：邮箱验证码"></a>Spring：邮箱验证码</h1><p>既然谈到了邮箱验证码，肯定是我们后端通过某些操作把验证码发送到用户的邮箱里。<br>我们首先讲解Spring如何发送邮箱<br>其实我之前已经写过了一篇文章：<br><a href="https://www.zheep.top/2024/11/27/%E5%AE%9E%E7%8E%B0Spring%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/">实现Spring发送邮件 - 云端的解构者 | 西行寺岩羊的博客</a><br>请先阅读这篇文章，然后按照文章的操作对Spring进行配置。<br>配置好之后，我们就拿到了发送邮件接口。</p><p>这里我把MailService贴出来供大家参考</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MailService</span> &#123;  <br>    <span class="hljs-meta">@Autowired</span>  <br>    <span class="hljs-keyword">private</span> JavaMailSenderImpl javaMailSender;  <br>    <span class="hljs-meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span>  <br>    <span class="hljs-keyword">private</span> String sendMailer;  <br>    <span class="hljs-comment">/**  </span><br><span class="hljs-comment">     * 检测邮件信息类  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> to 发送人  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> subject 主题  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> text 内容  </span><br><span class="hljs-comment">     */</span>  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkMail</span><span class="hljs-params">(String to,String subject,String text)</span>&#123;  <br>        <span class="hljs-keyword">if</span>(StringUtils.isEmpty(to))&#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;邮件收信人不能为空&quot;</span>);  <br>        &#125;  <br>        <span class="hljs-keyword">if</span>(StringUtils.isEmpty(subject))&#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;邮件主题不能为空&quot;</span>);  <br>        &#125;  <br>        <span class="hljs-keyword">if</span>(StringUtils.isEmpty(text))&#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;邮件内容不能为空&quot;</span>);  <br>        &#125;  <br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendHtmlMailMessage</span><span class="hljs-params">(String to,String subject,String text)</span>&#123;  <br>    checkMail(to,subject,text);  <br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">//true 代表支持复杂的类型  </span><br>        <span class="hljs-type">MimeMessageHelper</span> <span class="hljs-variable">mimeMessageHelper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessageHelper</span>(javaMailSender.createMimeMessage(),<span class="hljs-literal">true</span>);  <br>        <span class="hljs-comment">//邮件发信人  </span><br>        mimeMessageHelper.setFrom(sendMailer);  <br>        <span class="hljs-comment">//邮件收信人  1或多个  </span><br>        mimeMessageHelper.setTo(to.split(<span class="hljs-string">&quot;,&quot;</span>));  <br>        <span class="hljs-comment">//邮件主题  </span><br>        mimeMessageHelper.setSubject(subject);  <br>        <span class="hljs-comment">//邮件内容  </span><br>        mimeMessageHelper.setText(text,<span class="hljs-literal">true</span>);  <br>        <span class="hljs-comment">//邮件发送时间  </span><br>        mimeMessageHelper.setSentDate(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());  <br>  <br>        <span class="hljs-comment">//发送邮件  </span><br>        javaMailSender.send(mimeMessageHelper.getMimeMessage());  <br>        System.out.println(<span class="hljs-string">&quot;发送邮件成功：&quot;</span>+sendMailer+<span class="hljs-string">&quot;-&gt;&quot;</span>+to);  <br>  <br>    &#125; <span class="hljs-keyword">catch</span> (MessagingException e) &#123;  <br>        e.printStackTrace();  <br>        System.out.println(<span class="hljs-string">&quot;发送邮件失败：&quot;</span>+e.getMessage());  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><p>这一段Service代码是针对html格式的邮箱内容进行编写的，没错，邮箱支持HTML格式，而且很多平台发送邮箱验证码都是使用这种格式，比如大家最喜欢的 Steam 平台。<br>如果大家需要纯文本格式的邮件发送代码，请参考上面我之前写的一篇文章。<br>我对邮件发送的Service已经封装好了，在Controller层可以直接拿来就用。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**  </span><br><span class="hljs-comment"> * 发送HTML邮箱验证码</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> to 邮箱</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RequestMapping(&quot;/sendMailCaptcha&quot;)</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendHtmlMailMessage</span><span class="hljs-params">(String to)</span> &#123;  <br>    <span class="hljs-type">String</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;曦光录&quot;</span>;<br>    <span class="hljs-comment">//生成验证码  </span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> generateSixDigitCode();  <br>    redisUtil.set(to + <span class="hljs-string">&quot;code&quot;</span>, code, <span class="hljs-number">1</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;邮箱内容&quot;</span>;<br>    mailService.sendHtmlMailMessage(to, subject, content);  <br>&#125;<br></code></pre></td></tr></table></figure><p>请看这段代码，我首先调用了一个生成验证码的方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetCaptcha</span> &#123;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CHARACTERS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;0123456789&quot;</span>;  <br>    <span class="hljs-comment">/**  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 六位的随机验证码字符串。</span><br><span class="hljs-comment">     */</span>  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateSixDigitCode</span><span class="hljs-params">()</span> &#123;  <br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();  <br>        <span class="hljs-type">Random</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>();  <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">6</span>; i++) &#123;  <br>            <span class="hljs-comment">// 从CHARACTERS中随机选择一个字符  </span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> random.nextInt(CHARACTERS.length());  <br>            <span class="hljs-type">char</span> <span class="hljs-variable">randomChar</span> <span class="hljs-operator">=</span> CHARACTERS.charAt(index);  <br>            sb.append(randomChar);  <br>        &#125;  <br>        <span class="hljs-keyword">return</span> sb.toString();  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><p>这里注意看，我们在class的上方使用了@Component，如果大家不认识它，那么就参考<br>[[Spring：整体思路讲解#^78644d|@Component]]<br><a href="https://www.zheep.top/2025/05/06/%E6%9B%A6%E5%85%89%E5%BD%95%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97%E6%A6%82%E8%BF%B0/">曦光录登录模块概述 - 云端的解构者 | 西行寺岩羊的博客</a><br>CTRL+F搜索：UserService是怎么被发现的？</p><p>上文中的Controller代码中使用了一个重要的模块—— Redis<br><code>redisUtil.set(to + &quot;code&quot;, code, 1);</code></p><p>Redis的基础介绍和应用请参考<br>[[Spring：Redis]]<br><a href="https://www.zheep.top/2025/05/08/Spring%EF%BC%9ARedis/">Spring：Redis - 云端的解构者 | 西行寺岩羊的博客</a><br>Redis文章和接下来的内容可能有些许重复<br><a href="https://www.zheep.top/2025/05/08/Spring%EF%BC%9ARedis/#%E5%AE%9E%E4%BE%8B">实例</a><br>直接看这个罢（懒</p><p>代码在实例中已经有了，讲讲思路<br>在上文代码中我们已经实现了：</p><ul><li>生成验证码</li><li>以HTML的形式把验证码发送到用户邮箱里</li><li>以「用户id+code：验证码」的形式存储到Redis中</li></ul><p>那么，该如何验证呢？</p><p>我们可以把验证码和用户的登录或者注册信息一并发送到后端，比如</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>user<span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>name<span class="hljs-punctuation">:</span>zheep<span class="hljs-punctuation">,</span><br>password<span class="hljs-punctuation">:</span><span class="hljs-number">114514</span><span class="hljs-punctuation">,</span><br>...<br><span class="hljs-punctuation">&#125;</span><br>code<span class="hljs-punctuation">:</span><span class="hljs-number">10086</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>这样后端在接收到数据后，在Service层中，先对验证码进行校验：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">redisCode</span> <span class="hljs-operator">=</span> redisUtil.get(userDTO.getEmail() + <span class="hljs-string">&quot;code&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&lt;String&gt;() &#123;&#125;);  <br><span class="hljs-comment">// 校验验证码  </span><br><span class="hljs-keyword">if</span> (code.isEmpty()) &#123;  <br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;请输入验证码&quot;</span>);  <br>&#125;  <br><span class="hljs-keyword">if</span> (redisUtil.get(redisCode) == <span class="hljs-literal">null</span>)&#123;  <br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;验证码已过期&quot;</span>);  <br>&#125;  <br><span class="hljs-keyword">if</span> (!code.equals(redisCode)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;验证码错误&quot;</span>);<br>&#125;<br>redisUtil.delete(redisCode)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>网站</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring：使用自定义异常</title>
    <link href="/posts/1585822579/"/>
    <url>/posts/1585822579/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring：使用自定义异常"><a href="#Spring：使用自定义异常" class="headerlink" title="Spring：使用自定义异常"></a>Spring：使用自定义异常</h1><h2 id="为什么要使用自定义的异常呢，难道说Java自带的异常不够好么？"><a href="#为什么要使用自定义的异常呢，难道说Java自带的异常不够好么？" class="headerlink" title="为什么要使用自定义的异常呢，难道说Java自带的异常不够好么？"></a>为什么要使用自定义的异常呢，难道说Java自带的异常不够好么？</h2><p>因为后端的最终目的是为了和前端进行交互，如果某个程序产生了异常，他只会在后台抛出堆栈信息，而不是以json等形式返回给前端，因此，我们需要一个捕捉报错，并且处理报错信息，以json的形式返回给前端的一个逻辑。<br>这既能够让前端获取到报错信息，还不会因为异常导致后端结构暴露在外面</p><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Exception</span>&#123;  <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BaseException</span><span class="hljs-params">()</span> &#123;  <br>    &#125;  <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BaseException</span><span class="hljs-params">(String msg)</span> &#123;  <br>        <span class="hljs-built_in">super</span>(msg);  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><p>我们定义了一个名为BaseException的异常，继承于Exception，[[Spring：整体思路讲解]]中很多逻辑都有一个throw new BaseException(“xxx错误信息”)的代码，表示这个异常被我用BaseException捕获到了，就不会产生系统异常的报错。<br>有一个异常还不够，因为报错有很多种类，比如数据库异常，redis服务异常等等，我们如何识别这些不同的报错信息呢。<br>因此我们需要一个<strong>全局异常处理器</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@RestControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> &#123;<br><br>    <span class="hljs-meta">@ExceptionHandler(BaseException.class)</span><br>    <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">handleBaseException</span><span class="hljs-params">(BaseException ex)</span> &#123;<br>        <span class="hljs-keyword">return</span> Result.error(ex.getMessage());<br>    &#125;<br><br>    <span class="hljs-meta">@ExceptionHandler(DataIntegrityViolationException.class)</span><br>    <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">handleDBException</span><span class="hljs-params">(DataIntegrityViolationException ex)</span> &#123;<br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;数据库错误：&quot;</span> + ex.getMessage());<br>    &#125;<br><br>    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span><br>    <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">handleOtherException</span><span class="hljs-params">(Exception ex)</span> &#123;<br>        <span class="hljs-keyword">if</span> (ex.getMessage() != <span class="hljs-literal">null</span> &amp;&amp; ex.getMessage().contains(<span class="hljs-string">&quot;6379&quot;</span>)) &#123;<br>            log.error(<span class="hljs-string">&quot;Redis未启动！&quot;</span>);<br>            <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;Redis服务未启动！&quot;</span>);<br>        &#125;<br>        log.error(<span class="hljs-string">&quot;未知异常：&#123;&#125;&quot;</span>, ex.getMessage());<br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;服务器内部错误&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="RestControllerAdvice的作用？"><a href="#RestControllerAdvice的作用？" class="headerlink" title="@RestControllerAdvice的作用？"></a>@RestControllerAdvice的作用？</h3><p>全局异常处理器 + 全局数据绑定 + 全局返回值处理器<br>定义好BaseException之后就需要一个全局异常处理器对这些异常进行处理</p><p>这里我们返回值统一采用了Result进行封装</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;  <br>  <br>    <span class="hljs-keyword">private</span> Integer code; <span class="hljs-comment">//编码：1成功，0和其它数字为失败  </span><br>    <span class="hljs-keyword">private</span> String msg; <span class="hljs-comment">//错误信息  </span><br>    <span class="hljs-keyword">private</span> T data; <span class="hljs-comment">//数据  </span><br>  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">()</span> &#123;  <br>        Result&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;T&gt;();  <br>        result.code = <span class="hljs-number">1</span>;  <br>        <span class="hljs-keyword">return</span> result;  <br>    &#125;  <br>  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">(T object)</span> &#123;  <br>        Result&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;T&gt;();  <br>        result.data = object;  <br>        result.code = <span class="hljs-number">1</span>;  <br>        <span class="hljs-keyword">return</span> result;  <br>    &#125;  <br>  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">error</span><span class="hljs-params">(String msg)</span> &#123;  <br>        <span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>();  <br>        result.msg = msg;  <br>        result.code = <span class="hljs-number">0</span>;  <br>        <span class="hljs-keyword">return</span> result;  <br>    &#125;  <br>  <br>&#125;<br></code></pre></td></tr></table></figure><p>这样，即使有报错，也会使用BaseException进行抛出，抛出的异常会被GlobalExceptionHandler捕获到，然后</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ExceptionHandler</span>  <br><span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">exceptionHandler</span><span class="hljs-params">(BaseException ex)</span> &#123;  <br>    <span class="hljs-keyword">return</span> Result.error(ex.getMessage());  <br>&#125;  <br></code></pre></td></tr></table></figure><p>使用这个方法统一返回<br>当然我们也可以捕获其他方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ExceptionHandler</span>  <br><span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">exceptionDBHandler</span><span class="hljs-params">(DataIntegrityViolationException ex)</span> &#123; <br>    <span class="hljs-keyword">return</span> Result.error(ex.getMessage());  <br>&#125;  <br></code></pre></td></tr></table></figure><p>也可以直接捕获Exception，然后对其处理</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ExceptionHandler</span>  <br><span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">exceptionHandler</span><span class="hljs-params">(Exception ex)</span> &#123;  <br>    <span class="hljs-keyword">if</span> (ex.getMessage().contains(<span class="hljs-string">&quot;6379&quot;</span>))&#123;  <br>        log.error(<span class="hljs-string">&quot;Redis未启动&quot;</span>);  <br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;Redis未启动&quot;</span>);  <br>    &#125;<br>    log.error(<span class="hljs-string">&quot;异常信息：&#123;&#125;&quot;</span>, ex.getMessage());  <br>    <span class="hljs-keyword">return</span> Result.error(ex.getMessage());  <br>&#125;<br></code></pre></td></tr></table></figure><p>比如以上代码，通过捕获异常中的内容，判断如果内容包含 6379 就添加一个错误日志 redis未启动，并且使用Result.error进行返回异常</p><p>因为产生异常之后，程序就就不会继续向下执行，因此直接走你写好的返回向前端返回。</p><h3 id="实际用法"><a href="#实际用法" class="headerlink" title="实际用法"></a>实际用法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (userMapper.findByUsername(userDTO.getUsername()) != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;用户名已存在&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>这样前端就会接收到：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;用户名已存在&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>这种不在方法中针对性写出的，而是独立于业务逻辑，集中对某些逻辑进行处理的思想被称为AOP<br>面相切面编程（挖坑</p><h2 id="曾经代码的不足"><a href="#曾经代码的不足" class="headerlink" title="曾经代码的不足"></a>曾经代码的不足</h2><h3 id="1-Result泛型封装不止0和1，也可以加上状态码常量"><a href="#1-Result泛型封装不止0和1，也可以加上状态码常量" class="headerlink" title="1. Result泛型封装不止0和1，也可以加上状态码常量"></a>1. Result泛型封装不止0和1，也可以加上状态码常量</h3><ul><li>业务异常（400）</li><li>权限异常（401）</li><li>系统异常（500）<br>或者单独定义一个通用常亮</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultCode</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SUCCESS</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FAIL</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">UNAUTHORIZED</span> <span class="hljs-operator">=</span> <span class="hljs-number">401</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SERVER_ERROR</span> <span class="hljs-operator">=</span> <span class="hljs-number">500</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-可以直接使用RuntimeException，运行时异常"><a href="#2-可以直接使用RuntimeException，运行时异常" class="headerlink" title="2. 可以直接使用RuntimeException，运行时异常"></a>2. 可以直接使用<strong>RuntimeException</strong>，运行时异常</h3><p>我们继承的是Exception，这是一种<strong>受检异常</strong>，每次用的时候都需要 <code>throws</code> 或者 <code>try-catch</code><br>而继承RuntimeException后则不用这么麻烦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BaseException</span><span class="hljs-params">(String msg)</span> &#123;<br>    <span class="hljs-built_in">super</span>(msg);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>网站</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring：整体思路讲解</title>
    <link href="/posts/3458421192/"/>
    <url>/posts/3458421192/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring：整体思路讲解"><a href="#Spring：整体思路讲解" class="headerlink" title="Spring：整体思路讲解"></a>Spring：整体思路讲解</h1><h2 id="Spring整体思路讲解"><a href="#Spring整体思路讲解" class="headerlink" title="Spring整体思路讲解"></a>Spring整体思路讲解</h2><p>后端，说白了就是围绕数据库做增删查改：从数据库中获取数据，处理后返回给前端；或者接收前端传来的数据，处理后存入数据库。这样前后端协同，项目就能跑起来。</p><p>比如实现一个注册登录功能：</p><ul><li><p><strong>注册</strong>：用户填写手机号、邮箱、密码等信息，前端传给后端。后端用一个“用户注册类”接收这些字段，然后将其存入数据库的用户表中。</p></li><li><p><strong>登录</strong>：用户输入账号密码，后端接收后去数据库查询，先判断用户名是否存在，再比对密码是否正确。匹配成功就登录成功，否则返回错误提示。</p></li></ul><p>看起来就是简单的数据交互，但实际上后端远不止这些。</p><p>真正复杂的地方在于“<strong>如何管理用户状态与系统安全</strong>”：</p><ul><li><p>用户登录后，如何让系统知道“这个请求是谁发的”？</p></li><li><p>用户没登录，却直接访问别人主页的链接，要如何阻止？</p></li><li><p>用户登录之后要返回什么信息给前端？Token？Session？</p></li><li><p>后端是要每次都手写判断，还是有统一拦截机制来管理这些权限？</p></li><li><p>数据库压力大时如何优化查询？怎么加缓存？用户量大了怎么拆服务？</p></li><li><p>日志怎么打？异常怎么监控？接口怎么设计才能稳、扩展性强？</p></li></ul><p>这些问题构成了<strong>后端的核心价值</strong>：权限控制、接口设计、缓存优化、消息队列、负载均衡、日志管理、安全校验、服务拆分……Spring看起来“复杂”，其实就是把这些基础能力都封装好了，让我们不用重复造轮子</p><h2 id="如何用Spring的语言操作这些东西"><a href="#如何用Spring的语言操作这些东西" class="headerlink" title="如何用Spring的语言操作这些东西"></a>如何用Spring的语言操作这些东西</h2><h3 id="首先我们先解决增删查改的问题"><a href="#首先我们先解决增删查改的问题" class="headerlink" title="首先我们先解决增删查改的问题"></a>首先我们先解决增删查改的问题</h3><p>现在程序的核心思想就是解耦，什么是解耦呢，就是把不同模块的功能分开进行处理，比如和前端打交道的模块，处理数据的模块，以及和数据库打交道的模块，还有单独用来<br><strong>存储数据</strong>的类<br>这些模块分别叫做<br>Controller 层（控制层）<br>Service 层（服务层）<br>Repository 层 &#x2F; DAO 层（数据访问层）现在叫Mapper（以后会说为什么，有什么区别）（挖坑<br>Entity &#x2F; POJO &#x2F; DTO</p><p>接下来我们按照接收数据，处理数据，数据库交互的思路来进行讲解</p><h4 id="Controller-层（控制层）"><a href="#Controller-层（控制层）" class="headerlink" title="Controller 层（控制层）"></a>Controller 层（控制层）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@PostMapping(&quot;/register&quot;)</span><br>    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">register</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserDTO userDTO)</span> &#123;<br>        <span class="hljs-keyword">return</span> userService.register(userDTO);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>看到这个代码初学者指定懵逼了<br>@RestController这些是什么，这是注解，Java自带的语言特性，贴个代码你就想起来了</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;这是个重写&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Deprecated</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">oldMethod</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;不建议再用我了&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Spring 和很多框架是<strong>基于 Java 原生注解机制</strong>，自定义了大量注解，比如：</p><table><thead><tr><th>注解</th><th>作用</th><th>举例</th></tr></thead><tbody><tr><td><code>@RestController</code></td><td>声明这个类是一个 REST 接口类（自动返回 JSON）</td><td>贴在类上</td></tr><tr><td><code>@RequestMapping(&quot;/user&quot;)</code></td><td>给这个类或方法绑定访问路径</td><td>可写在类或方法上</td></tr><tr><td><code>@PostMapping(&quot;/register&quot;)</code></td><td>绑定 POST 请求的具体路径</td><td>只贴在方法上</td></tr><tr><td><code>@RequestBody</code></td><td>把 JSON 转成 Java 对象</td><td>用在参数前</td></tr><tr><td><code>@GetMapping</code>, <code>@DeleteMapping</code>, <code>@PutMapping</code></td><td>对应不同的 HTTP 请求</td><td>类似 PostMapping</td></tr></tbody></table><p>这些不用一个个记忆，我们结合代码就方便理解了</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span> <span class="hljs-comment">// 这是个对外暴露的接口类</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span> <span class="hljs-comment">// 所有路径都以 /user 开头</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br><br>    <span class="hljs-meta">@PostMapping(&quot;/register&quot;)</span> <span class="hljs-comment">// 注册接口，POST 请求</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">register</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserDTO userDTO)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;注册成功：&quot;</span> + userDTO.getUsername();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="PostMapping是什么？"><a href="#PostMapping是什么？" class="headerlink" title="PostMapping是什么？"></a>PostMapping是什么？</h5><h5 id="接口是什么？"><a href="#接口是什么？" class="headerlink" title="接口是什么？"></a>接口是什么？</h5><p>Controller层和前端打交道所使用的方式就是接口<br>上文中的RequestMapping(“&#x2F;user”)是UserController接口类的一个接口“根”路径<br>@PostMapping(“&#x2F;register”)是一个post类型的接口<br>简单讲就是当前端请求「服务器地址+&#x2F;user&#x2F;register」的时候，后端就会自动识别到这个请求，然后执行@PostMapping(“&#x2F;register”) 下面的方法<br>可以理解为遥控器的按钮，当按下“音量+”的时候，电视的音量就会升高。</p><h5 id="如何引入Service层？"><a href="#如何引入Service层？" class="headerlink" title="如何引入Service层？"></a>如何引入Service层？</h5><h6 id="三种方式"><a href="#三种方式" class="headerlink" title="三种方式"></a>三种方式</h6><p><strong><code>@Autowired</code></strong> 注解是 Spring 中用来自动注入依赖的常见方式，我们先使用字段注入，后期对这三种方式进行细说（挖坑<br>1.1 <strong>构造器注入（推荐方式）</strong><br>1.2 <strong>字段注入（最常见的方式）</strong><br>1.3 <strong>Setter 方法注入</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> UserService userService;<br></code></pre></td></tr></table></figure><h6 id="UserService是怎么被发现的？"><a href="#UserService是怎么被发现的？" class="headerlink" title="UserService是怎么被发现的？"></a>UserService是怎么被发现的？</h6><p>这不得不提<strong>注解</strong>的知识了<br>当我们使用 <code>@Component</code>及其衍生注解<code>@Service</code>、<code>@Repository</code>、<code>@Controller</code>的时候，Spring 会自动扫描指定包下的类，并根据这些注解将它们注册为<br>Spring 管理的 Bean，这一系列操作也就是<strong>Spring 的组件扫描（Component Scanning）</strong>（挖坑</p><h5 id="怎么返回值？"><a href="#怎么返回值？" class="headerlink" title="怎么返回值？"></a>怎么返回值？</h5><p>前端通常接收到的数据为：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  code<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>  <span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><br>  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    xxx<br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>在我们的第一个代码示例中出现了@RestController注解<br>它是 <strong>@RestController</strong> 和 <strong>@ResponseBody</strong>的合成注解<br><strong>@RestController</strong>的作用就是方法返回的对象会自动转换成 <strong>JSON</strong><br>这里引入一个 <strong>HTTP 消息转换器（HttpMessageConverter）</strong> 机制</p><ul><li>把 Java 对象 ➜ 转成 JSON（发送给前端）</li><li>把前端传来的 JSON ➜ 还原成 Java 对象（用在 <code>@RequestBody</code> 上）<br>默认情况下，Spring Boot 会自动引入 <strong>Jackson</strong>（一个 JSON 序列化库）来进行转换。<br>以后会详细讲解这些（挖坑</li></ul><h5 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/admin/user&quot;)</span>  <br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Autowired</span>  <br><span class="hljs-keyword">private</span> UserService userService;  <br><br><span class="hljs-meta">@Autowired</span>  <br><span class="hljs-keyword">private</span> UserMapper userMapper;<br><span class="hljs-meta">@PostMapping(&quot;/register&quot;)</span>  <br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">register</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserDTO userDTO, String code)</span> <span class="hljs-keyword">throws</span> BaseException &#123;  <br>    log.info(<span class="hljs-string">&quot;新增用户&#123;&#125;&quot;</span>, userDTO);  <br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userService.registerUser(userDTO, code);  <br>    <span class="hljs-keyword">if</span> (result == <span class="hljs-number">1</span>) &#123;  <br>        <span class="hljs-keyword">return</span> Result.success();  <br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;添加失败&quot;</span>);  <br>&#125;<br></code></pre></td></tr></table></figure><h6 id="BaseException是什么，怎么定义的？"><a href="#BaseException是什么，怎么定义的？" class="headerlink" title="BaseException是什么，怎么定义的？"></a><strong>BaseException是什么，怎么定义的？</strong></h6><p><a href="https://www.zheep.top/posts/1585822579/">Spring：使用自定义异常</a></p><h6 id="code是什么，干什么的？"><a href="#code是什么，干什么的？" class="headerlink" title="code是什么，干什么的？"></a><strong>code是什么，干什么的？</strong></h6><p><a href="https://www.zheep.top/posts/1626624342/">Spring：邮箱验证码</a></p><h6 id="为什么前面会带一个-RequestBody？"><a href="#为什么前面会带一个-RequestBody？" class="headerlink" title="为什么前面会带一个@RequestBody？"></a><strong>为什么前面会带一个@RequestBody？</strong></h6><p>消息转换器（挖坑<br>因为前端通过 JSON 传数据时，<strong>不是传统的表单形式</strong>，Spring 不知道该怎么自动映射这些数据。<br>只有加了 <code>@RequestBody</code>，Spring 才会用 <strong>消息转换器（HttpMessageConverter）</strong>，把 JSON ➜ 转成 Java 对象。</p><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs h">POST /<span class="hljs-keyword">register</span><br>Content-Type: application/json<br>&#123;<br>  <span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;岩羊&quot;</span>,<br>  <span class="hljs-string">&quot;password&quot;</span>: <span class="hljs-string">&quot;123456&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(&quot;/register&quot;)</span><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">register</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserDTO userDTO, String code)</span> &#123;<br>    <span class="hljs-comment">// userDTO 就是前端传来的 JSON 自动转的对象</span><br>    <span class="hljs-comment">// code 可以是 URL 参数或 form-data 传的</span><br>&#125;<br></code></pre></td></tr></table></figure><p>接收什么数据该用什么注解呢？（挖坑</p><h4 id="Service-层"><a href="#Service-层" class="headerlink" title="Service 层"></a>Service 层</h4><p>Service层主要用来进行业务处理，就如同上文提到的，被Controller层进行调用，从而处理前端的各种数据，然后把处理好的数据提供给Mapper，存储到数据库中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">login</span><span class="hljs-params">(String username, String password)</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.findByUsername(username);<br>        <span class="hljs-keyword">return</span> user != <span class="hljs-literal">null</span> &amp;&amp; user.getPassword().equals(password);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> &#123;  <br>    Integer <span class="hljs-title function_">registerUser</span><span class="hljs-params">(UserDTO userDTO, String code)</span> <span class="hljs-keyword">throws</span> BaseException;<br>    ...<br></code></pre></td></tr></table></figure><p>整体一看，Service层有接口和实现类</p><h5 id="为什么使用接口和实现类呢？"><a href="#为什么使用接口和实现类呢？" class="headerlink" title="为什么使用接口和实现类呢？"></a>为什么使用接口和实现类呢？</h5><p>这是<strong>面向接口编程</strong> 的体现<br>如果你直接写死</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> UserServiceImpl userService;<br></code></pre></td></tr></table></figure><p>这就直接具体实现了，如果将来我想要写个测试Service，就需要到处进行修改了<br>有了接口，我们可以用一个Service实现不同环境的逻辑<br>比如</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MockUserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span>&#123;&#125;<span class="hljs-comment">// 测试使用</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RemoteUserService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span>&#123;&#125;<span class="hljs-comment">// 远程服务</span><br></code></pre></td></tr></table></figure><p>由于Service层主要体现在对数据的处理方面</p><h5 id="实践-1"><a href="#实践-1" class="headerlink" title="实践"></a>实践</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span>  <br><span class="hljs-meta">@Slf4j</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;  <br>    <span class="hljs-meta">@Autowired</span>  <br>    RoleMapper roleMapper;  <br>    <span class="hljs-meta">@Autowired</span>  <br>    UserMapper userMapper;  <br>    <span class="hljs-meta">@Autowired</span>  <br>    <span class="hljs-keyword">private</span> RedisUtil redisUtil;  <br>  <br>    <span class="hljs-meta">@Override</span>  <br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">registerUser</span><span class="hljs-params">(UserDTO userDTO, String code)</span> <span class="hljs-keyword">throws</span> BaseException &#123;  <br><span class="hljs-comment">//        格式校验  </span><br>        <span class="hljs-comment">// 校验用户名  </span><br>        <span class="hljs-keyword">if</span> (!isValidUsername(userDTO.getUsername())) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;无效的用户名，用户名必须是3-20个字符，且只能包含字母、数字、下划线和短横线。&quot;</span>);  <br>        &#125;  <br>        <span class="hljs-comment">// 校验用户名是否重复  </span><br>        <span class="hljs-type">UserPO</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserPO</span>();  <br>        temp.setUsername(userDTO.getUsername());  <br>        <span class="hljs-keyword">if</span> (userMapper.select(temp) != <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;用户名&quot;</span> + userDTO.getUsername() + <span class="hljs-string">&quot;重复&quot;</span>);  <br>        <span class="hljs-comment">// 校验邮箱  </span><br>        <span class="hljs-keyword">if</span> (!isValidEmail(userDTO.getEmail())) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;无效的邮箱格式.&quot;</span>);  <br>        &#125;  <br>        <span class="hljs-comment">// 校验邮箱是否重复  </span><br>        temp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserPO</span>();  <br>        temp.setUsername(userDTO.getEmail());  <br>        <span class="hljs-keyword">if</span> (userMapper.select(temp) != <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;该邮箱已注册&quot;</span>);  <br>        <span class="hljs-comment">// 校验密码  </span><br>        <span class="hljs-keyword">if</span> (!isValidPassword(userDTO.getPassword())) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;无效的密码。密码必须是6-20个字符。&quot;</span>);  <br>        &#125;  <br>        TypeReference&lt;String&gt; typeReference = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&lt;String&gt;() &#123;&#125;;  <br>        <span class="hljs-comment">// 校验验证码  </span><br>        <span class="hljs-keyword">if</span> (code.isEmpty()) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;请输入验证码&quot;</span>);  <br>        &#125;  <br>        <span class="hljs-keyword">if</span> (redisUtil.get(userDTO.getEmail()+<span class="hljs-string">&quot;code&quot;</span>,typeReference) == <span class="hljs-literal">null</span>)&#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;验证码已过期&quot;</span>);<br>        &#125;  <br>        <span class="hljs-keyword">if</span> (!code.equals(redisUtil.get(userDTO.getEmail()+<span class="hljs-string">&quot;code&quot;</span>,typeReference))) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseException</span>(<span class="hljs-string">&quot;验证码错误&quot;</span>);  <br>        &#125;  <br>        <span class="hljs-type">UserPO</span> <span class="hljs-variable">userPO</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserPO</span>();  <br>        BeanUtils.copyProperties(userDTO, userPO);  <br><span class="hljs-comment">//        UUID  </span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();  <br>        userPO.setId(userId);  <br><span class="hljs-comment">//        默认头像  </span><br>        userPO.setAvatar(<span class="hljs-string">&quot;头像地址&quot;</span>);  <br><span class="hljs-comment">//        密码加密  </span><br>userPO.setPassword(DigestUtils.md5DigestAsHex(userDTO.getPassword().getBytes()));  <br><span class="hljs-comment">//        新增状态  </span><br>        userPO.setStatus(Status.NORMAL);  <br><span class="hljs-comment">//        新增身份  </span><br>        userPO.setRole(Role.ORDINARY);  <br><span class="hljs-comment">//        创建时间  </span><br>        userPO.setCreatedAt(LocalDateTime.now());  <br><span class="hljs-comment">//        修改时间  </span><br>        userPO.setUpdatedAt(LocalDateTime.now());  <br>        log.info(<span class="hljs-string">&quot;Registering user: &#123;&#125;&quot;</span>, userPO);  <br>        <span class="hljs-keyword">return</span> userMapper.registerUser(userPO);  <br>    &#125;<br></code></pre></td></tr></table></figure><p>微距了吧，其实就注册类复杂一点，因为这种操作类似于用户初始化，你要在用户注册的时候为用户添加各种默认的信息<br>看似复杂，其实总体就三步，接收Controller层的数据，处理数据，把处理好的数据交给Mapper层。<br>接受信息不必多说，在 POJO 里创建一个用户信息的类，然后直接字段注入</p><p>UserPO示例</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span>  <br><span class="hljs-meta">@NoArgsConstructor</span>  <br><span class="hljs-meta">@AllArgsConstructor</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPO</span> &#123;  <br>    <span class="hljs-keyword">private</span> String id; <span class="hljs-comment">// 用户ID，使用UUID  </span><br>    <span class="hljs-keyword">private</span> String username; <span class="hljs-comment">// 用户名  </span><br>    <span class="hljs-keyword">private</span> String password; <span class="hljs-comment">// 加密后的密码  </span><br>    <span class="hljs-keyword">private</span> String email; <span class="hljs-comment">// 邮箱，唯一  </span><br>    <span class="hljs-keyword">private</span> String avatar; <span class="hljs-comment">// 头像URL  </span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> status; <span class="hljs-comment">// 用户状态，1为激活，0为禁用  </span><br>    <span class="hljs-keyword">private</span> Integer role; <span class="hljs-comment">// 用户角色，引用Role类  </span><br>    <span class="hljs-keyword">private</span> LocalDateTime createdAt; <span class="hljs-comment">// 创建时间  </span><br>    <span class="hljs-keyword">private</span> LocalDateTime updatedAt; <span class="hljs-comment">// 更新时间  </span><br>&#125;<br></code></pre></td></tr></table></figure><p>前面校验部分在讲解Mapper之前了解即可，我们只需要知道经过一系列判断之后，我们把Controller层的数据全部放到了UserPO内进行存储，然后把数据交给Mapper层进行处理。</p><p>我们看到，Controller接收数据以及把数据交给Service层使用的是UserDTO，而Service把数据交给Mapper使用的则是PO，用什么区别呢？等讲<br>POJO 层的时候进行展开。</p><p>在Service中我们知道了如何从Controller接收数据，数据处理的逻辑是什么样的，以及如何把数据传给Mapper。</p><h4 id="Mapper层"><a href="#Mapper层" class="headerlink" title="Mapper层"></a>Mapper层</h4><h5 id="Mapper有两种和数据库交互的方法。"><a href="#Mapper有两种和数据库交互的方法。" class="headerlink" title="Mapper有两种和数据库交互的方法。"></a>Mapper有两种和数据库交互的方法。</h5><h6 id="方式一：注解版"><a href="#方式一：注解版" class="headerlink" title="方式一：注解版"></a>方式一：注解版</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br>    <span class="hljs-meta">@Select(&quot;SELECT * FROM user WHERE username = #&#123;username&#125;&quot;)</span><br>    User <span class="hljs-title function_">findByUsername</span><span class="hljs-params">(String username)</span>;<br>    <span class="hljs-meta">@Insert(&quot;INSERT INTO user (username, password) VALUES (#&#123;username&#125;, #&#123;password&#125;)&quot;)</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertUser</span><span class="hljs-params">(User user)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>如你所见，只需要在方法上加一个注解，括号里写上相应的数据库逻辑，在被调用的时候就会执行命令。<br>如果命令很多很复杂，我们在注解括号里写不就很麻烦吗？</p><h6 id="方式二：XML-配置（更灵活）"><a href="#方式二：XML-配置（更灵活）" class="headerlink" title="方式二：XML 配置（更灵活）"></a>方式二：XML 配置（更灵活）</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br>    User <span class="hljs-title function_">findByUsername</span><span class="hljs-params">(String username)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- resources/mapper/UserMapper.xml --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByUsername&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>    SELECT * FROM user WHERE username = #&#123;username&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>注意，这个xml映射文件要放在resources中，和UserMapper在一个结构中才能被映射到，比如<br><code>src/main/java/com/dawnlight/chronicle_dawnlight/mapper/UserMapper.java</code><br><code>src/main/resources/com/dawnlight/chronicle_dawnlight/mapper/UserMapper.xml</code><br>其中<code>/com/dawnlight/chronicle_dawnlight/mapper/UserMapper.java</code>这一段都是一样的，不言而喻（嗯</p><p>其中的id就是对应Mapper中的方法名，resultType就是返回值类型</p><h5 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;  <br>    Integer <span class="hljs-title function_">registerUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;user&quot;)</span> UserPO user)</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.dawnlight.chronicle_dawnlight.mapper.UserMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;registerUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.dawnlight.chronicle_dawnlight.pojo.po.UserPO&quot;</span>&gt;</span>``<br>        INSERT INTO users (id, username, password, email, avatar, status, role, created_at, updated_at)<br>        VALUES (#&#123;user.id&#125;, #&#123;user.username&#125;, #&#123;user.password&#125;, #&#123;user.email&#125;,<br>        #&#123;user.avatar&#125;, #&#123;user.status&#125;, #&#123;user.role&#125;, #&#123;user.createdAt&#125;,<br>        #&#123;user.updatedAt&#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure><p>问：如何让Spring和数据库相连接呢？<br>没错，既然需要Mapper层操作数据库，我们首先就要和数据库建立连接。<br>连接方式非常简单，涉及到了Spring的配置文件的知识（挖坑<br>这里我们简单讲述一下对数据库的配置<br>默认的配置文件叫做application.properties<br>我们可以修改为application.yml，比较简洁高效</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://地址:端口号/构架名</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">104754</span><br></code></pre></td></tr></table></figure><h6 id="问：-Param是什么"><a href="#问：-Param是什么" class="headerlink" title="问：@Param是什么"></a>问：@Param是什么</h6><p>@Param(“user”)可以理解为我们给形参 UserPO user 起了一个名字叫做user，这样我们在 xml 中看到的</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">VALUES</span> (#&#123;user.id&#125;, #&#123;user.username&#125;, #&#123;user.password&#125;, #&#123;user.email&#125;, <br>        #&#123;user.avatar&#125;, #&#123;user.status&#125;, #&#123;user.role&#125;, #&#123;user.createdAt&#125;, <br>        #&#123;user.updatedAt&#125;); <br></code></pre></td></tr></table></figure><p>这就让程序就知道了user是 你传入的 UserPO user</p><h6 id="问：-parameterType-“com-dawnlight-chronicle-dawnlight-pojo-po-UserPO”是什么"><a href="#问：-parameterType-“com-dawnlight-chronicle-dawnlight-pojo-po-UserPO”是什么" class="headerlink" title="问： parameterType &#x3D; “com.dawnlight.chronicle_dawnlight.pojo.po.UserPO”是什么"></a>问： parameterType &#x3D; “com.dawnlight.chronicle_dawnlight.pojo.po.UserPO”是什么</h6><p>这句话的作用是定义传入参数的类型，指定为UserPO，同理，上文代码中的 <strong>resultType&#x3D;”User”</strong> 是定义返回值类型</p><h6 id="问：namespace-“com-dawnlight-chronicle-dawnlight-mapper-UserMapper”有什么用？"><a href="#问：namespace-“com-dawnlight-chronicle-dawnlight-mapper-UserMapper”有什么用？" class="headerlink" title="问：namespace &#x3D; “com.dawnlight.chronicle_dawnlight.mapper.UserMapper”有什么用？"></a>问：namespace &#x3D; “com.dawnlight.chronicle_dawnlight.mapper.UserMapper”有什么用？</h6><p>这是声明一个作用域，就是告诉这个xml文件，我们要找的Mapper文件在这个路径下，这样就能够根据Mapper中的方法名自动映射了。</p><h6 id="问：这个代码返回值是什么呢？"><a href="#问：这个代码返回值是什么呢？" class="headerlink" title="问：这个代码返回值是什么呢？"></a>问：这个代码返回值是什么呢？</h6><p>这段 MyBatis 的 <code>&lt;insert&gt;</code> 标签，对应的返回值，其实是 <strong>执行成功后受影响的行数（int 类型）</strong></p><h6 id="补充：如果我们没有在Service中设置主键，而是设置的数据库自增主键，我们如何获取到这个自增的主键呢？"><a href="#补充：如果我们没有在Service中设置主键，而是设置的数据库自增主键，我们如何获取到这个自增的主键呢？" class="headerlink" title="补充：如果我们没有在Service中设置主键，而是设置的数据库自增主键，我们如何获取到这个自增的主键呢？"></a>补充：如果我们没有在Service中设置主键，而是设置的数据库自增主键，我们如何获取到这个自增的主键呢？</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><br><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;registerUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;UserPO&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><br>    INSERT INTO users (...)<br>    VALUES (...)<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure><p>这样 MyBatis 会自动把数据库生成的主键 ID 回填到 <code>user.id</code> 里</p><p>回到上文，我们提到了校验用户名和邮箱等数据是否已经被使用，这个逻辑在Mapper中很好实现，无非就是使用select语句对用户名和邮箱这些数据进行查询，如果查询到了，就说明已经被使用了</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">String <span class="hljs-title function_">select</span><span class="hljs-params">(UserPO userPO)</span>;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;select&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span>&gt;</span><br>    select id<br>    from users<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username != null&quot;</span>&gt;</span>and username = #&#123;username&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;email != null&quot;</span>&gt;</span>and email = #&#123;email&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>这里我们把用户名查询和邮箱查询放到了一起，如果传的值是username，他就会查询username，邮箱同理</p><h6 id="和-这些是什么呢？"><a href="#和-这些是什么呢？" class="headerlink" title="&lt;where&gt; 和 &lt;if&gt; 这些是什么呢？"></a><code>&lt;where&gt;</code> 和 <code>&lt;if&gt;</code> 这些是什么呢？</h6><p>我们又引入了一个知识点，mybatis中的动态sql多条件查询<br>em，这篇文章讲的比我好，自行查阅<br><a href="https://blog.csdn.net/qq_43049310/article/details/110007299">MyBatis动态SQL 多条件查询</a></p><p>以上内容大致讲述了三层架构的作用以及具体代码的含义，当然，这只是Spring内容的一小部分。<br>按照以上操作可以完成一个基础的注册流程。<br>更多细节以后会更新，已经标注了（挖坑</p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>网站</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>书记：《德米安：埃米尔 · 辛克莱彷徨少年时》</title>
    <link href="/posts/1403506308/"/>
    <url>/posts/1403506308/</url>
    
    <content type="html"><![CDATA[<h1 id="书记：《德米安：埃米尔-·-辛克莱彷徨少年时》"><a href="#书记：《德米安：埃米尔-·-辛克莱彷徨少年时》" class="headerlink" title="书记：《德米安：埃米尔 · 辛克莱彷徨少年时》"></a>书记：《德米安：埃米尔 · 辛克莱彷徨少年时》</h1><p>本书讲的是辛克莱从童年到成人内心自我成长的故事。</p><h2 id="两个世界"><a href="#两个世界" class="headerlink" title="两个世界"></a>两个世界</h2><p>辛克莱出生于一个基督教上流家庭，父母为了更好地保护孩子，都尽力的扮演者完美的角色。辛克莱在这个世界被家庭庇护，而门外则是残酷黑暗的社会。</p><p>辛克莱本应在这个天堂中一无所知的成长，但他遇到了克罗莫，利用撒谎“偷苹果”一事对辛克莱进行敲诈，把他拉进了残酷的现实世界，辛克莱觉得自己沾染上了罪恶。</p><p>克罗莫象征的是人性中阴暗的一面，是我们每个人内心都可能存在的恶意与欲望。</p><p>辛克莱被克罗莫牵引的过程并非简单的威胁，而是一种扭曲的心理吸引，他第一次真实地接触到了<strong>违背规则所带来的力量感与恐惧交织的体验</strong>。</p><blockquote><p>我知道自已的想法令人唾弃，但感觉它很强烈，很诱人，牢固地将我与自已的秘密和罪责绑在一起。</p></blockquote><p>为什么罪恶会让人着迷？因为人类本能中带有原始的冲动和欲望，它们在文明的约束下被压抑，而一旦释放，就可能带来快感与力量感。</p><p>认识，遇到，摆脱他，其实是我们人生都会遇到的难题</p><blockquote><p>每个孩子都要经历这样的困境。它是普通人生活的分水岭，是自身的成长需求与周遭环境斗争最激烈的时刻，只有通过艰苦的斗争才能走出去。</p></blockquote><p>当辛克莱步入深渊，信仰着基督教的父母的世界观中并没有这些罪恶，因此也就无法帮助辛克莱。</p><blockquote><p>我从此怀有了自已的秘密，一项债务，一颗只能独吞的苦果。</p></blockquote><p>这里讲到辛克莱的父母，如果你假定世界是善良的，那么你将无法处理世界的黑暗面。只有当黑暗真实存在，我们才能真正理解文明的意义。</p><blockquote><p>上帝与魔鬼在那里搏斗，战场便在人们的心中。  —-《卡拉马佐夫兄弟》</p></blockquote><p>就在辛克莱陷入困惑与恐惧时，他遇到了另一位引导者——德米安，一个能正视黑暗、重新诠释世界的人。</p><h2 id="该隐"><a href="#该隐" class="headerlink" title="该隐"></a>该隐</h2><blockquote><p>他天生就是如此自信，可这种自信太具有挑战性；他那双眼眸，里面藏着成年人才有的情绪孩子们向来不喜欢这种情绪乍一看去似乎有些悲伤，可是与此同时，悲里又闪烁着嘲弄。</p></blockquote><p>看到了荒悖因此有了嘲讽，看到了悲伤因此有了哀伤</p><p>在课堂上，老师讲了该隐的故事：亚当夏娃的孩子该隐和亚伯出场，一个农耕一个放牧，在给上帝献祭的时候上帝收走了羔羊而吹走了该隐的谷物，该隐因此杀害了亚伯，该隐是人类史上第一个罪人。</p><p>但德米安和辛克莱交谈时却否定了老师的话。</p><blockquote><p>“那你的意思，该隐并不是坏人，而整个故事也不是真的？“<br>“是，也不是。这些古老的故事都是真的，但是被记录和解释的方法不一定真实。”</p></blockquote><blockquote><p>我认为该隐是个了不起的家伙，只是人们出于害怕给他编造了许多故事，都是些谣言，之后又以讹传讹。</p></blockquote><blockquote><p>那你认为他杀弟的部分也是假的？”我很震惊地问道。<br>“强者打败弱者，弱肉强食，这肯定是真的，但他们是不是亲兄弟不好说。”</p></blockquote><p>传统解释的背后，其实隐含的是社会对‘异类’的恐惧与排斥，而这种恐惧正是规训机制诞生的基础。<br>社会中的规训我们是无法避免，大部分人为了消除不安而选择了接收，但德米安选择了质疑。</p><p>辛克莱遇到了第二个难题，有无勇气释放出内心的德米安<br>当然，辛克莱对德米安产生了恐惧<br>因为德米安和克罗莫一样都会把他带出第一个世界</p><p>德米安代表的是辛克莱内心的觉醒，他是智慧、自信与质疑传统权威的象征。</p><p>德米安一眼看到了辛克莱的不安</p><blockquote><p>“一定是有什么人或者什么事让你害怕。但这样是不对的，我们永远不应害怕别人。你不会是怕我吧？“哦，当然不是。“那就好。这么说，你是在害怕别的什么人？</p></blockquote><blockquote><p>“你难道不知道，你对他的恐惧其实并不是真实存在的吗？这种子虚乌有的恐惧一旦放任其发展，最终肯定会将我们彻底毁掉，必须得摆脱掉它才行。你如果想成为一个<br>真正的男人，就必须摆脱它。你明白吗？</p></blockquote><blockquote><p>“我先回家了。”任他在雨中将大衣领子拉紧。</p></blockquote><blockquote><p>“克罗默的口哨没有再出现。一天，两天三天，整整一周过去了！我简直不敢相信，一直支着耳朵，看他是否会在意想不到的时候冒出来。可他真的没有再来。</p></blockquote><p>只有当我们内心的力量觉醒时，我们才能战胜内心的恐惧与黑暗；只有通过理性的引导，才能超越盲目的冲动。</p><blockquote><p>“积累足够强烈的欲望，想方设法地去实现它。只要能够达成这些条件，也就是说，只要你开始遵循自己内心所发出的指令，尽可能地去尝试，意志就会发挥作用，你就可以像驾驭一匹好马那样驾驭你自己的意志。“</p></blockquote><p>我们要学会驾驭生命中的能量</p><p>因此，德米安代表智慧和坚强</p><p>现在辛克莱不具备破掉人生茧壳的能力，因此选择退缩</p><blockquote><p>“如今，一只友谊之手将我拯救上岸，而我义无反顾地径直奔进母亲的怀抱，回到孩提时代的安全城堡。”“其实那是我自已害怕德米安的要求会更高。”</p></blockquote><p>我们每个人都要等待自己的成长，让自己的德米安变得更加强大</p><h2 id="人生的蛋壳"><a href="#人生的蛋壳" class="headerlink" title="人生的蛋壳"></a>人生的蛋壳</h2><p>《德米安》的核心问题就是人生的“蛋壳”，黑塞让我们看到，当我们来到这个世界的时候等待我们的并不是白纸，而是一个茧壳，告诉我们什么事情该如何做，给了我们人生一个底板，由于我们出生于这个底板，因此我们并不完全自由，你人生的选择有可能只是一个先入为主的答案<br>当你诞生到这个世界，这个世界已经预先为你准备了一整套社会规训，可能是经验，也可能是谎言。</p><blockquote><p>那个所谓的“合规世界”，其实只是整个世界的其中一半，你试图欺骗自己，隐瞒另一半世界的存在。哪一半呢？那些本来合理，但却被定义为“不合规”的部分。</p></blockquote><blockquote><p>那些日子过得太懒散的人，无法独立思考的人，无法成为自身仲裁者的人，他们就只懂得顺从“禁忌”的表面内容，照本宣科，得过且过。对于这类人而言，这样过日子是很容易的。</p></blockquote><p>只有打破这个茧壳，我们才能得到自由。</p><p>因此《德米安》这本书讲述了一个蛋壳里的人生，和打破蛋壳的努力</p><p>想要打破束缚自己的“蛋壳”，第一步就是意识到生活中那些让你不安与痛苦的矛盾。</p><blockquote><p>“一齐列队行进，因此才被压抑而至温顺。”——拜伦《我从未爱过这世界》</p></blockquote><blockquote><p>“假如一间铁屋子，是绝无窗户而万难破毁的，里面有许多熟睡的人们，不久都要闷死了，然而是从昏睡入死灭，并不感到就死的悲哀。“——鲁迅《呐喊》</p></blockquote><p>只有能感到痛，才会产生疑问与反思</p><p>质疑之后便是抗拒和叛逆</p><p>就像夏瑜对封建王朝的质疑，四处的游说<br>雷雨中繁漪对喝药的拒绝<br>德米安中辛克莱青春期的叛逆</p><p>抗拒就一定能够成功吗？显然不是，繁漪最终还是喝下了那碗药</p><p>因此我们需要第四步：重构自我<br>如果你只会批判，却无法提出新的理解与构建，那你只是在发泄情绪，而没有真正成长。</p><h2 id="强盗"><a href="#强盗" class="headerlink" title="强盗"></a>强盗</h2><p>回到《德米安》，辛克莱已经走到了第三步，进入了青春叛逆期，<br>叛逆就是从他人控制的人生得到一个属于自己的人生，追求一个自己愿意追求的自我<br>当一个孩子叛逆，想要破壳的时候，是人生当中最需要帮助的时刻，因为他能成长成为更符合自己愿望，更符合自己内驱力的人<br>这个时期的孩子会陷入一种自我矛盾，一边想反抗，一边认为老师家长是对的</p><blockquote><p>我心里很清楚，大家肯定不可能喜欢这样的我，因此，我也完全不喜欢这样的自己。</p></blockquote><p>有些人会慢慢反抗，放弃，也有第二种情况，<strong>无效叛逆</strong>，沦落为愤青，在今天也被称为杠精，其实并没有真正辩证的思维能力</p><blockquote><p>“我也逐渐习惯于以轻蔑的态度来看待自已身边的同龄人们，认为他们不过是一帮小孩子罢了。</p></blockquote><p>有效的叛逆是通过怀疑否定，最后建设出自己的观点和见解，但很多人停留在了第三步，只学会了质疑</p><p>当然还有第三种情况，走向堕落</p><blockquote><p>我堕落的速度是如此之快，简直令人难以想象。第一次醉酒之后，很快就不止这一次了。在我们学校里有很多喜欢打架斗殴的家伙，有很多喜欢四处恶作剧的家伙，于是，我成了这些家伙们当中年纪最小的那个。转眼之间，我已不再是那个沉默寡言的小人物，我成了惹麻烦的领袖、招人怨的新星，成了远近闻名的危险酒鬼，成了臭名昭彰的酒馆常客。我再一次完全陷入了黑暗世界之中，再一次将已身献给了魔鬼。</p></blockquote><p>他一面用堕落的方式来嘲笑这个世界来对抗那些压制他的力量，另一方面他也并不能够做到真正地赞赏自己、认可自己</p><blockquote><p>那还用说，我这个人内里本来就是这副德行！我啊，碌碌无为，四处游荡，桀骜不驯，藐视世界！我啊，目中无人，心高气傲，自以为是，其实只懂得用德米安的方式来思考！我这个人，外在也无非是这副德行：一个无用且无聊的人，一个肮脏又丑陋的人，醉得一塌糊涂，吐得乱七八糟，恶心到令人作呕，卑鄙得令人发指，一头未开化的粗暴孽畜，轻而易举地就会被令人憎恶的冲动所淹没!</p></blockquote><p>“在经历过这些迷失与歧路之后，辛克莱终于开始意识到，真正的成长不是破坏，而是重建。”</p><blockquote><p>“鸟奋争出壳，蛋就是世界。谁若要诞生就必须毁掉世界。”</p></blockquote><blockquote><p>“它半个身子困在一个黑暗的球体中，一片湛蓝的天空下，它仿佛正从巨大的球体中奋争而出。“</p></blockquote><blockquote><p>“与世界为敌，这是我独有的抗争方式，我要在这个过程中彻底的毁掉自己。“</p></blockquote><blockquote><p>童年变成了废墟，但幻灭感同时袭来。</p></blockquote><p>如果需要看自己湛蓝的天空，那你就需要重构自我</p><h2 id="自我重构的三个阶段"><a href="#自我重构的三个阶段" class="headerlink" title="自我重构的三个阶段"></a>自我重构的三个阶段</h2><h3 id="贝亚特丽齐"><a href="#贝亚特丽齐" class="headerlink" title="贝亚特丽齐"></a>贝亚特丽齐</h3><p>贝亚特丽齐是但丁神曲中的一个人物，中世纪对感情非常苛刻，于是但丁对贝亚特丽齐进行了精神上的恋爱，视其为光明的灯塔</p><p>辛克莱就对这个姑娘进行了精神恋爱，为了心中的贝亚特丽齐，他决定要好好做人<br>但他只是把感情升华了，但并没有走出规训，在潜意识依然存在规训</p><p>辛克莱做了一个梦，梦见德米安逼迫他吃下家族的徽章</p><blockquote><p>“它充满我的身体，开始咀噬我。“</p></blockquote><p>他意识到了自己仍然没有摆脱规训</p><blockquote><p>“贝雅特丽齐已渐渐黯淡，或许她已远离我，不断靠近地平线，变得模糊、遥远、苍白。她不再充满我的灵魂。“</p></blockquote><p>他发现了要重构自我必须要对自我进行重新的解释<br>我们有情欲，但情欲真的是罪吗？</p><p>在贝亚特丽齐的形象逐渐暗淡后，辛克莱开始寻求更深层的心灵导师。</p><h3 id="皮斯托留斯"><a href="#皮斯托留斯" class="headerlink" title="皮斯托留斯"></a>皮斯托留斯</h3><blockquote><p>“鸟飞向神，神叫做阿布拉克萨斯。“</p></blockquote><blockquote><p>“我们可以把它看作某种符号，象征神性与魔鬼结为一体。“</p></blockquote><p>辛克莱意识到人就是善恶结合体</p><blockquote><p>“它是最神圣的和最卑劣的交织一处，沉重的负疚在温柔的无辜中站立，这就是我的爱之梦，这就是阿布拉克萨斯。“</p></blockquote><p>人是在善恶间循环，螺旋上升的<br>因此人的成长需要一个领路人来印证自己的观点</p><p>辛克莱遇到了皮斯托留斯<br>他告诉了辛克莱，人性包含一切</p><blockquote><p>“您不必去驱逐它，或以道德束缚去加害它。”</p></blockquote><blockquote><p>“他轻柔而持续地捶打着我内心的某一部分，帮助我成型，冲破束缚，打碎蛋壳。”</p></blockquote><blockquote><p>“在走向自我的道路上更进一步。”</p></blockquote><p>但皮斯托留斯的教导终究止步于理论</p><blockquote><p>”他给予我的，正是他无法给予他自已的。“</p></blockquote><p>他未能活出自己所说的信念。这时，一个真正‘知行合一’的人出现在辛克莱的生命中</p><h3 id="夏娃夫人"><a href="#夏娃夫人" class="headerlink" title="夏娃夫人"></a>夏娃夫人</h3><p>一个知行合一的结果</p><blockquote><p>”自我是不被定义的。“</p></blockquote><p>任何人都是一样的，有自己的智慧支出也有自己的愚昧之处</p><p>她说人群中有两类人，有记号的和没有记号的</p><p>如果你能打破旧的秩序建立新的秩序，你就可以拥有自己的记号了，不被别人标签</p><p>她认为我们没有固定的自我，我们对自我的建设一直在路上</p><p>她说什么是爱</p><blockquote><p>“爱是内心坚定的力量，有了这种力量，人就无需去吸引爱，爱会前来。”</p></blockquote><blockquote><p>“大多数人的爱都只为失去自我。”</p></blockquote><p>她说什么是强大<br>可以理解这个世界，即使是世界上最不可思议的事情<br>我们能够看到这些非议背后的事情，他们的角度和我不同，我可以理解<br>如果是恶意的攻击，则说明这是他自我的一个缺陷，或人生中的苦涩，让他以攻击别人获得价值的获得感</p><h2 id="结尾的开端"><a href="#结尾的开端" class="headerlink" title="结尾的开端"></a>结尾的开端</h2><p>正如个人要挣脱内心的茧壳，整个时代也在通过战争挣扎着破壳而出。</p><blockquote><p>“血腥的事业是人类内在的爆发，分裂灵魂的爆发。人们去仇恨、去杀戮、去毁灭、去赴死，只是为了新生。一只巨鸟奋争出壳，蛋就是世界，而这个世界必将化为乌有。”</p></blockquote><p>真正成熟的自我也就基本诞生了</p><blockquote><p>假如你想呼唤我，你必须倾听你心底的声音，我就在你心里。</p></blockquote><p>辛克莱与德米安终于合二为一了</p>]]></content>
    
    
    <categories>
      
      <category>阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
      <tag>心理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>书记：《我的情绪为何总被他人左右》</title>
    <link href="/posts/1613527905/"/>
    <url>/posts/1613527905/</url>
    
    <content type="html"><![CDATA[<h1 id="书记：《我的情绪为何总被他人左右》"><a href="#书记：《我的情绪为何总被他人左右》" class="headerlink" title="书记：《我的情绪为何总被他人左右》"></a>书记：《我的情绪为何总被他人左右》</h1><p>近来也是被某些生活琐事影响心神了，于是求助于网络，偶得一书，观之甚为实用，因此做些总结。</p><p>这本书其实是一本教程+实践案例，他的目的只有一个，那就是<strong>让你某些过激的或者不好的情绪像打太极一样化解掉，而不是压抑在心理或者随之爆发</strong>。</p><p>为了让大家知道那些属于过激反应，作者也进行了一些列举，比如过分的烦躁、担心、生气、防备、抑郁、无精打采、愧疚等等……</p><p>要掌握化解情绪的方法，首先要知道作者自创的ABC模型：</p><ul><li>A：诱发性事件，就是你平时遇到的让你不高兴的事情。</li><li>B：信念，就是你对A的看法，评价，解释等等等。</li><li>C：反应，你对A的感受。</li></ul><p>想要化解掉这些情绪，你要知道这些情绪来自于谁，A还是B</p><blockquote><p>这里你应该知道，一切情绪的产生皆是因你而起，因此，情绪来源于B，也就是你对A的看法，而不是直接来源于A本身</p></blockquote><p>到这里，第一步就完成了</p><h4 id="你认识到了ABC的关系，认识到自己产生了什么样的负面情绪"><a href="#你认识到了ABC的关系，认识到自己产生了什么样的负面情绪" class="headerlink" title="你认识到了ABC的关系，认识到自己产生了什么样的负面情绪"></a>你认识到了ABC的关系，<strong>认识到自己产生了什么样的负面情绪</strong></h4><blockquote><p>比如：你对象没回你消息，你认为人家不在乎你，结果你产生了生气烦躁的情绪</p></blockquote><p>可以看出，是 B 让你导致的生气了烦躁</p><p>这里作者列举三种典型的非理性信念</p><ol><li>灾难化思维<br> 如果我说话冷场，所有人都会嘲笑我，我再也不敢社交了~~</li><li>绝对化信条<br> 你必须听我的，否则就是你对我的不信任……</li><li>合理化借口<br> 就是自我逃避，比如你对象把你绿了，然后你还在找借口“她只是和朋友简单出去玩玩~~ （什么贵南）</li></ol><p>我们现在要做的就是</p><h4 id="第二步：找找你的B（你对A的看法）中有没有这些思维"><a href="#第二步：找找你的B（你对A的看法）中有没有这些思维" class="headerlink" title="第二步：找找你的B（你对A的看法）中有没有这些思维"></a>第二步：找找你的B（你对A的看法）中有没有这些思维</h4><p>然后尝试去拆穿他。</p><blockquote><p>比如你在进行合理化思维：我不努力是因为反正没希望<br>你可以这样做：我可以试一试，哪怕小进步也是好的。</p></blockquote><p>接下来作者又列举了一堆非理性信条(<strong>重点在于你要知道你哪些非理性信条是负面的</strong>)</p><ol><li>我太在乎别人怎么看我</li><li>我绝不能失败</li><li>人和事应该按我希望的方式进行</li><li>我要为坏结果找人发火</li><li>把预期焦虑当做真实体验</li><li>完美主义，只要找到完美方法我再做事情</li><li>逃避困境和责任比面对它们要容易得多</li><li>若即若离的态度能让我永远开心</li><li>我现在的感觉和行为完全由过去决定</li><li>坏人坏事不该存在，存在就让我无法接受</li></ol><p>OK、现在已经完成前两步了，回顾一下：<br>首先你已经<strong>知道了哪些是不恰当的情绪和行为</strong>，过度烦躁、愤怒、抑郁、内疚……上文提到了<br>然后你已经找到了<strong>你存在哪些非理性的想法</strong></p><h4 id="第三步：我们要学会对抗和质疑这些不良想法"><a href="#第三步：我们要学会对抗和质疑这些不良想法" class="headerlink" title="第三步：我们要学会对抗和质疑这些不良想法"></a>第三步：我们要学会<strong>对抗和质疑这些不良想法</strong></h4><p>下面也是作者举的例子……</p><ol><li><p><strong>“我是不是非得……不可？”</strong>（挑战绝对化要求）</p></li><li><p><strong>“我必须……吗？”</strong>（质疑强制性思维）</p></li><li><p><strong>“我应该……吗？”</strong>（检验”应该”的合理性）</p></li><li><p><strong>“我非要他……不可吗？”</strong>（挑战对他人的不合理期待）</p></li><li><p><strong>“他们就该……吗？”</strong>（质疑他人行为的”必须性”</p></li><li><p><strong>“为什么我必须或他们必须……呢？”</strong>（寻找逻辑依据）</p></li><li><p><strong>“被拒绝&#x2F;失败&#x2F;不公正待遇真的那么糟糕、可怕吗？”</strong>（评估灾难化思维）</p></li><li><p><strong>“为什么有人应该受到责备和攻击？”</strong>（挑战归罪思维）</p></li><li><p><strong>“我必须被爱和尊重，还是我只是希望如此？”</strong>（区分需求与强制要求）</p></li><li><p><strong>“我必须永远不失败，还是仅仅希望成功？”</strong>（接受现实可能性）</p></li><li><p><strong>“我必须永远不受不公正待遇，还是更希望公平对待？”</strong>（调整不合理的期待）</p></li></ol><h4 id="第四步：用”更佳之选“来代替非理性思维"><a href="#第四步：用”更佳之选“来代替非理性思维" class="headerlink" title="第四步：用”更佳之选“来代替非理性思维"></a><strong>第四步：用”更佳之选“来代替非理性思维</strong></h4><p>问问自己：我能用何种更健康、更理性的想法来替代之前的非理性思考方式？</p><p><strong>注意：第三步和第四步不是说说如何如何就能理解的，书中作者举出了大量的示例作为基础</strong></p><h5 id="这里我们简单举一个书中的例子进行理解："><a href="#这里我们简单举一个书中的例子进行理解：" class="headerlink" title="这里我们简单举一个书中的例子进行理解："></a>这里我们简单举一个<strong>书中</strong>的例子进行理解：</h5><p>比如你单身，不擅长谈恋爱，然后在某个聚会上看到了一个有魅力，有趣的人</p><p>步骤一：<strong>你要发现自己的不良情绪</strong><br>你发现自己现在很焦虑，避开了对视。</p><p>步骤二：<strong>我有哪些非理性的思考方式导致我产生了这些不良情绪</strong></p><p>情绪a（对自己）：<br>万一我自讨没趣怎么办？万一我瞠目结舌让自己看上去像个弱智怎么办？我就是个怂比</p><p>情绪b（对他人）：<br>万一她已名花有主了呢？万一她认为我是骚扰她怎么办？万一她在这儿已看上了别人怎么办？</p><p>情绪c（对这个情景）：<br>这种‘撒网钓鱼’太肤浅了！你怎么可能在这里真正了解一个人呢？欺骗性太大了！我讨厌这样！也许，我只能在工作上认识一些人，或通过朋友介绍。我就是没那本事。</p><p>步骤三：<strong>反制自己的非理性思考方式</strong><br>谈恋爱就非得精于此道不可吗？她非得喜欢我不可吗？假如这个人对我不感兴趣，难道我就真的很失败吗？假如她已名花有主，或对除我之外的别人感兴趣，我能应对吗？即使这个鸡尾酒会很肤浅，难道我就不应该让别人认识我？</p><p>步骤四：<strong>让更好的选择代替这种思考方式</strong><br>我想要她认识我，对我感兴趣，我想要了解她，跟她聊聊。<br>如果她愿意，那很好。<br>如果她不愿意，那就拉倒，这又不是啥大事。<br>即使这个聚会可能很肤浅，但并不意味着我肤浅，也并不意味着我就不能约她，被拒绝又不会世界末日。</p><p>成功更好，失败又怎么样，反正之前也不认识你（乐<br>当然如果你真的不敢，就别强迫了，等多练练再出手吧</p><p>以上，是对这本书的基本概括…（心虚），想要了解更多细节，还是建议阅读原著( •̀ ω •́ )✧</p>]]></content>
    
    
    <categories>
      
      <category>阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
      <tag>心理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>设备变迁记录</title>
    <link href="/posts/3292858592/"/>
    <url>/posts/3292858592/</url>
    
    <content type="html"><![CDATA[<p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/%E5%AE%BF%E8%88%8D/1.jpg" alt="第一年"><br>2023年11月4号中午，那时候只有个笔记本和pdd键盘，那时候还只知道照着视频敲代码，打游戏，无脑瞎学<br><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/%E5%AE%BF%E8%88%8D/2.jpg" alt="第二年"><br>2024年4月27号中午，之前买了个小屏幕，后来突发奇想横着放，于是就成了这样，记得这段时间在学校工作室做做项目，和同学聊聊天，学到了挺多，也很充实，经常敲代码敲到一两点<br><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/%E5%AE%BF%E8%88%8D/3.jpg" alt="第二年下半年"><br>2025年4月18日18:02:03，现在什么都有了，却没有当时刚获得的快乐了<br>喜欢待在宿舍学习，看电子书或者上上网，偶尔和以前的朋友打打游戏、开开麦互相调侃，大家都挺忙，在一起的时间越来越少了，迷茫焦虑应该是我当前的状态（才大二啊兄弟）</p><p>目前在学基础学科，技术栈还停留在Python，Vue，Spring等等等网站开发相关的东西，网站随便写写就能搭起来，但又有谁会看呢（）<br>现在还是做自己想做的事情吧，鬼知道毕业后计算机行业会成啥样</p><p>想没脑子的看书、听音乐、出去走走、拍拍照、和朋友出去旅游、吃好吃的</p><p>哎，想回小学重新上（）</p><p>以上</p><p>快五一了，收拾收拾宿舍，整理一下心情</p><p><strong>“我们仍在旅途之中”</strong></p>]]></content>
    
    
    <categories>
      
      <category>记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>记录</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>省略</title>
    <link href="/posts/4256661195/"/>
    <url>/posts/4256661195/</url>
    
    <content type="html"><![CDATA[<h2 id="词法省略"><a href="#词法省略" class="headerlink" title="词法省略"></a>词法省略</h2><h3 id="一、省略冠词"><a href="#一、省略冠词" class="headerlink" title="一、省略冠词"></a>一、<strong>省略冠词</strong></h3><h4 id="可以省略的情况："><a href="#可以省略的情况：" class="headerlink" title="可以省略的情况："></a>可以省略的情况：</h4><ol><li><strong>表示独一无二的职位或身份</strong></li></ol><ul><li><p>The rabbit was appointed <font color="#bfbfbf">the</font> chairman of the Carrotown Committee.<br>  兔子被任命为胡萝城委员会主席。</p></li><li><p>The wolf served as <font color="#bfbfbf">the</font> head of our team.<br>  狼是我们组的队长。</p></li></ul><ol start="2"><li><strong>并列结构中重复冠词可省略</strong></li></ol><ul><li><p>Both the rabbit and <font color="#bfbfbf">the</font> wolf will be invited to the party.<br>  兔子和狼都会被邀请参加聚会。</p></li><li><p>Is this bunny a boy or <font color="#bfbfbf">a</font> girl?<br>  这只小兔子是男孩还是女孩？</p></li></ul><h4 id="❗-不可省略的情况："><a href="#❗-不可省略的情况：" class="headerlink" title="❗ 不可省略的情况："></a>❗ 不可省略的情况：</h4><blockquote><p>当省略冠词会造成<strong>歧义</strong>或<strong>语义混淆</strong>时，<strong>不能省略</strong></p></blockquote><ul><li><p>✅ a teacher and a video creator（是两个不同的身份）</p></li><li><p>❌ a teacher and video creator（可能被理解为一个人同时是“教学视频创作者”）</p></li></ul><hr><h3 id="二、省略介词"><a href="#二、省略介词" class="headerlink" title="二、省略介词"></a>二、省略介词</h3><h4 id="某些独立主格结构"><a href="#某些独立主格结构" class="headerlink" title="某些独立主格结构"></a>某些独立主格结构</h4><p>独立主格结构中，有时可以省略“with + 冠词 + 名词”结构</p><ul><li>The rabbit came in, <strong>carrot in hand</strong>.<br>  兔子进来了，手里拿着一根胡萝卜。<br>  （&#x3D; The rabbit came in, <strong>with a carrot in his hand</strong>.）</li></ul><h4 id="时间介词"><a href="#时间介词" class="headerlink" title="时间介词"></a>时间介词</h4><p>I ate 10 carrots <font color="#bfbfbf">on</font> that day.<br>我那天吃了10根胡萝卜.<br>I worked <font color="#bfbfbf">for</font> 60 hours <font color="#bfbfbf">in</font> last week.<br>我上周工作了60小时.</p><h4 id="做某事"><a href="#做某事" class="headerlink" title="做某事"></a>做某事</h4><p>相等于动名词转换为现在分词<br>I am busy <font color="#bfbfbf">in</font> making videos.<br>我正忙着做视频.<br>There’s no use <font color="#bfbfbf">in</font> crying over spilled milk.<br>覆水难收</p><h3 id="三、省略动词不定式"><a href="#三、省略动词不定式" class="headerlink" title="三、省略动词不定式"></a>三、省略动词不定式</h3><h4 id="1-并列关系中省略不定式"><a href="#1-并列关系中省略不定式" class="headerlink" title="1. 并列关系中省略不定式"></a>1. <strong>并列关系中省略不定式</strong></h4><p>当<strong>多个不定式并列</strong>，为了避免重复，可以在第二个及之后的不定式中<strong>省略 to</strong>。</p><ul><li><p>He wanted <strong>to stay here and read</strong>.<br>  他想<strong>待在这里并阅读</strong>。<br>  ✅ 第二个动词 <code>read</code> 省略了 <code>to</code>。</p></li><li><p>The rabbit decided <strong>to go out and play</strong>.<br>  兔子决定<strong>出去玩</strong>。<br>  ✅ <code>play</code> 省略了 <code>to</code>。</p></li></ul><hr><h4 id="2-不定式中的-Bare-Infinitive（裸不定式）"><a href="#2-不定式中的-Bare-Infinitive（裸不定式）" class="headerlink" title="2. 不定式中的 Bare Infinitive（裸不定式）"></a>2. <strong>不定式中的 Bare Infinitive（裸不定式）</strong></h4><p>某些结构后必须使用<strong>动词原形（不加 to）</strong>，即裸不定式。</p><h5 id="常见结构："><a href="#常见结构：" class="headerlink" title="常见结构："></a>常见结构：</h5><h6 id="✅-帮助类动词"><a href="#✅-帮助类动词" class="headerlink" title="✅ 帮助类动词"></a>✅ 帮助类动词</h6><ul><li>The wolf helped me <font color="#bfbfbf">to</font> eat the carrot.<br>  狼帮助我吃胡萝卜。<br>  👉 <code>help</code> 后的 <code>to</code> 可省略，也可保留（美式英语常省略）。</li></ul><h6 id="✅-使役动词（make-let-have）"><a href="#✅-使役动词（make-let-have）" class="headerlink" title="✅ 使役动词（make, let, have）"></a>✅ 使役动词（make, let, have）</h6><ul><li><p>The wolf made me <del>to</del> watch the video. ❌</p></li><li><p>✅ The wolf <strong>made me watch</strong> the video.<br>  狼让我看了那个视频。<br>  👉 <code>make</code> 后接宾语 + 动词原形。</p></li></ul><blockquote><p>⚠️ 注意：被动语态中则需使用 <strong>to 不定式</strong>：</p><ul><li>I was <strong>made to watch</strong> the video.<br>  我被要求看那个视频。</li></ul></blockquote><h3 id="四、省略从句引导词"><a href="#四、省略从句引导词" class="headerlink" title="四、省略从句引导词"></a>四、省略从句引导词</h3><p>[[代词#^ecf0ea|关系代词]]在从句中作宾语可以省略：<br>This is the rabbit <font color="#bfbfbf">that</font> we met yesterday.<br>这就是我们昨天见到那只兔子<br>The rabbit said <font color="#bfbfbf">that</font> the carrots were tasty.<br>兔子说胡萝卜很美味</p><h2 id="句法省略"><a href="#句法省略" class="headerlink" title="句法省略"></a>句法省略</h2><h3 id="简单句的省略"><a href="#简单句的省略" class="headerlink" title="简单句的省略"></a>简单句的省略</h3><h4 id="祈使句"><a href="#祈使句" class="headerlink" title="祈使句"></a>祈使句</h4><p><font color="#bfbfbf">You</font> open the door, please.<br>请打开门． (祈使句)</p><h4 id="感叹句"><a href="#感叹句" class="headerlink" title="感叹句"></a>感叹句</h4><p>What a smart rabbit <font color="#bfbfbf">he is</font>!<br>多聪明的一只兔子啊！</p><h4 id="口语表达"><a href="#口语表达" class="headerlink" title="口语表达"></a>口语表达</h4><h5 id="一、问答句（省略结构常见）"><a href="#一、问答句（省略结构常见）" class="headerlink" title="一、问答句（省略结构常见）"></a>一、问答句（省略结构常见）</h5><h5 id="✅-问：“你吃了什么？”"><a href="#✅-问：“你吃了什么？”" class="headerlink" title="✅ 问：“你吃了什么？”"></a>✅ 问：“你吃了什么？”</h5><ul><li><p><strong>What did you eat?</strong><br>  你吃了什么？</p></li><li><p><strong>(I ate)</strong> a carrot.<br>  （我吃了）一根胡萝卜。<br>  👉 主语和谓语 <strong>可省略</strong>，口语中常直接回答重点内容。</p></li></ul><hr><h5 id="✅-问：“谁吃了胡萝卜？”"><a href="#✅-问：“谁吃了胡萝卜？”" class="headerlink" title="✅ 问：“谁吃了胡萝卜？”"></a>✅ 问：“谁吃了胡萝卜？”</h5><ul><li><p><strong>Who ate the carrot?</strong><br>  谁吃了胡萝卜？</p></li><li><p><strong>The rabbit</strong> <em>(ate the carrot).</em><br>  兔子（吃了胡萝卜）。<br>  👉 可省略重复部分，直接答主语。</p></li></ul><hr><h5 id="二、主语补语（表语句）"><a href="#二、主语补语（表语句）" class="headerlink" title="二、主语补语（表语句）"></a>二、主语补语（表语句）</h5><h6 id="✅-问：“谁是兔老爹？”"><a href="#✅-问：“谁是兔老爹？”" class="headerlink" title="✅ 问：“谁是兔老爹？”"></a>✅ 问：“谁是兔老爹？”</h6><ul><li><p><strong>Who is Papa Rabbit?</strong><br>  哪位是兔老爹？</p></li><li><p><strong>I am Papa Rabbit.</strong><br>  我就是兔老爹。<br>  👉 表达 “我就是”的意思，结构为：<strong>I am + 表语</strong></p></li></ul><hr><h5 id="三、情态表达"><a href="#三、情态表达" class="headerlink" title="三、情态表达"></a>三、情态表达</h5><h6 id="✅-提议与回答"><a href="#✅-提议与回答" class="headerlink" title="✅ 提议与回答"></a>✅ 提议与回答</h6><ul><li><p><strong>Would you like to eat a carrot?</strong><br>  你想吃根胡萝卜吗？</p></li><li><p><strong>Yes, I’d like to eat a carrot.</strong><br>  是的，我想（吃一根胡萝卜）。<br>  👉 “Would you like to…” 是 <strong>礼貌询问</strong>常用句型。</p></li></ul><h3 id="并列句的省略"><a href="#并列句的省略" class="headerlink" title="并列句的省略"></a>并列句的省略</h3><p>The rabbit went home after work, and  <font color="#bfbfbf">the rabbit</font> ate a carrot.<br>兔子下班后回家,然后(他)吃了一根胡萝卜.<br>The rabbit has eaten a carrot, but the wolf hasn’t <font color="#bfbfbf">eaten a carrot</font>.<br>兔子吃了一根胡萝卜，但狼没(吃一根胡萝卜).<br>The story made the rabbit happy, but <font color="#bfbfbf">the story made</font> the wolf sad.<br>这故事让兔子高兴，让狼悲伤.<br> The rabbit likes carrots and the wolf <font color="#bfbfbf">apples</font>.<br>兔子爱吃胡萝卜,狼(爱吃)苹果.</p><h3 id="复杂句的省略"><a href="#复杂句的省略" class="headerlink" title="复杂句的省略"></a>复杂句的省略</h3><h4 id="从句"><a href="#从句" class="headerlink" title="从句"></a>从句</h4><p>The rabbit will eat the carrot, but I don’t know <font color="#bfbfbf">when he will eat it.</font><br>兔子要吃这胡萝卜，但我不知道啥时候(他吃它)． (包含宾语从句)<br>When<font color="#bfbfbf"> the rabbit</font> <font color="#bfbfbf">was</font> young, the rabbit went to school every day.<br>当(他)小的时候,兔子每天上学<br>If<font color="#bfbfbf"> it is</font> possible, I’ll be there on time.<br>如果可能,我将按时到那。 (包含条件状语从句)<br>I can eat more carrots than you<font color="#bfbfbf"> can eat carrots</font>.<br>我能吃胡萝卜比你多． (包含比较状语从句)<br>You are smarter than I <font color="#bfbfbf">am smart</font>.<br>你比我聪明.</p><h4 id="主句"><a href="#主句" class="headerlink" title="主句"></a>主句</h4><p><font color="#bfbfbf">I am</font> sorry to hear that.</p><ul><li>Shall I give you a thumbs-up?</li><li>If you’d like <font color="#bfbfbf">you can give me a thumbs-up</font>.</li></ul>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/句子</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>强调</title>
    <link href="/posts/1731632451/"/>
    <url>/posts/1731632451/</url>
    
    <content type="html"><![CDATA[<h2 id="“口气”"><a href="#“口气”" class="headerlink" title="“口气”"></a>“口气”</h2><ol><li>重度强调部分</li><li>感叹词<br> Wow<br> Oh my god<br> Bloody hell</li><li>标点符号，粗体斜体大小写</li></ol><h2 id="书面格式"><a href="#书面格式" class="headerlink" title="书面格式"></a>书面格式</h2><h3 id="really"><a href="#really" class="headerlink" title="really"></a>really</h3><blockquote><p>adv. 实在；真正地；事实上<br><strong>用法</strong>：强调真实性或强烈程度</p></blockquote><ul><li>例句：Rabbits <strong>really</strong> like carrots.<br>  兔子<strong>真的</strong>喜欢胡萝卜。</li></ul><hr><h3 id="very"><a href="#very" class="headerlink" title="very"></a>very</h3><blockquote><p>adv. 很；非常<br>adj. 恰好的；最……的<br><strong>用法</strong>：强调程度或表示“恰好、最”</p></blockquote><ul><li><p>例句1：I eat <strong>very, very, very</strong> fast.<br>  我吃东西<strong>非常非常非常</strong>快。</p></li><li><p>例句2：I missed the <strong>very</strong> beginning of the movie.<br>  我错过了电影<strong>最开始的部分</strong>。</p></li></ul><hr><h3 id="just"><a href="#just" class="headerlink" title="just"></a>just</h3><blockquote><p>adv. 刚才；正好；简直<br><strong>用法</strong>：强调时间、程度或准确性</p></blockquote><ul><li>例句：This is <strong>just</strong> unbelievable.<br>  这<strong>简直</strong>难以置信。</li></ul><hr><h3 id="ever"><a href="#ever" class="headerlink" title="ever"></a>ever</h3><blockquote><p>adv. 曾经；无论何时<br><strong>用法</strong>：强调“曾经”发生过，常用于疑问句、否定句或强调句中</p></blockquote><ul><li>例句：All I <strong>ever</strong> wanted is that carrot.<br>  我<strong>一直以来</strong>想要的就是那根胡萝卜。</li></ul><hr><h3 id="句子补充"><a href="#句子补充" class="headerlink" title="句子补充"></a>句子补充</h3><p><strong>What in the world are you talking about?</strong><br>你<strong>到底</strong>在说什么？</p><ul><li>the hell tm</li><li>the f***</li><li>“in the world” 是加强语气的表达，相当于 “到底”、“究竟”，用于表达困惑或惊讶。</li></ul><h2 id="词汇强调"><a href="#词汇强调" class="headerlink" title="词汇强调"></a>词汇强调</h2><h3 id="1-重复词语"><a href="#1-重复词语" class="headerlink" title="1. 重复词语"></a>1. 重复词语</h3><p>通过重复一个词来强调某个动作的持续性或强烈程度</p><ul><li><p>例句：He went on and on and on.<br>  他说个不停。</p></li><li><p>例句：He walked and walked and walked.<br>  他走个不停。</p></li></ul><hr><h3 id="2-助动词-do-does-did-的强调用法"><a href="#2-助动词-do-does-did-的强调用法" class="headerlink" title="2. 助动词 do &#x2F; does &#x2F; did 的强调用法"></a>2. 助动词 do &#x2F; does &#x2F; did 的强调用法</h3><p>在肯定句中使用助动词来加强语气（通常口语中常见）</p><ul><li>例句：I <strong>did</strong> give you a thumbs-up!<br>  我<strong>真的</strong>给你点过赞啦！</li></ul><hr><h3 id="3-强调代词-（myself-himself-yourself-等）"><a href="#3-强调代词-（myself-himself-yourself-等）" class="headerlink" title="3. 强调代词**（myself, himself, yourself 等）"></a>3. <strong>强调代词</strong>**（myself, himself, yourself 等）</h3><p>在句中加入强调代词，突出行为的执行者（并不改变句意）</p><ul><li><p>例句：I can do it <strong>myself</strong>!<br>  我<strong>自己</strong>能做！</p></li><li><p>例句：I <strong>myself</strong> went there!<br>  我<strong>本人</strong>去了那里！</p></li></ul><hr><h3 id="4-倒装句"><a href="#4-倒装句" class="headerlink" title="4. 倒装句"></a>4. 倒装句</h3><p>通过倒装结构突出强调某部分，常用于否定副词开头</p><ul><li><p>原句：I did not eat a single carrot yesterday.<br>  我昨天没有吃胡萝卜。</p></li><li><p>倒装：<strong>Not a single carrot did I eat yesterday.</strong><br>  我昨天连一根胡萝卜都没吃。（更强调“完全没有”）</p></li></ul><hr><h3 id="5-感叹句"><a href="#5-感叹句" class="headerlink" title="5. 感叹句"></a>5. 感叹句</h3><p>用感叹句表达强烈情感或惊叹</p><ul><li><p>陈述句：The carrot is big.<br>  这胡萝卜很大。</p></li><li><p>感叹句1：<strong>How big the carrot is!</strong><br>  这胡萝卜真大！</p></li><li><p>感叹句2：<strong>What a big carrot you’ve grown!</strong><br>  你种了好大一根胡萝卜！</p></li></ul><h2 id="句式强调"><a href="#句式强调" class="headerlink" title="句式强调"></a>句式强调</h2><h3 id="一、句型结构："><a href="#一、句型结构：" class="headerlink" title="一、句型结构："></a>一、句型结构：</h3><blockquote><p><strong>It is&#x2F;was + 被强调部分 + that&#x2F;who + 句子其他部分</strong></p></blockquote><p>该句型用于强调主语、宾语、状语等成分，但不改变句子的基本意思。</p><hr><h3 id="二、用法举例"><a href="#二、用法举例" class="headerlink" title="二、用法举例"></a>二、用法举例</h3><h4 id="1-强调主语"><a href="#1-强调主语" class="headerlink" title="1. 强调主语"></a>1. 强调主语</h4><p>原句：I met a lovely rabbit in the field this morning.<br>强调主语 →<br><strong>It was I that&#x2F;who met a lovely rabbit in the field this morning.</strong><br>是我今早在田野中遇见一只可爱的兔子。</p><hr><h4 id="2-强调宾语"><a href="#2-强调宾语" class="headerlink" title="2. 强调宾语"></a>2. 强调宾语</h4><p>原句：I met a lovely rabbit in the field this morning.<br>强调宾语 →<br><strong>It was a lovely rabbit that&#x2F;who I met in the field this morning.</strong><br>有一只可爱的兔子，我今早在田野中遇见了它。</p><hr><h4 id="3-强调地点状语"><a href="#3-强调地点状语" class="headerlink" title="3. 强调地点状语"></a>3. 强调地点状语</h4><p>原句：I met a lovely rabbit <strong>in the field</strong> this morning.<br>强调地点 →<br><strong>It was in the field that I met a lovely rabbit this morning.</strong><br>就是在田野中，我今早遇见一只可爱的兔子。</p><hr><h4 id="4-强调时间状语"><a href="#4-强调时间状语" class="headerlink" title="4. 强调时间状语"></a>4. 强调时间状语</h4><p>原句：I met a lovely rabbit in the field <strong>this morning</strong>.<br>强调时间 →<br><strong>It was this morning that I met a lovely rabbit in the field.</strong><br>就是今早，我在田野中遇见一只可爱的兔子。</p><hr><h4 id="5-强调主语（另一例）"><a href="#5-强调主语（另一例）" class="headerlink" title="5. 强调主语（另一例）"></a>5. 强调主语（另一例）</h4><p><strong>It is the rabbit that&#x2F;who will eat the carrot.</strong><br>是这只兔子将要吃胡萝卜。</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/句子</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>句子分类</title>
    <link href="/posts/2890357187/"/>
    <url>/posts/2890357187/</url>
    
    <content type="html"><![CDATA[<h2 id="陈述句"><a href="#陈述句" class="headerlink" title="陈述句"></a>陈述句</h2><h2 id="疑问句"><a href="#疑问句" class="headerlink" title="疑问句"></a>疑问句</h2><h3 id="一般疑问句"><a href="#一般疑问句" class="headerlink" title="一般疑问句"></a>一般疑问句</h3><p>Did the rabbit eat the carrot?<br>兔子吃这根胡萝卜了吗?</p><h3 id="特殊疑问句"><a href="#特殊疑问句" class="headerlink" title="特殊疑问句"></a>特殊疑问句</h3><p>What did the rabbit eat?<br>兔子吃了什么？</p><h3 id="选择疑问句"><a href="#选择疑问句" class="headerlink" title="选择疑问句"></a>选择疑问句</h3><p>Did the rabbit eat a carrot or an apple?<br>兔子吃过了胡萝卜还是苹果？</p><h3 id="反义疑问句"><a href="#反义疑问句" class="headerlink" title="反义疑问句"></a>反义疑问句</h3><p>The rabbit ate a carrot, didn’t he?<br>兔子吃了一个胡萝卜，不是吗？</p><h2 id="祈使句"><a href="#祈使句" class="headerlink" title="祈使句"></a>祈使句</h2><p>Eat the carrot!</p><h2 id="感叹句"><a href="#感叹句" class="headerlink" title="感叹句"></a>感叹句</h2><p>What a tasty carrot!<br>多么好吃的一根胡萝卜!</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/句子</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>倒装句</title>
    <link href="/posts/526240205/"/>
    <url>/posts/526240205/</url>
    
    <content type="html"><![CDATA[<h2 id="完全倒装-谓语动词完全在主语前"><a href="#完全倒装-谓语动词完全在主语前" class="headerlink" title="完全倒装(谓语动词完全在主语前)"></a>完全倒装(谓语动词完全在主语前)</h2><h3 id="副词-介词短语在句首的倒装"><a href="#副词-介词短语在句首的倒装" class="headerlink" title="副词&#x2F;介词短语在句首的倒装"></a>副词&#x2F;介词短语在句首的倒装</h3><h4 id="地点副词在句首的倒装-“here”-“there”"><a href="#地点副词在句首的倒装-“here”-“there”" class="headerlink" title="地点副词在句首的倒装(“here”; “there”..)"></a>地点副词在句首的倒装(“here”; “there”..)</h4><p>The last bus goes.<br>末班公共汽车开走了<br>There goes the last bus.<br>末班公共汽车开走了</p><h4 id="时间副词在句首的倒装-“in”-“out”-“up”-“down”-“away”"><a href="#时间副词在句首的倒装-“in”-“out”-“up”-“down”-“away”" class="headerlink" title="时间副词在句首的倒装(“in”; “out”; “up”; “down”; “away”.)"></a>时间副词在句首的倒装(“in”; “out”; “up”; “down”; “away”.)</h4><p>Now comes the wolf’s turn!<br>现在轮到大灰狼啦.</p><h4 id="表运动方向的副词在句首的倒装"><a href="#表运动方向的副词在句首的倒装" class="headerlink" title="表运动方向的副词在句首的倒装"></a>表运动方向的副词在句首的倒装</h4><p>Up went the carrots into the air.<br>胡萝卜飞向空中.</p><h4 id="介词短语在句首的倒装"><a href="#介词短语在句首的倒装" class="headerlink" title="介词短语在句首的倒装"></a>介词短语在句首的倒装</h4><p>At the table sat a rabbit<br>桌边上坐着一只兔子</p><h3 id="主语补语-表语-的倒装"><a href="#主语补语-表语-的倒装" class="headerlink" title="主语补语(表语)的倒装"></a>主语补语(表语)的倒装</h3><p>形容词(作表语)、分词、介词短语、’such” 在句首时需要完全倒装<br>Seated on the ground is a group of rabbits.<br>席地而坐的是一群兔子们<br>Such were the wolf’s tricks.<br>这就是大灰狼的把戏<br>English you must learn.<br>你得学英语.<br>This video you like.<br>你喜欢这个视频.</p><h2 id="部分倒装-仅助动词提前"><a href="#部分倒装-仅助动词提前" class="headerlink" title="部分倒装(仅助动词提前)"></a>部分倒装(仅助动词提前)</h2><h3 id="句首有否定意义词时的倒装"><a href="#句首有否定意义词时的倒装" class="headerlink" title="句首有否定意义词时的倒装"></a>句首有否定意义词时的倒装</h3><p>Never before have I eaten such a delicious carrot.<br>我以前从未吃过如此美味的胡萝卜.</p><h3 id="句首有”only”时的倒装"><a href="#句首有”only”时的倒装" class="headerlink" title="句首有”only”时的倒装"></a>句首有”only”时的倒装</h3><p>Only in this way <strong>can</strong> we grow delicious carrots.<br>只有用这种方法我们才能种出美味的胡萝卜.<br>Only then <strong>did</strong> the rabbit meet the wolf.<br>直到那时,兔子才遇见了狼</p><h3 id="“if…should…”构成虚拟语气的倒装"><a href="#“if…should…”构成虚拟语气的倒装" class="headerlink" title="“if…should…”构成虚拟语气的倒装"></a>“if…should…”构成虚拟语气的倒装</h3><p>If I should win the lottery, I would buy a huge pile of carrots.<br>如果我能赢得大奖,我就会买一大堆胡萝卜.<br>Should I win the lottery, I would buy a huge pile of carrots.<br>如果我能赢得大奖,我就会买一大堆胡萝卜.</p><h3 id="固定句型中的倒装"><a href="#固定句型中的倒装" class="headerlink" title="固定句型中的倒装"></a>固定句型中的倒装</h3><p>Rabbits love eating carrots; so do wolves.<br>兔子喜欢吃胡萝卜, 狼也是<br>I was afraid<br>So was I. ( &#x3D; I was afraid, too.)<br>我害怕.<br>我也是.<br>The rabbit can’t ride a bicycle;<br>neither&#x2F;nor can the wolf.<br>兔子不会骑自行车,狼也不会</p><h2 id="形式倒装-仅将强调内容提至句首；谓语动词不提前"><a href="#形式倒装-仅将强调内容提至句首；谓语动词不提前" class="headerlink" title="形式倒装(仅将强调内容提至句首；谓语动词不提前)"></a>形式倒装(仅将强调内容提至句首；谓语动词不提前)</h2><h3 id="感叹句中的倒装"><a href="#感叹句中的倒装" class="headerlink" title="感叹句中的倒装"></a>感叹句中的倒装</h3><p>What a delicious carrot it is!<br>多么美味的一根胡萝卜!</p><h3 id="比较级句型中的倒装-如”the-more…-the-more…"><a href="#比较级句型中的倒装-如”the-more…-the-more…" class="headerlink" title="比较级句型中的倒装(如”the more…,the more…)"></a>比较级句型中的倒装(如”the more…,the more…)</h3><p>The more carrots you eat, the healthier you become.<br>吃胡萝卜越多，你就越健康.</p><h3 id="“however”-”whatever”-引导让步状语从句时的倒装"><a href="#“however”-”whatever”-引导让步状语从句时的倒装" class="headerlink" title="“however”;”whatever”..引导让步状语从句时的倒装"></a>“however”;”whatever”..引导让步状语从句时的倒装</h3><p>However long this video is, you should watch it till the end.<br>不论这个视频多长,你都应该看完</p><h3 id="as”-”though”-引导让步状语从句时的倒装"><a href="#as”-”though”-引导让步状语从句时的倒装" class="headerlink" title="as”;”though”..引导让步状语从句时的倒装"></a>as”;”though”..引导让步状语从句时的倒装</h3><p>Much as he likes the carrot, he doesn’t want to eat it.<br>尽管他非常喜欢胡萝卜,但他不想吃它</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/句子</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>从句</title>
    <link href="/posts/3809001874/"/>
    <url>/posts/3809001874/</url>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><span style="background:rgba(5, 117, 197, 0.2)">I</span> <span style="background:rgba(240, 107, 5, 0.2)">saw</span> <span style="background:rgba(74, 82, 199, 0.2)">that the rabbit ate a carrot.</span><br><span style="background:rgba(5, 117, 197, 0.2)">我</span><span style="background:rgba(240, 107, 5, 0.2)">看见</span><span style="background:rgba(74, 82, 199, 0.2)">兔子吃了根胡萝卜</span><br><span style="background:rgba(74, 82, 199, 0.2)">宾语从句</span><br>整体被称为 [[英语语法综述#^cde9ae|复杂句]]</p><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a><del>分类</del></h3><h4 id="按-句子成分-剧情-分类"><a href="#按-句子成分-剧情-分类" class="headerlink" title="按 句子成分&#x2F;剧情 分类"></a><del>按 句子成分&#x2F;剧情 分类</del></h4><ul><li><del>主语从句</del></li><li><del>宾语从句</del></li><li><del>宾语补语从句</del></li><li><del>表语从句</del></li><li><del>定语从句，状语从句，同位语</del><br>  <del>定语从包，[[形容词]]从句，关系从句 含义相同</del></li></ul><h4 id="按-词类-分类"><a href="#按-词类-分类" class="headerlink" title="按 词类 分类"></a><del>按 词类 分类</del></h4><ul><li><del>主语从句</del></li><li><del>宾语从句</del></li><li><del>表语从句</del></li><li><del>宾语补语从句</del></li><li><del>同位语从句</del></li></ul><h2 id="英语从句分为三大类"><a href="#英语从句分为三大类" class="headerlink" title="英语从句分为三大类"></a><strong>英语从句分为三大类</strong></h2><h3 id="形容词-从句"><a href="#形容词-从句" class="headerlink" title="[[形容词]]从句"></a>[[形容词]]从句</h3><p>^dc938b</p><blockquote><p>由于在句中充当定语这个句子成分，因此被称为<strong>定语从句</strong>，也叫关系从句</p></blockquote><h4 id="关系代词引导的形容词从句"><a href="#关系代词引导的形容词从句" class="headerlink" title="关系代词引导的形容词从句"></a>关系代词引导的形容词从句</h4><p>a <span style="background:rgba(3, 135, 102, 0.2)">carrot</span> (<span style="background:rgba(240, 107, 5, 0.2)">that</span> I bought) （定语从句）<br>一根我买来的胡萝卜<br><span style="background:rgba(3, 135, 102, 0.2)">先行词</span> <span style="background:rgba(240, 107, 5, 0.2)">关系词</span> 是关系代词</p><p>that I bought<br>who ate a carrot<br>whom I saw yesterday<br>whose favorite food is carrot<br>which the teacher likes</p><p><strong>that vs. which</strong><br><span style="background:rgba(3, 135, 102, 0.2)">先行词</span>是唯一的，明确的：that<br>如：the largest carrot<br><span style="background:rgba(3, 135, 102, 0.2)">先行词</span>多选一：which<br>The rabbit ate a carrot <span style="background:rgba(240, 107, 5, 0.2)">which</span> I bought.<br>The rabbit ate a carrot <span style="background:rgba(240, 107, 5, 0.2)">that</span> I bought.</p><h4 id="关系-副词-引导的形容词从句"><a href="#关系-副词-引导的形容词从句" class="headerlink" title="关系[[副词]]引导的形容词从句"></a>关系[[副词]]引导的形容词从句</h4><p>但在“引导从句”时，它们<strong>不是在修饰前面的[[名词]]</strong>，而是用来<strong>引导定语从句，连接并补充说明那个名词</strong>！</p><p>This was the place <span style="background:rgba(240, 107, 5, 0.2)">where</span> the rabbit ate the carrot.<br>This is the reason <span style="background:rgba(240, 107, 5, 0.2)">why</span> the rabbit ate the carrot.<br>That was the day <span style="background:rgba(240, 107, 5, 0.2)">when</span> the rabbit ate the carrot for the first time.</p><blockquote><p>关系副词 &#x3D; [[介词]] + 关系代词which</p></blockquote><p>This was the place <span style="background:rgba(240, 107, 5, 0.2)">at which</span> the rabbit ate the carrot.<br>This is the  reason <span style="background:rgba(240, 107, 5, 0.2)">for which</span> the rabbit ate the carrot.<br>That was the day <span style="background:rgba(240, 107, 5, 0.2)">on which</span> the rabbit ate the carrot for the first time.</p><h4 id="限定性形容词从句"><a href="#限定性形容词从句" class="headerlink" title="限定性形容词从句"></a>限定性形容词从句</h4><p>The rabbit ate the carrot<span style="background:rgba(240, 107, 5, 0.2)"> which was on the table.</span><br>上从句先顶了carrot的范围&#x2F;性质</p><h4 id="非限定性形容词从句"><a href="#非限定性形容词从句" class="headerlink" title="非限定性形容词从句"></a>非限定性形容词从句</h4><p>The rabbit ate the carrot, <span style="background:rgba(240, 107, 5, 0.2)">which</span> was on the table.<br>The rabbit ate the carrot, <span style="background:rgba(240, 107, 5, 0.2)">the carrot</span> was on the table.<br>可以理解为说两次 the carrot 过于啰嗦，因此使用 which 代替，避免重复</p><h5 id="非限定性-形容词-从句作插入语"><a href="#非限定性-形容词-从句作插入语" class="headerlink" title="非限定性[[形容词]]从句作插入语"></a>非限定性[[形容词]]从句作插入语</h5><p>因为该从句有补充的特性<br>My head,<span style="background:rgba(240, 107, 5, 0.2)"> which is big</span>,is useful when it rains.<br>我有大头，下雨不愁</p><h5 id="非限定性形容词从句指代整句话"><a href="#非限定性形容词从句指代整句话" class="headerlink" title="非限定性形容词从句指代整句话"></a>非限定性形容词从句指代整句话</h5><p>The rabbit ate the carrot, which was not surprising.<br>兔子吃了胡萝卜，这事儿不令人吃惊</p><h5 id="限定性-vs-非限定性"><a href="#限定性-vs-非限定性" class="headerlink" title="限定性 vs.非限定性"></a>限定性 vs.非限定性</h5><p>I have a head  which is round.<br>我有一个头是圆的（其中一个头）<br>I have a head, which is round.<br>我有一个头，他是圆的</p><h3 id="名词从句"><a href="#名词从句" class="headerlink" title="名词从句"></a>名词从句</h3><h4 id="主语从句"><a href="#主语从句" class="headerlink" title="主语从句"></a>主语从句</h4><blockquote><p><span style="background:rgba(240, 107, 5, 0.2)">That the rabbit ate a carrot</span> is obvious.<br>兔子吃了胡萝这是明显的.</p></blockquote><p>Whether the rabbit ate the carrot is obvious.<br>Where the rabbit ate the carrot is obvious.<br>When the rabbit ate the carrot is obvious.<br>How the rabbit ate the carrot is obvious<br>Who ate the carrot is obvious.<br>What the rabbit ate is obvious.</p><p><strong>主语从句是要以引导词开头的</strong><br><strong>如果出现在在问句中，被叫做”疑问代词&#x2F;疑问副词”</strong><br><strong>这里用来引导从句，从句的引导词</strong></p><p>如果前面太长，就显得头重脚轻，因此我们使用 It 做形式主语<br>It is obvious <strong>that the rabbit ate a carrot.</strong><br><strong>注意：当谓语动词为suggest, demand, insist, order..时，从句中的动词应该使用不定式</strong><br><strong>这见个动词被动态也可以换成某些形容词，照样使用动词虚拟语气</strong></p><h4 id="宾语从句"><a href="#宾语从句" class="headerlink" title="宾语从句"></a>宾语从句</h4><blockquote><p>I saw that the rabbit ate a carrot.</p></blockquote><p>I saw whether the rabbit ate the carrot.<br>I saw who ate the carrot.<br>I saw what the rabbit ate.<br>I saw where the rabbit ate the carrot.<br>I saw when the rabbit ate the carrot.<br>I saw how he rabbit ate the carrot.<br><strong>注意：</strong><br><strong>1. 除了某些[[介词]]参与的情况，从句的引导词基本都在从句的开头</strong><br><strong>2. 不要看到whether, where, when, how,就以为看到了包含以为代词&#x2F;疑问副词的问句</strong></p><h5 id="引导词-that-的省略"><a href="#引导词-that-的省略" class="headerlink" title="引导词 that 的省略"></a>引导词 that 的省略</h5><p>I know <span style="background:rgba(240, 107, 5, 0.2)">the rabbit ate a carrot</span>.<br>注意：<strong>有些情况下，that引导词不能被省略</strong><br>I know, just like you do, <span style="background:rgba(240, 107, 5, 0.2)">that</span> the rabbit ate the carrot.</p><h5 id="某些词后的宾语从句的否定"><a href="#某些词后的宾语从句的否定" class="headerlink" title="某些词后的宾语从句的否定"></a>某些词后的宾语从句的否定</h5><blockquote><p>否定加在谓语动词前，而非从句中</p></blockquote><p>I <span style="background:rgba(74, 82, 199, 0.2)">don’t</span> think (that) the rabbit is smart.<br>I <span style="background:rgba(74, 82, 199, 0.2)">don’t</span> believe (that) you will give me some coins.<br>I <span style="background:rgba(74, 82, 199, 0.2)">don’t</span> expect (that) you will give this video a thumbs-up.</p><h5 id="主从时态一致"><a href="#主从时态一致" class="headerlink" title="主从时态一致"></a>主从时态一致</h5><p>I don’t think(that) you’re right.<br>I didn’t think (that) you were right.<br>从句如果是真理则用一般现在时</p><h5 id="be-形容词-that…（这个句型咱么无法定论）"><a href="#be-形容词-that…（这个句型咱么无法定论）" class="headerlink" title="be+形容词+that…（这个句型咱么无法定论）"></a>be+形容词+that…（这个句型咱么无法定论）</h5><p>I am sure that there’s a carrot on the table.<br>I am happy that there’s a carrot on the table.<br>I am afraid that there’s no carrot on the table.</p><h4 id="表语从句"><a href="#表语从句" class="headerlink" title="表语从句"></a>表语从句</h4><p>The problem is <span style="background:rgba(74, 82, 199, 0.2)">that</span> the rabbit is hungry.<br>The reason is <span style="background:rgba(74, 82, 199, 0.2)">that</span> there’s no more carrot.<br>The question is <span style="background:rgba(74, 82, 199, 0.2)">whether</span> the rabbit is hungry.<br>The question is <span style="background:rgba(74, 82, 199, 0.2)">what</span> the rabbit should eat.<br>The question is <span style="background:rgba(74, 82, 199, 0.2)">where&#x2F;when&#x2F;how</span> the rabbit should eat the carrot.</p><h5 id="主语从句-表语从句"><a href="#主语从句-表语从句" class="headerlink" title="主语从句-&gt;表语从句"></a>主语从句-&gt;表语从句</h5><p><span style="background:rgba(74, 82, 199, 0.2)">That the rabbit ate a carrot</span> is <span style="background:rgba(74, 82, 199, 0.2)">secret</span>.<br>The <span style="background:rgba(74, 82, 199, 0.2)">secret</span> is <span style="background:rgba(74, 82, 199, 0.2)">that the rabbit ate a carrot.</span></p><h5 id="系动词：非be动词"><a href="#系动词：非be动词" class="headerlink" title="系动词：非be动词"></a>系动词：非be动词</h5><p>It seems that the rabbit is hungry.<br>It feels that you’re not telling the truth<br>从句前面没有别的系动词（雾</p><h4 id="同位语从句"><a href="#同位语从句" class="headerlink" title="同位语从句"></a>同位语从句</h4><p>当一个从句充当同位语时，称之为同位语从句<br>常在句中修饰抽象的名词<br>The question <span style="background:rgba(74, 82, 199, 0.2)">whether the rabbit will eat the carrot</span> is on all our minds.<br>I have no idea who ate the carrot.</p><h4 id="宾语补语从句"><a href="#宾语补语从句" class="headerlink" title="宾语补语从句"></a>宾语补语从句</h4><p>You can call me what you like.<br>你可以叫我你想叫我的(称号)<br>My education made me who I am today<br>我的教育造就了我今天是的(这个人).</p><h3 id="副词从句（状语从句）"><a href="#副词从句（状语从句）" class="headerlink" title="副词从句（状语从句）"></a>副词从句（状语从句）</h3><p>^ac5efa</p><ol><li>表时间(如:在…·前)<ol><li><strong>在某一时间点之前</strong><br> 引导词：<strong>before</strong><br> The rabbit ate a carrot at home before the wolf stopped by.<br> 大灰狼串门之前，兔子吃了根胡萝卜<br> Before the wolf stopped by<font color="#ff0000">, </font>the rabbit ate a carrot at home.<br> 大灰狼串门之前，兔子吃了根胡萝 <font color="#ff0000">（从句在主句之前要加上逗号）</font></li><li><strong>在某个时间点“突然”</strong><br> 引导词：<strong>when</strong><br> The rabbit was eating a carrot <span style="background:rgba(5, 117, 197, 0.2)">when</span> I reached home.<br> 我到家的时候,兔子在吃胡萝卜</li><li><strong>时间段</strong><br> 引导词：<strong>while</strong><br> The rabbit was eating a carrot <span style="background:rgba(5, 117, 197, 0.2)">while</span> I was making a video.<br> 我做视频的过程中,兔子在吃胡萝卜</li><li><strong>同时</strong><br> 引导词：<strong>as</strong><br> I ate a carrot <span style="background:rgba(5, 117, 197, 0.2)">as</span> I made the video.<br> 我一边吃胡萝卜边做视频.</li><li>在<strong>某一时间点之后</strong><br> 引导词：<strong>After</strong><br> The rabbit ate a carrot after the wolf stopped by.<br> 大灰狼串过门之后，兔子吃了根胡萝</li><li><strong>从之前某一时间点开始</strong>算<br> 引导词：<strong>since</strong><br> 这种状态一般使用完成状态<br> The rabbit has shared three carrots since the wolf stopped by.<br> 自从大灰狼来串门，兔子已经分享了三根胡萝卜了<br> <span style="background:rgba(3, 135, 102, 0.2)">The rabbit has not stopped sharing carrots</span> since the wolf stopped by<br> 自从大灰狼来串门，兔子就一直在分享胡萝卜</li><li>直到<strong>之后某一时间点</strong><br> 引导词：<strong>until</strong><br> The rabbit waited until the wolf stopped by.<br> 兔子一直在等, 直到大灰狼来串门.<br> The rabbit didn’t eat any carrot until the wolf stopped by<br> 兔子直到大灰狼来串门才吃了胡萝卜。</li><li><strong>一…就…</strong><br> 引导词：<strong>as soon as</strong><br> The rabbit will eat a carrot as soon as the wolf leaves.<br> 大灰狼一离开兔子就要吃一个胡萝卜。</li><li><strong>下次…</strong><br> 引导词：<strong>the next time</strong><br> The rabbit will share the biggest carrot the next time the wolf stops by.<br> 下次大灰狼来串门,兔子会一起分享最大的胡萝卜。</li></ol></li><li><strong>表地点(如:在…地方)</strong><br> 引导词：<strong>where+”强调形式”</strong><br> wherever,everywhere,anywhere<br> 不管哪里,任何地方,所有地方<br> The rabbit ate the carrot where he found it.<br> 兔子在找到胡萝卜的地方吃了它<br> The rabbit will go wherever he can find a carrot.<br> The rabbit sees a carrot <span style="background:rgba(3, 135, 102, 0.2)">everywhere</span> he goes. &#x3D; <span style="background:rgba(3, 135, 102, 0.2)">every place where</span> (定语从句)<br> The rabbit can eat a carrot <span style="background:rgba(3, 135, 102, 0.2)">anywhere</span> he likes. &#x3D; <span style="background:rgba(3, 135, 102, 0.2)">at any place where</span> (定语从句)<br> <strong>和[[#^dc938b|形容词从句]]的区别</strong><br> The rabbit ate the carrot where he found it<br> The rabbit ate the carrot <span style="background:rgba(3, 135, 102, 0.2)">at the place</span> where he found it.<br> 形容词从句是为了修饰先行词 place 。<br> This is <span style="background:rgba(3, 135, 102, 0.2)">where he found the carrot.</span>（表语从句）<br> <span style="background:rgba(3, 135, 102, 0.2)">Where he found the carrot</span> is a secret.（主语从句）<br> <strong>因此只靠 where 不能确定是什么从句</strong>    </li><li><strong>表条件(如:如果)….</strong><br> <span style="background:rgba(3, 135, 102, 0.2)">If the rabbit sees a carrot</span>, he will eat it.<br> 真实的假设-&gt;<span style="background:rgba(3, 135, 102, 0.2)">真实条件句</span><br> <span style="background:rgba(3, 135, 102, 0.2)">If </span>I had seen a carrot, I would have eaten it.<br> 使用了动词虚拟语气的条件副词从句<br> <strong>主将从现</strong><br> 条件句比主句落后一个时间段<br> <strong>其他引导词：unless</strong><br> Unless you like this video, you will not give it a thumbs-up.<br> 除非你喜欢这个视频,你不会给它点赞<br> <strong>provided</strong><br> Provided that my video is excellent, you will give it a thumbs-up.<br> 如果我的视频很棒,你会给它点赞<br> <strong>As long as</strong><br> As long as I make excellent videos, you will remain my follower.<br> 只要我一直做高质量视频,你就会继续关注我<br> <strong>In case</strong><br> In case you don’t understand, please comment below.<br> 如果你不明白,请在下方评论</li><li>表让步(如:虽然…但是…)<br> 假设：<br> Even if I see a carrot, I will not eat it.<br> 即使我看到了一根胡萝卜,我也不会吃它<br> 事实：<br> Although I see a carrot, I will not eat it.<br> 尽管我看到了一根胡萝卜,但我不会吃它<br> 未知情况：<br> <span style="background:rgba(3, 135, 102, 0.2)">No matter</span> what happens, I will not eat the carrot<br> 不管什么事会发生,我都不会吃这胡萝卜<br> No matter who orders me, I will not eat the carrot.<br> 不管谁命令我,我都不会吃这胡萝卜.<br> &#x2F; regardless of</li><li>表方式(如:就好像…<br> I feel good <span style="background:rgba(3, 135, 102, 0.2)">as if</span> I just ate a carrot.<br> 我感觉良好,就好像我刚吃了根胡萝卜一样.<br> You spend (so much) money <span style="background:rgba(3, 135, 102, 0.2)">as if</span> you were a millionaire.(假想)<br> Eat the carrot <span style="background:rgba(3, 135, 102, 0.2)">as</span> I do.（正在）<br> Leave the carrot <span style="background:rgba(3, 135, 102, 0.2)">as</span> it is.<br> 别动这胡萝卜（像这胡萝卜原本那样,别碰它）</li><li>表比较(如:比…)<br> 更…<br> He is smarter <span style="background:rgba(3, 135, 102, 0.2)">than</span> <del>me</del>.<br> He is smarter than l am.<br> This carrot is bigger l than that one.<br> This carrot is bigger than that one is.<br> She is more beautiful than Snow White.<br> She is more beautiful than Snow White is<br> 同样的<br> He is <span style="background:rgba(3, 135, 102, 0.2)">as</span> smart <span style="background:rgba(3, 135, 102, 0.2)">as</span> <del>I am</del> &#x2F; me.<br> This carrot is as big as that one <del>is</del>.<br> She is as beautiful as Snow White <del>is</del>.<br> 越…越…<br> <span style="background:rgba(3, 135, 102, 0.2)">The more</span> you practice English,<span style="background:rgba(3, 135, 102, 0.2)">the more</span> fluent you become.<br> 你越多练习英语,你就越流利</li><li>表原因(如:因为…所以..)<br> <strong>Because</strong><br> The rabbit ate the carrot <span style="background:rgba(3, 135, 102, 0.2)">because he was hungry.</span><br> 兔子吃了胡萝卜,因为他饿了，<br> Because the rabbit was hungry, <del>so</del> he ate the carrot.<br> <strong>so 是用来构成复合句的[[连词]]</strong><br> <strong>since</strong><br> <strong>介绍某个原因</strong><br> Since you are hungry, you can eat the carrot.<br> 既然你饿了，你可以吃这胡萝<br> <strong>as</strong><br> As you were not here, we ate the carrot without you.<br> 因为你之前不在这儿,所以吃胡萝卜没带你一个<br> <strong>因果&#x2F;语气</strong><br> because&gt;since&gt;as<br> <strong>Because</strong> this video is excellent, you should give it a thumbs-up.<br> <strong>因为</strong>这视频很棒,所以要点赞.<br> <strong>Since all</strong> my videos are excellent, you should give this video a thumbs-up.<br> <strong>众所周知</strong>,英语兔只出精品,所以要点赞<br> As I have thick skin, I’m begging you for a thumbs-up.<br> <strong>显而易见</strong>我脸皮很厚，所以求你点赞<br> <strong>注意</strong><br> because 在主句前后都可引导，而 since&#x2F;as 只能在主句之前<br> <strong>because vs. for</strong><br> You must really like me, for you have given all my videos a thumbs-up.<br> 你肯定很喜欢我，因为你给我所有视频都点赞啦<br> <strong>for在这里构成复合句，前者为推测，后者为推测的原因</strong></li><li>表目的(如:为了…)<br> <strong>In order</strong> that I could finish the video in time I pulled an all-nighter.<br> 为了及时完成视频我熬夜不睡<br> <strong>注意</strong><br> so that 不能放在句首<br> 一般使用 can, could, may, might, should, would 等情态动词</li><li>表结果(如:所以…)<br> I ate a lot of carrots for lunch <strong>so that</strong> I wasn’t hungry at all in the afternoon.<br> I ate <span style="background:rgba(3, 135, 102, 0.2)">so</span> many carrots for lunch <span style="background:rgba(3, 135, 102, 0.2)">that</span> I felt sick afterwards.<br> 我吃了那么多胡萝卜，导致(结果是)我之后感到不舒服<br> such…that…<br> It was such <span style="background:rgba(3, 135, 102, 0.2)">a tasty carrot</span> that I ate it all at once.（<span style="background:rgba(3, 135, 102, 0.2)">名词性成分</span>）<br> 这是个如此好吃的胡萝以至于(结果)我一下次就吃完了它<br> It was so <span style="background:rgba(3, 135, 102, 0.2)">tasty</span> a <span style="background:rgba(3, 135, 102, 0.2)">carrot</span> that I ate it all at once.<br> 因为so 后面要接形容词，因此只能把 carrot 放在形容词之后</li></ol><h2 id="关系词"><a href="#关系词" class="headerlink" title="关系词"></a>关系词</h2><ul><li>关系代词</li><li>关系[[副词]]</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>英语/句子</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>被动</title>
    <link href="/posts/1829774318/"/>
    <url>/posts/1829774318/</url>
    
    <content type="html"><![CDATA[<p><strong>主动语态</strong>(强调动作执行者)<br><strong>被动语态</strong>(强调动作承受者)<br>“be”+动词过去分词<br>‘by+动作执行者<br>The carrot was eaten by the rabbit<br>胡萝卜被兔子吃了.<br>A carrot was eaten.<br>胡萝卜被吃了</p><p>The wolf was given the carrot by the rabbit.<br>狼被兔子给了胡萝卜.<br>The carrot was given to the wolf by the rabbit.<br>胡萝卜被兔子给了狼<br>如果知道动词执行者，可以把  by the rabbit.去掉<br>The rabbit made the wolf laugh.<br>兔子把狼逗笑了.</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/句子</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>主谓一致</title>
    <link href="/posts/1965350014/"/>
    <url>/posts/1965350014/</url>
    
    <content type="html"><![CDATA[<h2 id="语法一致"><a href="#语法一致" class="headerlink" title="语法一致"></a>语法一致</h2><h3 id="单数主语-复数主语"><a href="#单数主语-复数主语" class="headerlink" title="单数主语&#x2F;复数主语"></a>单数主语&#x2F;复数主语</h3><p>Time is money.<br>时间是金钱.<br>Carrots are delicious.<br>胡萝卜好吃(是好吃的).</p><p><strong>可数名词复数 (carrots) + 谓语动词复数</strong><br><strong>不可数名词 (carrot juice) + 谓语动词单数</strong></p><p>A number of carrots have been eaten.<br>一些胡萝卜被吃了.<br>A lot of carrot juice has been sold.<br>很多胡萝卜汁被卖出了.</p><p><strong>非谓语动词做主语时，也相当于单数名词</strong><br><strong>To eat a carrot every day</strong> is good for the rabbit.<br>一天吃一根胡萝卜对兔子有好处(是有好处的).<br><strong>Eating carrots</strong> is healthy.<br>吃胡萝卜很健康(是健康的).</p><p><strong>用and连接不同的名词做主语，都会接复数谓语动词</strong><br>The rabbit and the wolf are at the party.<br>兔子和狼都参加了聚会.</p><h3 id="假象主语"><a href="#假象主语" class="headerlink" title="假象主语"></a>假象主语</h3><p>The rabbit<font color="#f79646"> as well as other animals</font> gets(三单) a carrot.<br>兔子还有其他动物都得到了一根胡萝卜<br>All the animals <font color="#f79646">except the wolf </font>get the carrots.<br>除了狼,所有的动物都得到了胡萝卜.</p><h3 id="不定代词作主语"><a href="#不定代词作主语" class="headerlink" title="不定代词作主语"></a>不定代词作主语</h3><p>Everyone gets a carrot.<br>每一位都得到了一根胡萝卜.<br>Each of them gets a carrot.<br>他们中的每一个都得到了一根胡萝卜<br>Both of them like carrots.<br>他俩都喜欢胡萝卜.<br>Some of them are afraid of the wolf.<br>他们中有一些害怕狼.<br>None of them get&#x2F;gets a carrot.<br>它们中谁都没得到胡萝卜.<br>Neither of them is&#x2F;are afraid of the wolf.<br>他们都不怕狼.</p><h2 id="意义一致"><a href="#意义一致" class="headerlink" title="意义一致"></a>意义一致</h2><h3 id="同一个主语不同身份"><a href="#同一个主语不同身份" class="headerlink" title="同一个主语不同身份"></a>同一个主语不同身份</h3><p>The teacher and video creator is a rabbit.<br>这位老师兼视频创作者是只兔子.<br>The teacher and the video creator are rabbits.<br>这位老师和这位视频创作者是兔子.</p><h3 id="复数名词的单数意义"><a href="#复数名词的单数意义" class="headerlink" title="复数名词的单数意义"></a>复数名词的单数意义</h3><p>Ten years is a long time.<br>十年是一段很长的时间.<br>Two coins isn’t a lot.<br>两枚硬币不算多<br>A knife and fork is needed for eating the carrot.<br>一副刀叉是吃胡萝卜必需的.</p><h3 id="不定代词的单复数意义"><a href="#不定代词的单复数意义" class="headerlink" title="不定代词的单复数意义"></a>不定代词的单复数意义</h3><p>All is quiet.<br>一切都很安静.<br>All are quiet.<br>大家都很安静</p><h3 id="名词的形和意"><a href="#名词的形和意" class="headerlink" title="名词的形和意"></a>名词的形和意</h3><h4 id="形复意单（用单数谓语动词）"><a href="#形复意单（用单数谓语动词）" class="headerlink" title="形复意单（用单数谓语动词）"></a><strong>形复意单（用单数谓语动词）</strong></h4><p>Physics is my favorite subject.<br>物理是我最喜欢的学科.</p><h4 id="形单意复（用复数谓语动词）"><a href="#形单意复（用复数谓语动词）" class="headerlink" title="形单意复（用复数谓语动词）"></a><strong>形单意复（用复数谓语动词）</strong></h4><p>The cattle are on the hill.<br>牛群在山上</p><h4 id="单复数同形名词（用单复数谓语动词都可）"><a href="#单复数同形名词（用单复数谓语动词都可）" class="headerlink" title="单复数同形名词（用单复数谓语动词都可）"></a><strong>单复数同形名词（用单复数谓语动词都可）</strong></h4><p>A sheep is eating grass.<br>一只绵羊在吃草.<br>The sheep are eating grass.<br>一群绵羊在吃草</p><h4 id="集合名词（用单复数谓语动词都可）"><a href="#集合名词（用单复数谓语动词都可）" class="headerlink" title="集合名词（用单复数谓语动词都可）"></a><strong>集合名词（用单复数谓语动词都可）</strong></h4><p>The rabbit’s family is huge.<br>这个兔子家庭很大<br>The rabbit’s family are all at home.<br>这个兔子家庭的所有成员都在家<br>All the furniture here is expensive.<br>所有这里的家具（一个集合）都很贵<br><strong>the+形容词</strong><br>可视作集合名词;表单数意义&#x2F;复数意义</p><h2 id="就近一致"><a href="#就近一致" class="headerlink" title="就近一致"></a>就近一致</h2><h3 id="or-either…-or…等"><a href="#or-either…-or…等" class="headerlink" title="or;either… or…等"></a>or;either… or…等</h3><p>or…<br>或者…<br>either… or…<br>要么…要么…<br>neither… nor…<br>既不…也不…<br>not only… but also…<br>不仅…而且..<br>等连接两个名词或代词作主语时，<strong>谓语动词和离得最近的词一致</strong><br>Either you or I am going to the party.<br>不是你就是我会去参加聚会<br>Not only the rabbit but also many other animals like carrots.<br>不只是兔子，还有其他很多动物也喜欢胡萝卜</p><h3 id="there-be"><a href="#there-be" class="headerlink" title="there be"></a>there be</h3><p>There is a carrot and two apples on the table.<br>桌上有一根胡萝卜和两个苹果</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/句子</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>助动词&amp;情态动词</title>
    <link href="/posts/1670323124/"/>
    <url>/posts/1670323124/</url>
    
    <content type="html"><![CDATA[<p>辅助主动词<br>不能像主动词一样单独做谓语动词</p><h2 id="基本助动词（还能做实义动词）"><a href="#基本助动词（还能做实义动词）" class="headerlink" title="基本助动词（还能做实义动词）"></a>基本助动词（还能做实义动词）</h2><h3 id="be"><a href="#be" class="headerlink" title="be:"></a>be:</h3><p>^0667aa</p><ol><li>(连)[[系动词]]：I am a smart rabbit -&gt; I&#x3D; a smart rabbit.</li><li>助动词,构成时态<br> I am<br> You&#x2F;we&#x2F;they are<br> She&#x2F;he&#x2F;it is</li></ol><h3 id="do"><a href="#do" class="headerlink" title="do"></a>do</h3><p>意为强调</p><h3 id="have"><a href="#have" class="headerlink" title="have"></a>have</h3><p>^6b969c</p><ol><li>实义动词</li><li>助动词,构成时态<br> I&#x2F;you&#x2F;we&#x2F;they have<br> She&#x2F;he&#x2F;it has(第三人称使用has)</li></ol><h2 id="情态助动词"><a href="#情态助动词" class="headerlink" title="情态助动词"></a>情态助动词</h2><ul><li>can&#x2F;could  <ul><li>有能力做… </li><li>可以，许可&#x2F;更有礼貌</li><li>表可能性<br>  Anything can happen.<br>  什么事儿都可能发生<br>  如果使用could，表可能性更小一点</li></ul></li></ul><hr><ul><li>may&#x2F;might<br>  也许大概可能。可能性通常小于could<ul><li>表请求或许可<br>  May&#x2F;might I borrow your book?<br>  我能借用你的书吗？（使用might更有礼貌）</li><li>表可能性<br>  The rabbit isn’t here.<br>  He may be at home.<br>  兔子不在这,他可能在家(不确定)</li><li>表祝愿<br>  May + 主语 + 动词原形 -&gt; 正式、书面、或比较诗意的祝愿、祈愿语气<br>  May you succeed!<br>  祝你成功</li></ul></li></ul><hr><ul><li>will&#x2F;would<ul><li>will表将来，现代英语里大多数人都用 <strong>will</strong><br>  would是其过去式，表过去将来时</li><li>表请求，建议<br>  比使用can更加正式，can比较口语化轻松<br>  Will you lend me that book?<br>  你将要借我那本书吗？<br>  使用would更加委婉</li><li>表推测，假设<br>  Ask him. He will&#x2F;would know.<br>  问他吧,他可能知道.</li></ul></li></ul><hr><ul><li>shall&#x2F;should<ul><li>表将来，少见，比较正式</li><li>表请求或征求意见<br>  you shall not pass!</li><li>表应当<br>  It should rain tomorrow.<br>  明天应当会下雨</li><li>表竟然<br>  It’s surprising that he should be late.</li><li>构成虚拟语气<br>  If it should rain tomorrow, I wouldn’t go.<br>  如果明天万一下雨,我就不去了。<br>  You should have eaten the carrot.<br>  你应该吃掉那根胡萝卜(但你没吃).</li></ul></li></ul><hr><ul><li>must<ul><li>必须</li><li>禁止 must not mustn’t</li><li>一定，肯定</li><li>如果表不可能，就需要使用can’t</li></ul></li></ul><hr><ul><li>ought to<ul><li>表应该<br>  We ought to treat the rabbit well.<br>  我们应该对兔子好点儿</li></ul></li><li>dare&#x2F;dared<ul><li>(作实义动词)敢;挑战;冒险</li><li>(作情态动词)敢<br>  The rabbit dare* not tell the truth to the wolf.<br>  兔子不敢对狼说出真相.<br>  How dare you!<br>  你好大的胆子！</li></ul></li><li>need<ul><li>常做[[使役动词]]，表需要,情态动词表<strong>有必要</strong><br>  The rabbit need wait.(情态动词)<br>  兔子需要等待.<br>  The rabbit needs to wait.(谓语动词)<br>  兔子需要等待<br>  need做情态动词时直接加not表否定<br>  The rabbit need not wait.<br>  兔子不必等待<br>  实义动词则不行，需要借助do<br>  The rabbit does not need to wait.</li></ul></li><li>used to<ul><li>表示<strong>过去的动作</strong> ，尤其是重复的动作，而且强调和现在的对比<br>  The rabbit used to eat apples.<br>  Now he only eats carrots.<br>  兔子过去(习惯)吃苹果.现在他只吃胡萝卜</li><li>和use 以及 be used to 用法不一样</li></ul></li></ul><h2 id="半助动词"><a href="#半助动词" class="headerlink" title="半助动词"></a>半助动词</h2><ul><li>be able to<ul><li>表达将来的能力<br>  I’ll be able to reach school on time<br>  If I leave right now.<br>  如果我现在就离开就能按时到学校</li><li>was&#x2F;were able to往往表示”成功做成…<br>  I was able to reach school on time because I left home early.<br>  因为我离家很早所以按时到学校</li></ul></li><li>be going to<ul><li>有更强的主观能动性</li><li>有计划做某事的意思</li><li>很快就要做某事<br>  I’m going to eat dinner at 6 PM today.<br>  我会在6点吃晚饭</li></ul></li><li>be about to<ul><li>马上就要做某事，时间短</li></ul></li><li>be to<ul><li>被命令做某事</li><li>命中注定<br>  I think they’re to fall in love with each other.<br>  我想他们注定会相爱.</li><li>上面三个都和 will 一样表示将要做某事</li></ul></li><li>had better<ul><li>最好做…往往表示忠告，警告，如果不这么做，会有不好的后果<br>  You had better follow my orders.<br>  你最好听我的命令，</li><li>缩写为：’d better.</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性/动词</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>系动词</title>
    <link href="/posts/3929210841/"/>
    <url>/posts/3929210841/</url>
    
    <content type="html"><![CDATA[<p>概念和编程中的”赋值”很像<br>I am a rabbit.<br>I &#x3D; a rabbit<br>The rabbit is smart.<br>The rabbit &#x3D; smart</p><p>Linking Verb!</p><p>The room remained empty<br>房间&#x3D;(一直是)&#x3D;空的.<br>The sky grew dark.<br>天空&#x3D;(渐渐变)&#x3D;暗</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性/动词</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使役动词</title>
    <link href="/posts/2071780642/"/>
    <url>/posts/2071780642/</url>
    
    <content type="html"><![CDATA[<blockquote><p>As you may <span style="background:rgba(3, 135, 102, 0.2)">know</span>, I usually <span style="background:rgba(3, 135, 102, 0.2)">eat</span> quite a lot of carrots when I <span style="background:rgba(3, 135, 102, 0.2)">teach</span> grammar.<br>你可能知道,我教语法时经常吃很多胡萝卜</p></blockquote><blockquote><p>I <span style="background:rgba(3, 135, 102, 0.2)">make</span> the wolf eat carrots from time to time.<br>我<span style="background:rgba(3, 135, 102, 0.2)">使(让)</span>狼也偶尔吃些胡萝卜.</p></blockquote><p>除了加宾语还需要<strong>增添</strong>其它补充信息，即<strong>宾语补语</strong><br>这一类表达的含义有 <strong>使，让，令 等</strong><br>因此 在语法上被称作<strong>使役动词</strong></p><ul><li>make<ul><li>动词原形&#x2F;[[非谓语动词#^6f01c2|裸不定式]]（特殊动词后面不加 to ）<br>  有点<strong>强迫的味道</strong><br>  I <span style="background:rgba(5, 117, 197, 0.2)">make</span> <span style="background:rgba(3, 135, 102, 0.2)">the wolf</span> <span style="background:rgba(74, 82, 199, 0.2)">eat</span> carrots from time to time.<br>  eat为非谓语动词</li><li>[[形容词]]<br>  The carrot made the wolf full<br>  胡萝卜使(让)狼饱了.</li></ul></li><li>let<ul><li>动词原形&#x2F;[[非谓语动词#^6f01c2|裸不定式]]<br>  <strong>允许某人做某事</strong><br>  I’ll <strong>let the wolf eat</strong> some chocolate.<br>  我会让狼吃点巧克力.</li><li>副词<br> Let me out!<br> 让我出去!</li></ul></li><li>have<ul><li>有<br>  I have a pen. I have an apple.<br>  我有支笔.我有个苹果.</li><li>（[[助动词&amp;情态动词#^6b969c|助动词]]）<br>  I have eaten the apple.<br>  我把苹果吃了.</li><li>动词原形&#x2F;[[非谓语动词#^6f01c2|裸不定式]]<br>  <strong>给某人任务&#x2F;责任做.</strong><br>  I’ll have the wolf wash the dishes.<br>  我会让狼洗盘子.(我把洗盘子的任务给了狼.)<br>  花钱买的服务<br>  I had someone wash my car.<br>  我让某人洗了我的车，</li><li>[[非谓语动词#^725f9f|过去分词]]<ul><li>结构：<strong>使役动词 + 宾语 + 过去分词</strong><br>  I had <span style="background:rgba(74, 82, 199, 0.2)">someone</span> <span style="background:rgba(5, 117, 197, 0.2)">wash</span> my car.<br>  我让某人洗了我的车.<br>  <strong>改写</strong><br>  I had my car <span style="background:rgba(5, 117, 197, 0.2)">washed</span>.<br>  我让某人洗了我的车<br>  其中，washed作为宾语补足语（宾补）<br>  这个结构也有<strong>遭遇不幸</strong>的含义<br>  I had my carrot stolen yesterday.<br>  我的胡萝卜昨天被偷了.</li></ul></li></ul></li><li>get<ul><li>收到<br>  I got a letter from a friend.<br>  我从一个朋友那儿收到了封信.</li><li>明白<br>  Do you get what I mean?<br>  你明白我的意思了吗？</li><li>get 的宾语后要接完整动词不定式<br>  <strong>说服&#x2F;鼓励…做…</strong><br>  I’ll get the wolf <span style="background:rgba(5, 117, 197, 0.2)">to clean</span> the kitchen after she washes the dishes.<br>  我会（想办法）让狼洗完盘子再把厨房清理了.</li><li>过去分词<br>  I got my nails done.<br>  我让某人修了我的指甲</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性/动词</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>非谓语动词</title>
    <link href="/posts/3602783281/"/>
    <url>/posts/3602783281/</url>
    
    <content type="html"><![CDATA[<p>众所周知，谓语动词是被主语所限定的，与之相对的就是非限定动词，也就是非谓语动词<br>一句话中只有一个谓语动词，其余的为非谓语动词<br><del>I am a rabbit, I eat carrots.</del><br>I am a rabbit, so I eat carrots.([[连词]])<br>Because I am a rabbit, I eat carrots.(主句+[[从句]])</p><h2 id="动词不定式"><a href="#动词不定式" class="headerlink" title="动词不定式"></a>动词不定式</h2><p>^29fa52</p><p>to + 动词原型<br><strong>完全不定式</strong>（full infinitive）<br>To be or not to be, that is the question.<br>生存还是毁灭,这是一个问题<br><strong>裸不定式</strong>：（bare infinitive）<br>You helped me <span style="background:#d2cbff">(to)</span> cook the carrot.<br>你帮我烧 (做菜)了胡萝卜.<br><strong>作用：</strong><br>1. <strong>不定式短语做主语</strong><br><span style="background:rgba(160, 204, 246, 0.55)">To eat a carrot every day</span> is good for the rabbit.<br>一天吃一根胡萝卜对兔子有好处<br>It is good for the rabbit <span style="background:rgba(160, 204, 246, 0.55)">to eat a carrot every day.</span><br>使用 It 做<strong>形式主语</strong>，主系表，主语在后面<br>2. <strong>不定式短语做宾语</strong><br>The rabbit likes <span style="background:rgba(160, 204, 246, 0.55)">to eat carrots</span>.<br>兔子喜欢吃胡萝卜.<br>使用It做形式宾语<br>I consider it important <span style="background:rgba(160, 204, 246, 0.55)">to eat a carrot every day.</span><br>我发现每天吃一个胡萝卜很重要<br>注意：有些动词后面不能接不定式作宾语<br>3. <strong>不定式作宾语补语</strong><br>The rabbit expected the wolf<span style="background:rgba(160, 204, 246, 0.55)"> to eat a carrot.</span><br>兔子指望狼吃一根胡萝卜<br>注意：前面为[[使役动词]]时，不定式做宾补需要省略to<br>Carrots make the rabbit feel happy.<br>胡萝卜使兔子感到快乐<br>4. <strong>不定式作定语</strong><br>The rabbit has a lot of carrots to eat.<br>兔子有很多胡萝卜要吃<br>5. <strong>不定式做状语</strong><br>1. <strong>表原因</strong>：<br>I was surprised to get a thumbs-up.<br>我很吃惊(因为)得到一个赞<br>I was surprised because I got a thumbs-up.<br>我很吃惊,因为有人给我点赞了，<br>2. <strong>表目的</strong><br>I will do anything to get a thumbs-up.<br>我为了得到一个赞会做任何事<br>I will do anything in order that I get a thumbs-up.<br>为了点赞量我能做出任何事儿<br>3. <strong>表结果</strong><br>I got enough thumbs-up to make another video.<br>我得到足够的赞,可以去做另一个视频啦!<br>I got enough thumbs-up, so that I made another video.<br>我得到了很多点赞,于是我做了另一个视频<br><strong>高级不定式</strong><br> to +动词原形(“状态”) ^6f01c2</p><h2 id="动-名词"><a href="#动-名词" class="headerlink" title="动[[名词]]"></a>动[[名词]]</h2><p>^b420d3</p><p>动词原形+ing<br><strong>动名词作主语</strong><br>Carrots are healthy for the rabbit.<br>胡萝卜对免子来说很健康<br><span style="background:rgba(160, 204, 246, 0.55)">Eating carrots</span> is healthy for the rabbit.<br>吃胡萝卜(这个行为)对兔子来说很健康<br><strong>动名词作表语（主语补语）</strong><br>The rabbit’s hobby is growing carrots.<br>兔子的爱好是种胡萝<br><strong>动名词作定语</strong><br>a sleeping pill<br>a pill for sleeping<br><strong>动名词做宾语</strong><br>The rabbit likes eating carrots.<br>兔子喜欢吃胡萝卜.<br>[[介词]]+宾语 <font color="#a5a5a5">非谓语动词（动名词）</font><br>The rabbit is<span style="background:rgba(3, 135, 102, 0.2)"> looking forward to</span> seeing the wolf again.<br>兔子期望再次见到狼</p><h3 id="如何判断句子中是动名词还是现在分词"><a href="#如何判断句子中是动名词还是现在分词" class="headerlink" title="如何判断句子中是动名词还是现在分词"></a>如何判断句子中是动名词还是现在分词</h3><p>a sleeping rabbit<br>相当于一个[[形容词]]修饰兔子的状态，说明是现在分词</p><h2 id="现在分词"><a href="#现在分词" class="headerlink" title="现在分词"></a>现在分词</h2><p>^0cff3d</p><blockquote><p>现在分词暗含主动关系，即被描述的是做出动作的人&#x2F;物 令人</p></blockquote><p><font color="#7f7f7f">通常：+ing</font><br><strong>有些动词在此基础上改变拼写,如:</strong><br>write→ writing, 不是writeing<br>hit → hitting,    不是hiting<br>die → dying,     不是dieing<br><strong>可以当[[形容词]]来用</strong><br>interesting其实是interest的现在分词<br><strong>可以当宾补</strong><br>The wolf saw the rabbit eating a carrot.<br>狼之前看到兔子正在吃一根胡萝卜<br>The wolf saw the rabbit eat a carrot.<br>狼之前看到兔子吃了根胡萝卜.（全程）<br><strong>作状语</strong><br><span style="background:rgba(3, 135, 102, 0.2)">表示时间</span>，原因，条件，结果，让步，目的，方式和伴随情况等<br><span style="background:rgba(3, 135, 102, 0.2)">Hearing</span> the news, the rabbit became excited.<br>听到这个消息,兔子很激动.</p><h2 id="过去分词"><a href="#过去分词" class="headerlink" title="过去分词"></a>过去分词</h2><p>^725f9f</p><blockquote><p>过去分词暗含被动关系，即被描述的是动作的接受者 感到</p></blockquote><p>通常:+ ed<br>如: looked(看), smelled(闻), tasted(品尝)…<br><strong>有些动词是”不规则变化”,如:</strong><br>eat → eaten<br>bring→ brought<br>feel → felt<br><strong>过去分词因为是非谓语动词，因此是不自带时间的</strong><br>The rabbit will eat minced carrot next week.<br>兔子下周会吃搅碎的胡萝卜<br><strong>过去分词短语做定语，则要放到被修饰的名词之后，被称为后置定语</strong><br>The carrot cake eaten by the rabbit is delicious.<br><strong>过去分词作主语补语（表语）</strong><br>The rabbit is interested in growing carrots.<br>兔子对种胡萝卜感兴趣<br><strong>作状语</strong><br>表地点原因条件<br>If the weather permits, the rabbit will go out.<br>天气允许的话,兔子就出门.<br>以上这种一个简单句除去核心的谓语动词外，其他的动词转为对应的过去分词或现在分词的用法，语法上称作”[[独立主格]]“</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性/动词</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>动词语气</title>
    <link href="/posts/2529807823/"/>
    <url>/posts/2529807823/</url>
    
    <content type="html"><![CDATA[<h2 id="1-陈述语气"><a href="#1-陈述语气" class="headerlink" title="1. 陈述语气"></a>1. 陈述语气</h2><ul><li>用法<br>  描述现实</li><li>例句<br>  The rabbit ate the carrot.  这兔子吃了这胡萝卜。<br>  Did the rabbit eat the carrot? Was the rabbit hungry?（也属于疑问语气）</li></ul><h2 id="2-祈使语气"><a href="#2-祈使语气" class="headerlink" title="2. 祈使语气"></a>2. 祈使语气</h2><ul><li>用法<br>  命令请求</li><li>例句<br>  Rabbit,eat the carrot!<br>  Please,give me a thumbs-up!</li><li>技巧<br>  用第二人称(“你”)用一般现在时态<br>  去掉”你”,并保证动词原形<ul><li>You eat the carrot! &gt;Eat the carrot!</li><li>You don’t eat it! → Don’t eat it!</li><li>You are quiet! → Be quiet!</li><li>You never give up! &gt; Never give up!</li><li>You give me coins! &gt; Give me coins!</li></ul></li></ul><h2 id="3-虚拟语气"><a href="#3-虚拟语气" class="headerlink" title="3. 虚拟语气"></a>3. 虚拟语气</h2><h3 id="1-表不可能的假设"><a href="#1-表不可能的假设" class="headerlink" title="1. 表不可能的假设"></a>1. 表不可能的假设</h3><ol><li>和现在事实相反<br> 条件句：过去式<br> 主句：would+动词原形<br> 用法：If I knew it, I would tell you.</li><li>和将来事实相反（可能性很小）<br> 条件句：should+动词原形<br> 主句：would+动词原形</li><li>和过去事实相反<br> 条件句：had +动词过去分词<br> 主句：  would have + 动词过去分词</li></ol><h3 id="2-虚拟语气表达愿望，请求建议，命令，等"><a href="#2-虚拟语气表达愿望，请求建议，命令，等" class="headerlink" title="2. 虚拟语气表达愿望，请求建议，命令，等"></a>2. 虚拟语气表达愿望，请求建议，命令，等</h3><ul><li>wish：可能性小</li><li>hope：中性</li><li>would rather </li><li>注意：<ul><li>demand, suggest, insist, order.等词后接：should + 动词原型<br>   I <span style="background:rgba(3, 135, 102, 0.2)">demand</span> that you <span style="background:rgba(240, 107, 5, 0.2)">should give</span> me a carrot.</li></ul></li></ul><ol><li>对现在的愿望<ul><li>构成：wish+动词过去式</li><li>示例：I wish that I were a rabbit.</li></ul></li><li>对过去的愿望<ul><li>构成：wish + (had&#x2F;would have + 动词过去分词)过去完成式</li><li>示例：I wish (that) I had eat the carrot.</li></ul></li><li>对将来的愿望<ul><li>构成：wish+ would&#x2F;could&#x2F;might+动词原形</li><li>示例：I wish (that) I could eat the carrot.</li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性/动词</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>动词时态</title>
    <link href="/posts/135355774/"/>
    <url>/posts/135355774/</url>
    
    <content type="html"><![CDATA[<h2 id="一、动词时间"><a href="#一、动词时间" class="headerlink" title="一、动词时间"></a>一、动词时间</h2><h3 id="1-过去"><a href="#1-过去" class="headerlink" title="1. 过去"></a>1. 过去</h3><h3 id="2-过去将来"><a href="#2-过去将来" class="headerlink" title="2. 过去将来"></a>2. 过去将来</h3><h3 id="3-现在"><a href="#3-现在" class="headerlink" title="3. 现在"></a>3. 现在</h3><h3 id="4-将来"><a href="#4-将来" class="headerlink" title="4. 将来"></a>4. 将来</h3><hr><h2 id="二、动词状态"><a href="#二、动词状态" class="headerlink" title="二、动词状态"></a>二、动词状态</h2><h3 id="1-进行"><a href="#1-进行" class="headerlink" title="1. 进行"></a>1. 进行</h3><blockquote><p>这兔子正在吃胡萝卜。</p></blockquote><h3 id="2-完成"><a href="#2-完成" class="headerlink" title="2. 完成"></a>2. 完成</h3><p>不直接说明动作的开始时间</p><blockquote><p>这兔子吃掉了胡萝卜。</p></blockquote><h3 id="3-完成进行"><a href="#3-完成进行" class="headerlink" title="3. 完成进行"></a>3. 完成进行</h3><blockquote><p>这兔子从早上就开始吃胡萝卜，现在还没停呢。</p></blockquote><h3 id="4-一般"><a href="#4-一般" class="headerlink" title="4. 一般"></a>4. 一般</h3><p>没有特别指出</p><blockquote><p>这兔子过去吃胡萝卜，将来也吃胡萝下。</p></blockquote><h2 id="三、时态"><a href="#三、时态" class="headerlink" title="三、时态"></a>三、时态</h2><h3 id="1-现在"><a href="#1-现在" class="headerlink" title="1. 现在"></a>1. 现在</h3><ul><li><p><strong>现在进行时态</strong></p><ul><li>构成<br>  助动词[[助动词&amp;情态动词#^0667aa|be]]的变位+动词的[[非谓语动词#^0cff3d|现在分词]]</li><li>用法<br>  I <span style="background:rgba(3, 135, 102, 0.2)">am</span> <span style="background:rgba(240, 107, 5, 0.2)">eating</span> carrots我正在吃(一些)胡萝卜<br>  You&#x2F;we&#x2F;they <span style="background:rgba(3, 135, 102, 0.2)">are</span> <span style="background:rgba(240, 107, 5, 0.2)">eating</span> a carrot.<br>  She&#x2F;he&#x2F;it <span style="background:rgba(3, 135, 102, 0.2)">is</span> <span style="background:rgba(240, 107, 5, 0.2)">eating</span> a carrot.</li></ul></li><li><p><strong>现在完成时态</strong><br>  这免子现在已经吃完了一些胡萝卜。</p><ul><li>构成<br>  助动词[[助动词&amp;情态动词#^6b969c|have]]的变位+动词的[[非谓语动词#^725f9f|过去分词]]</li><li>用法<br>  I have eaten carrots.我吃过胡萝卜。</li></ul></li><li><p><strong>现在完成进行时态</strong><br>  这免子现在已经吃完了一些胡萝卜，还要继续吃.</p><ul><li>构成<br>  [[助动词&amp;情态动词#^6b969c|have]]的变位+been+动词的[[非谓语动词#^0cff3d|现在分词]]</li><li>用法<br>  I have been eating carrots.我在吃胡萝卜.(不但已经吃了些,还将继续.)</li></ul></li><li><p><strong>一般现在时态</strong></p><ul><li>构成<br>  +动词原形<br>  +动词原形+s (第三人称单数)</li></ul><ul><li>用法<br>  1. <strong>表达事实</strong><br>      The sun rises in the east. 太阳从东边升起<br>  2. <strong>表达习惯&#x2F;重复的动作</strong><br>      I play basketball. 我打篮球. (我有这个习惯.)<br>  3. <strong>表示预计发生的事</strong><br>      The bus leaves at 8 PM every day. 公车每晚八点离站.</li></ul></li></ul><hr><h3 id="2-过去"><a href="#2-过去" class="headerlink" title="2. 过去"></a>2. 过去</h3><ul><li><strong>过去进行时态</strong><br>  这免子昨天下午3点那个时候正在吃胡萝卜。<ul><li>构成<br>  助动词[[助动词&amp;情态动词#^0667aa|be]]的变位+动词的[[非谓语动词#^0cff3d|现在分词]]<br>  <strong>注意：be的变位要求为过去式</strong><br>      I&#x2F;she&#x2F;he&#x2F;it was<br>      You&#x2F;we&#x2F;they were<br>      The rabbit <span style="background:rgba(240, 107, 5, 0.2)">is</span> eating a carrot. → The rabbit <span style="background:rgba(240, 107, 5, 0.2)">was</span> es eating a carrot.</li><li>用法</li></ul></li><li><strong>过去完成时态</strong><br>  这免子昨天下午3点那个时候已经吃完了胡萝卜。<ul><li>构成<br>  助动词[[助动词&amp;情态动词#^6b969c|have]]的变位+动词的[[非谓语动词#^725f9f|过去分词]]<br>  <strong>注意：have的变位要求为过去式</strong><br>  I&#x2F;you&#x2F;we&#x2F;they&#x2F;she&#x2F;he&#x2F;it <strong>had</strong></li><li>用法<br>  I have eaten carrots.我吃过胡萝卜。</li></ul></li><li><strong>过去完成进行时态</strong><br>  这免子咋天下午3点那个时候已经吃完了一些胡萝卜，还要继续吃。<ul><li>构成<br>  助动词[[助动词&amp;情态动词#^6b969c|have]]的变位+ been+动词的现在分词<br>  <strong>注意：have的变位要求为过去式</strong><br>  I&#x2F;you&#x2F;we&#x2F;they&#x2F;she&#x2F;he&#x2F;it <strong>had</strong></li><li>用法<br>  The rabbit <span style="background:rgba(240, 107, 5, 0.2)">has</span> been eating a carrot. → The rabbit <span style="background:rgba(240, 107, 5, 0.2)">had</span> been eating a carrot.</li></ul></li><li><strong>一般过去时态</strong><br>  兔子过去吃（了）胡萝卜。<ul><li>构成<br>  +动词[[#过去式]]</li><li>用法<br>  <strong>只表示</strong>动作发生了<br>  The rabbit ate a carrot.</li></ul></li></ul><hr><h3 id="3-将来"><a href="#3-将来" class="headerlink" title="3. 将来"></a>3. 将来</h3><ul><li><p>将来进行时态<br>  这兔子明天下午3点那个时候会正在吃胡萝卜。</p><ul><li>构成<br>  will+[[助动词&amp;情态动词#^0667aa|be]]+动词的[[非谓语动词#^0cff3d|现在分词]]</li><li>用法<br>  在将来某个时间，某个动作是在进行的过程中<br>  I will be eating a carrot for lunch tomorrow.</li></ul></li><li><p>将来完成时态<br>  这兔子到明天下午3点那个时候会已经吃完胡萝卜。</p><ul><li>构成<br>  will +助动词 [[助动词&amp;情态动词#^6b969c|have]] 的变位+动词的[[非谓语动词#^725f9f|过去分词]]</li><li>用法<br>  The rabbit will have eaten a carrot.</li></ul></li><li><p>将来完成进行时态<br>  这兔子到明天下午3点那个时候已经吃了一些胡萝卜，还要继续吃。</p><ul><li>构成<br>  will+助动词 [[助动词&amp;情态动词#^6b969c|have]] 的变位+ been + 动词的[[非谓语动词#^0cff3d|现在分词]]</li><li>用法</li></ul></li><li><p>一般将来时态<br>  这兔子会吃胡萝卜。</p><ul><li>构成<br>  will+动词原形<br>  I&#x2F;you&#x2F;she&#x2F;he&#x2F;it&#x2F;they will eat a carrot.</li><li>用法<br>  描述：将来某个时间点发生的动作（说话者十分确定会发生的事）</li></ul></li></ul><hr><h3 id="4-过去将来"><a href="#4-过去将来" class="headerlink" title="4. 过去将来"></a>4. 过去将来</h3><ul><li><p>过去将来进行时态<br>  这兔子原本在第二天下午3点那个时候会正在吃胡萝卜。</p><ul><li>构成<br>  would + [[助动词&amp;情态动词#^0667aa|be]] + 动词的[[非谓语动词#^0cff3d|现在分词]]</li><li>用法<br>  I said I would be eating a carrot at 1 PM tomorrow&#x2F;yesterday.</li></ul></li><li><p>过去将来完成时态<br>  这兔子原本到第二天下午3点那个时候会已经吃完胡萝卜了。</p><ul><li>构成<br>  would + have +动词的[[非谓语动词#^725f9f|过去分词]]</li><li>用法<br>  I said I would have eaten a carrot by 1 PM tomorrow&#x2F;yesterday.</li></ul></li><li><p>过去将来完成进行时态<br>  这兔子原本到第二天下午3点那个时候会已经吃了一些胡萝卜，还要继续吃。</p><ul><li>构成<br>  would + have + [[助动词&amp;情态动词#^0667aa|been]] + 动词的[[非谓语动词#^0cff3d|现在分词]]</li><li>用法<br>  I said I would have been eating lunch for 2 hours by 1 PM</li></ul></li><li><p>过去将来一般时态<br>  这兔子原本会吃胡萝卜。</p><ul><li>构成<br>  would+动词原形</li><li>用法<br>  I knew you would watch my video.我我(之前)就知道你会看我的视频</li></ul></li></ul><h1 id="过去式"><a href="#过去式" class="headerlink" title="过去式"></a>过去式</h1><p>通常:+ ed<br>如: looked(看), smelled(闻),tasted(品尝).<br>不规则变化（后期补上）</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性/动词</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>动词分类</title>
    <link href="/posts/2643288853/"/>
    <url>/posts/2643288853/</url>
    
    <content type="html"><![CDATA[<h2 id="一、可作谓语的动词"><a href="#一、可作谓语的动词" class="headerlink" title="一、可作谓语的动词"></a>一、可作谓语的动词</h2><h3 id="1-实义动词"><a href="#1-实义动词" class="headerlink" title="1. 实义动词"></a>1. 实义动词</h3><ul><li><p><strong>按动作承受者划分：</strong></p><ul><li>及物动词</li><li>不及物动词</li></ul></li><li><p><strong>按状态与动作划分：</strong></p><ul><li>动作动词</li><li>状态动词（如 <em>have</em>, <em>feel</em>, <em>own</em>）<blockquote><p>行为动词：独立做谓语的动词</p></blockquote></li></ul></li></ul><h3 id="2-系动词"><a href="#2-系动词" class="headerlink" title="2. [[系动词]]"></a>2. [[系动词]]</h3><blockquote><p>常与表语搭配使用，如 <em>be</em>, <em>seem</em>, <em>become</em> 等</p></blockquote><hr><h2 id="二、可辅助构成谓语的动词"><a href="#二、可辅助构成谓语的动词" class="headerlink" title="二、可辅助构成谓语的动词"></a>二、可辅助构成谓语的动词</h2><h3 id="1-助动词-情态动词-助动词"><a href="#1-助动词-情态动词-助动词" class="headerlink" title="1. [[助动词&amp;情态动词|助动词]]"></a>1. [[助动词&amp;情态动词|助动词]]</h3><blockquote><p>用于构成时态、语态、语气<br>如：<em>do</em>, <em>be</em>, <em>have</em></p></blockquote><h3 id="2-助动词-情态动词-情态动词"><a href="#2-助动词-情态动词-情态动词" class="headerlink" title="2. [[助动词&amp;情态动词|情态动词]]"></a>2. [[助动词&amp;情态动词|情态动词]]</h3><blockquote><p>表达说话人的态度或推测<br>如：<em>can</em>, <em>may</em>, <em>must</em>, <em>should</em></p></blockquote><hr><h2 id="三、-非谓语动词-（不作谓语）"><a href="#三、-非谓语动词-（不作谓语）" class="headerlink" title="三、[[非谓语动词]]（不作谓语）"></a>三、[[非谓语动词]]（不作谓语）</h2><ul><li>不定式（to do）</li><li>现在分词（doing）</li><li>过去分词（done）</li><li>动名词（doing）</li></ul><hr>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性/动词</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>代词</title>
    <link href="/posts/431597946/"/>
    <url>/posts/431597946/</url>
    
    <content type="html"><![CDATA[<h2 id="人称代词"><a href="#人称代词" class="headerlink" title="人称代词"></a>人称代词</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>There is a rabbit. It is white. It is eating a carrot. It looks happy.<br>有只兔子.它是白色的.它在吃一根胡萝卜.它看起来很开心.</p><table><thead><tr><th>中文</th><th>主格 (Subject)</th><th>宾格 (Object)</th></tr></thead><tbody><tr><td>我</td><td>I</td><td>me</td></tr><tr><td>我们</td><td>we</td><td>us</td></tr><tr><td>你</td><td>you</td><td>you</td></tr><tr><td>你们</td><td>you</td><td>you</td></tr><tr><td>他</td><td>he</td><td>him</td></tr><tr><td>他们（男性）</td><td>they</td><td>them</td></tr><tr><td>她</td><td>she</td><td>her</td></tr><tr><td>她们（女性）</td><td>they</td><td>them</td></tr><tr><td>它</td><td>it</td><td>it</td></tr><tr><td>它们</td><td>they</td><td>them</td></tr></tbody></table><h3 id="人称代词的”格”"><a href="#人称代词的”格”" class="headerlink" title="人称代词的”格”"></a>人称代词的”格”</h3><p>I saw him. He also saw me.</p><h3 id="主格-宾格的常见疑问"><a href="#主格-宾格的常见疑问" class="headerlink" title="主格,宾格的常见疑问"></a>主格,宾格的常见疑问</h3><p><strong>you and I 作主语(主格)</strong><br>You and I saw him.<br>你和我看见了他，<br><strong>you and me 作宾语(宾格)</strong><br>He saw you and me.<br>他看见了你和我.<br><strong>口语化</strong><br><del>Me and my friends went there.</del><br><del>我朋友和我去了那里</del><br>My friends and I Went there.<br>我朋友和我去了那里</p><h2 id="物主代词"><a href="#物主代词" class="headerlink" title="物主代词"></a>物主代词</h2><p><strong>my</strong><br>形容或限定之后的名词，被称为：<strong>[[形容词]]性物主代词</strong><br>It is my carrot.<br>它是我的胡萝卜<br><strong>mine</strong><br><strong>名词性物主代词</strong><br>Thee carrot is mine.</p><table><thead><tr><th>中文</th><th>形容词性物主代词 (Adjective)</th><th>名词性物主代词 (Pronoun)</th></tr></thead><tbody><tr><td>我的</td><td>my</td><td>mine</td></tr><tr><td>我们的</td><td>our</td><td>ours</td></tr><tr><td>你的</td><td>your</td><td>yours</td></tr><tr><td>你们的</td><td>your</td><td>yours</td></tr><tr><td>他的</td><td>his</td><td>his</td></tr><tr><td>他们的（男性）</td><td>their</td><td>theirs</td></tr><tr><td>她的</td><td>her</td><td>hers</td></tr><tr><td>她们的（女性）</td><td>their</td><td>theirs</td></tr><tr><td>它的</td><td>its</td><td>its</td></tr><tr><td>它们的</td><td>their</td><td>theirs</td></tr></tbody></table><h2 id="反身代词"><a href="#反身代词" class="headerlink" title="反身代词"></a>反身代词</h2><p>I saw myself.<br>我看见了我自己</p><table><thead><tr><th>中文</th><th>反身代词 (Reflexive Pronoun)</th></tr></thead><tbody><tr><td>我自己</td><td>myself</td></tr><tr><td>我们自己</td><td>ourselves</td></tr><tr><td>你自己</td><td>yourself</td></tr><tr><td>你们自己</td><td>yourselves</td></tr><tr><td>他自己</td><td>himself</td></tr><tr><td>他们自己</td><td>themselves</td></tr><tr><td>她自己</td><td>herself</td></tr><tr><td>她们自己</td><td>themselves</td></tr><tr><td>它自己</td><td>itself</td></tr><tr><td>它们自己</td><td>themselves</td></tr></tbody></table><h2 id="强调代词"><a href="#强调代词" class="headerlink" title="强调代词"></a>强调代词</h2><p>The rabbit washed <span style="background:rgba(3, 135, 102, 0.2)">himself</span>.<br>兔子把自己洗白白.（反身代词用法；<span style="background:rgba(3, 135, 102, 0.2)">作宾语</span>）<br>(强调代词;作状语)<br>The rabbit washed the carrots himself<br>兔子自己洗了胡萝卜.（强调代词；<span style="background:rgba(3, 135, 102, 0.2)">做状语</span>）</p><h2 id="相互代词"><a href="#相互代词" class="headerlink" title="相互代词"></a>相互代词</h2><p>We should help each other.（帮助是相互的）<br><strong>传统用法</strong><br>each other 两者之间<br>one another 三者之间&#x2F;三者以上之间</p><h2 id="指示代词"><a href="#指示代词" class="headerlink" title="指示代词"></a>指示代词</h2><blockquote><p>诸如”这，“那”的用来指示某个人或物的词，也是代词的一种</p></blockquote><p>后面也可以直接加名词</p><p><strong>指代离说话人较近的人或物</strong><br>This is a rabbit. 这是一只兔子.<br>These are carrots. 这些是胡萝卜.<br><strong>指代离说话人较远的人或物</strong><br>That is a wolf. 那是一只狼.<br>Those are apples. 那些是苹果</p><h2 id="不定代词"><a href="#不定代词" class="headerlink" title="不定代词"></a>不定代词</h2><h3 id="many（修饰-代替可数名词复数）"><a href="#many（修饰-代替可数名词复数）" class="headerlink" title="many（修饰&#x2F;代替可数名词复数）"></a>many（修饰&#x2F;代替可数名词复数）</h3><ul><li>例：many rabbits<ul><li>翻译：许多兔子</li></ul></li></ul><h3 id="much（修饰-代替不可数名词）"><a href="#much（修饰-代替不可数名词）" class="headerlink" title="much（修饰&#x2F;代替不可数名词）"></a>much（修饰&#x2F;代替不可数名词）</h3><ul><li>例：much water<ul><li>翻译：许多水</li></ul></li></ul><h3 id="a-few（可数名词复数，肯定）"><a href="#a-few（可数名词复数，肯定）" class="headerlink" title="a few（可数名词复数，肯定）"></a>a few（可数名词复数，肯定）</h3><ul><li>例：a few carrots<ul><li>翻译：一些胡萝卜</li></ul></li></ul><h3 id="few（可数名词数，否定）"><a href="#few（可数名词数，否定）" class="headerlink" title="few（可数名词数，否定）"></a>few（可数名词数，否定）</h3><ul><li>例：few carrots<ul><li>翻译：很少胡萝卜</li></ul></li></ul><h3 id="a-little（不可数名词，肯定）"><a href="#a-little（不可数名词，肯定）" class="headerlink" title="a little（不可数名词，肯定）"></a>a little（不可数名词，肯定）</h3><ul><li>例：a little water<ul><li>翻译：一点水</li></ul></li></ul><h3 id="little（不可数名词，否定）"><a href="#little（不可数名词，否定）" class="headerlink" title="little（不可数名词，否定）"></a>little（不可数名词，否定）</h3><ul><li>例：little water<ul><li>翻译：很少水</li></ul></li></ul><h3 id="some（一般用于肯定句-期望肯定回答的疑问句）"><a href="#some（一般用于肯定句-期望肯定回答的疑问句）" class="headerlink" title="some（一般用于肯定句&#x2F;期望肯定回答的疑问句）"></a>some（一般用于肯定句&#x2F;期望肯定回答的疑问句）</h3><ul><li>例1：The rabbit needs some carrots.<ul><li>翻译：兔子需要一些胡萝卜</li></ul></li><li>例2：Would you like some coffee?<ul><li>翻译：你想要一些咖啡吗？</li></ul></li></ul><h3 id="any（用于否定句-一般疑问句，或表示“任何”）"><a href="#any（用于否定句-一般疑问句，或表示“任何”）" class="headerlink" title="any（用于否定句&#x2F;一般疑问句，或表示“任何”）"></a>any（用于否定句&#x2F;一般疑问句，或表示“任何”）</h3><ul><li>例1：Does the rabbit need any carrots?<ul><li>翻译：兔子需要一些胡萝卜吗？</li></ul></li><li>例2：The rabbit doesn’t need any carrots.<ul><li>翻译：兔子不需要胡萝卜</li></ul></li><li>例3：The rabbit can eat any carrot.<ul><li>翻译：兔子可以吃任何一个胡萝卜</li></ul></li></ul><h3 id="each（每个，作主语时单数；适用于两个及以上）"><a href="#each（每个，作主语时单数；适用于两个及以上）" class="headerlink" title="each（每个，作主语时单数；适用于两个及以上）"></a>each（每个，作主语时单数；适用于两个及以上）</h3><ul><li>例1：There are many carrots. Each is big.<ul><li>翻译：这有很多胡萝卜，每个都很大</li></ul></li><li>例2：There are many carrots on each side of the street.<ul><li>翻译：街道两旁有许多胡萝卜</li></ul></li></ul><h3 id="every（每个，用于三者及以上，不单独作主语）"><a href="#every（每个，用于三者及以上，不单独作主语）" class="headerlink" title="every（每个，用于三者及以上，不单独作主语）"></a>every（每个，用于三者及以上，不单独作主语）</h3><ul><li>例：There are many carrots. <del>Every is big.</del><ul><li>翻译：这有很多胡萝卜（不能用 every 作主语）</li></ul></li></ul><h3 id="either（两者中任一，谓语用单数）"><a href="#either（两者中任一，谓语用单数）" class="headerlink" title="either（两者中任一，谓语用单数）"></a>either（两者中任一，谓语用单数）</h3><ul><li>例1：Give the rabbit this or that carrot. Either is good.<ul><li>翻译：给兔子这根或那根胡萝卜，（两者中）哪一个都好</li></ul></li><li>例2：Either of the carrots is good.<ul><li>翻译：（两个）胡萝卜哪一个都很好</li></ul></li></ul><h3 id="neither（两者都不，谓语用单数）"><a href="#neither（两者都不，谓语用单数）" class="headerlink" title="neither（两者都不，谓语用单数）"></a>neither（两者都不，谓语用单数）</h3><ul><li>例1：Don’t give the rabbit this or that carrot. Neither is good.<ul><li>翻译：不要给兔子这根或那根胡萝卜，（两者中）哪一个都不好</li></ul></li><li>例2：Neither of the carrots is good.<ul><li>翻译：（两个）胡萝卜哪一个都不好</li></ul></li></ul><h3 id="both（两者都）"><a href="#both（两者都）" class="headerlink" title="both（两者都）"></a>both（两者都）</h3><ul><li>例：Both of the two rabbits are cute.<ul><li>翻译：两只兔子都很可爱</li></ul></li></ul><h3 id="all（三者及以上都）"><a href="#all（三者及以上都）" class="headerlink" title="all（三者及以上都）"></a>all（三者及以上都）</h3><ul><li>例：All of the rabbits are cute.<ul><li>翻译：全部兔子都很可爱</li></ul></li></ul><h3 id="other（另外的，其他的）"><a href="#other（另外的，其他的）" class="headerlink" title="other（另外的，其他的）"></a>other（另外的，其他的）</h3><ul><li>例：I like this carrot. I don’t like other carrots.<ul><li>翻译：我喜欢这根胡萝卜，不喜欢其他胡萝卜</li></ul></li></ul><h3 id="the-other（两者中的另一个）"><a href="#the-other（两者中的另一个）" class="headerlink" title="the other（两者中的另一个）"></a>the other（两者中的另一个）</h3><ul><li>例：This carrot is bigger than the other carrot.<ul><li>翻译：这根胡萝卜比另一根胡萝卜大</li></ul></li></ul><h3 id="another（三者及以上的另一个）"><a href="#another（三者及以上的另一个）" class="headerlink" title="another（三者及以上的另一个）"></a>another（三者及以上的另一个）</h3><ul><li>例：The rabbit doesn’t like this carrot. Give him another carrot&#x2F;one.<ul><li>翻译：兔子不喜欢这个胡萝卜，给他另一个</li></ul></li></ul><h3 id="复合不定代词（every-some-any-no-开头）"><a href="#复合不定代词（every-some-any-no-开头）" class="headerlink" title="复合不定代词（every-, some-, any-, no- 开头）"></a>复合不定代词（every-, some-, any-, no- 开头）</h3><table><thead><tr><th align="left">前缀</th><th align="left">表达含义</th><th align="left">示例</th></tr></thead><tbody><tr><td align="left">every-</td><td align="left">每个</td><td align="left">everyone（每个人）</td></tr><tr><td align="left">some-</td><td align="left">某个&#x2F;一些</td><td align="left">someone（某人）</td></tr><tr><td align="left">any-</td><td align="left">任意&#x2F;任何</td><td align="left">anyone（任何人）</td></tr><tr><td align="left">no-</td><td align="left">没有一个</td><td align="left">no one（没有人）</td></tr></tbody></table><ul><li><strong>形容词修饰复合不定代词要后置</strong>：<ul><li>The rabbit has something important to do.</li><li>兔子有重要的事情要做。</li></ul></li></ul><h2 id="疑问代词（一般放在句首）"><a href="#疑问代词（一般放在句首）" class="headerlink" title="疑问代词（一般放在句首）"></a>疑问代词（一般放在句首）</h2><h3 id="Who（主语）"><a href="#Who（主语）" class="headerlink" title="Who（主语）"></a>Who（主语）</h3><ul><li>含义：谁（作主语）</li><li>例句：Who saw the rabbit?<ul><li>翻译：谁看见兔子了？</li></ul></li></ul><h3 id="Whom（宾语）"><a href="#Whom（宾语）" class="headerlink" title="Whom（宾语）"></a>Whom（宾语）</h3><ul><li>含义：谁（作宾语）</li><li>例句：<ul><li>Whom did the rabbit see?<ul><li>翻译：兔子看见了谁？</li></ul></li><li>✅ 可用 Who 替代：Who did the rabbit see?<ul><li>翻译：兔子看见了谁？</li></ul></li></ul></li><li>❗ 当 whom 是[[介词]]宾语时必须紧跟[[介词]]：<ul><li>From whom did the rabbit get the carrots?<ul><li>翻译：兔子从谁那得到了胡萝卜？</li></ul></li><li>✅ 口语可用 who + [[介词]]后置：<ul><li>Who did the rabbit get the carrots from?</li></ul></li></ul></li></ul><h3 id="What"><a href="#What" class="headerlink" title="What"></a>What</h3><ul><li>含义：什么</li><li>例句：What did the rabbit see?<ul><li>翻译：兔子看见了什么？</li></ul></li></ul><h3 id="Which"><a href="#Which" class="headerlink" title="Which"></a>Which</h3><ul><li>含义：哪一个（有范围）</li><li>例句：Which is the best carrot?<ul><li>翻译：哪一个是最好的胡萝卜？</li></ul></li></ul><h3 id="Whose"><a href="#Whose" class="headerlink" title="Whose"></a>Whose</h3><ul><li>含义：谁的（所有者属性）</li><li>例句：Whose is this carrot?<ul><li>翻译：这是谁的胡萝卜？</li></ul></li></ul><h2 id="连接代词"><a href="#连接代词" class="headerlink" title="连接代词"></a>连接代词</h2><table><thead><tr><th align="center">连接代词</th><th align="center">含义</th><th align="center">从句中作用</th><th align="center">示例句</th></tr></thead><tbody><tr><td align="center"><strong>what</strong></td><td align="center">……的事物（内容）</td><td align="center">主语、宾语</td><td align="center">What he said is true.<br>他所说的是真的</td></tr><tr><td align="center"><strong>who</strong></td><td align="center">谁</td><td align="center">主语</td><td align="center">Who comes first wins.<br>谁先到谁赢。</td></tr><tr><td align="center"><strong>whom</strong></td><td align="center">谁（宾语）</td><td align="center">宾语</td><td align="center">Whom she invited is unknown.<br>她邀请的是谁还不知道。</td></tr><tr><td align="center"><strong>whose</strong></td><td align="center">谁的</td><td align="center">定语</td><td align="center">Whose book it is doesn’t matter.<br>这是谁的书并不重要。</td></tr><tr><td align="center"><strong>which</strong></td><td align="center">哪一个</td><td align="center">主语&#x2F;宾语</td><td align="center">Which is better is hard to say.<br>哪个更好很难说。</td></tr><tr><td align="center"><strong>whoever</strong></td><td align="center">无论谁，……的人</td><td align="center">主语</td><td align="center">Whoever comes will be welcomed.<br>无论谁来都欢迎。</td></tr><tr><td align="center"><strong>whatever</strong></td><td align="center">无论什么<br>所有……的事物</td><td align="center">主语&#x2F;宾语</td><td align="center">Whatever you do is fine.<br>无论你做什么都行。</td></tr><tr><td align="center"><strong>whichever</strong></td><td align="center">无论哪一个</td><td align="center">主语</td><td align="center">Whichever you choose is okay.<br>你选哪个都行。</td></tr></tbody></table><h2 id="关系代词"><a href="#关系代词" class="headerlink" title="关系代词"></a>关系代词</h2><p>^ecf0ea</p><blockquote><p>引导**[[从句#^dc938b|定语从句&#x2F;形容词从句]]**</p></blockquote><p>The rabbit who became hungry ate a carrot.<br>饿了的兔子吃了根胡萝卜.<br>The rabbit whom I saw ate a carrot.<br>我看见的那只兔子吃了根胡萝卜.<br>The rabbit whose ears are long ate a carrot.<br>那只耳朵长的兔子吃了根胡萝卜<br>The rabbit ate the carrot which&#x2F;that I bought.<br>兔子吃了我买的胡萝卜.<br>The rabbit ate the carrot, as was expected.<br>兔子如预料的那样吃了胡萝卜.</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>副词</title>
    <link href="/posts/1137847937/"/>
    <url>/posts/1137847937/</url>
    
    <content type="html"><![CDATA[<h2 id="副词的用法"><a href="#副词的用法" class="headerlink" title="副词的用法"></a>副词的用法</h2><h3 id="修饰哪些词性"><a href="#修饰哪些词性" class="headerlink" title="修饰哪些词性"></a>修饰哪些词性</h3><h4 id="副词修饰动词"><a href="#副词修饰动词" class="headerlink" title="副词修饰动词"></a>副词修饰动词</h4><p>This rabbit runs fast.<br>这只兔子跑得快</p><h4 id="副词修饰形容词和副词"><a href="#副词修饰形容词和副词" class="headerlink" title="副词修饰形容词和副词"></a>副词修饰形容词和副词</h4><p>This is a very fast rabbit.(修饰形容词)<br>这是只很快速的兔子<br>This rabbit runs very fast.(修饰副词)<br>这只兔子跑得很快</p><h4 id="副词修饰名词"><a href="#副词修饰名词" class="headerlink" title="副词修饰名词"></a>副词修饰名词</h4><p>This rabbit here runs very fast.<br>这里的这只兔子跑得很快</p><h4 id="副词修饰句子"><a href="#副词修饰句子" class="headerlink" title="副词修饰句子"></a>副词修饰句子</h4><p><span style="background:#d2cbff">Obviously</span>, <span style="background:rgba(3, 135, 102, 0.2)">this rabbit here runs<br>very fast.</span><br>显然，这里的这只兔子跑得很快.</p><h3 id="在句中作什么成分"><a href="#在句中作什么成分" class="headerlink" title="在句中作什么成分"></a>在句中作什么成分</h3><h4 id="状语-定语"><a href="#状语-定语" class="headerlink" title="状语,定语"></a>状语,定语</h4><p>This is a <span style="background:rgba(240, 107, 5, 0.2)">very</span> fast rabbit.<br>这是只很快速的兔子<br><span style="background:rgba(240, 107, 5, 0.2)">Obviously</span>, this<br>rabbit <span style="background:rgba(74, 82, 199, 0.2)">here</span> runs <span style="background:rgba(240, 107, 5, 0.2)"><br>very</span> <span style="background:rgba(240, 107, 5, 0.2)">fast</span>.<br>显然,这里的这只兔子跑得很快</p><h4 id="表语"><a href="#表语" class="headerlink" title="表语"></a>表语</h4><blockquote><p>做表语的副词只能用在（变位的）系动词be之后</p></blockquote><p>The wolf is abroad.（主语补语）<br>狼在国外.</p><h4 id="宾语补语"><a href="#宾语补语" class="headerlink" title="宾语补语"></a>宾语补语</h4><p>Let me in!<br>让我进来!</p><h3 id="副词的形式"><a href="#副词的形式" class="headerlink" title="副词的形式"></a>副词的形式</h3><h4 id="一、副词-形容词-ly，意思基本相同（常见规律）"><a href="#一、副词-形容词-ly，意思基本相同（常见规律）" class="headerlink" title="一、副词 &#x3D; 形容词 + -ly，意思基本相同（常见规律）"></a>一、副词 &#x3D; 形容词 + -ly，意思基本相同（常见规律）</h4><table><thead><tr><th>形容词</th><th>副词</th><th>中文意思</th></tr></thead><tbody><tr><td>possible</td><td>possibly</td><td>可能的 → 可能地</td></tr><tr><td>quick</td><td>quickly</td><td>快的 → 快速地</td></tr><tr><td>careful</td><td>carefully</td><td>小心的 → 小心地</td></tr></tbody></table><p>规律：大多数副词由形容词加 <strong>-ly</strong> 构成，意义一致，表示<strong>方式、程度、频率</strong>等。</p><hr><h4 id="二、副词-形容词-ly，但意义发生变化（意义不同）"><a href="#二、副词-形容词-ly，但意义发生变化（意义不同）" class="headerlink" title="二、副词 &#x3D; 形容词 + -ly，但意义发生变化（意义不同）"></a>二、副词 &#x3D; 形容词 + -ly，但意义发生变化（意义不同）</h4><table><thead><tr><th>形容词</th><th>副词</th><th>不同点说明</th></tr></thead><tbody><tr><td>pretty</td><td>pretty</td><td><strong>形容词</strong>：漂亮的  <br><strong>副词</strong>：相当、颇为（表示程度）</td></tr><tr><td>large</td><td>largely</td><td><strong>形容词</strong>：大的  <br><strong>副词</strong>：主要地、大部分地</td></tr><tr><td>hard</td><td>hardly</td><td><strong>形容词</strong>：努力的、艰难的  <br><strong>副词</strong>：几乎不（完全不同）</td></tr><tr><td>late</td><td>lately</td><td><strong>形容词</strong>：迟的  <br><strong>副词</strong>：最近（时间）</td></tr></tbody></table><p>举例：</p><ul><li><p><strong>This is a pretty smart rabbit.</strong><br>这是只<strong>相当聪明的</strong>兔子。（pretty 是副词）</p></li><li><p><strong>This is a fairly pretty wolf.</strong><br>这是一只<strong>相当漂亮的</strong>狼。（fairly 是副词，修饰 pretty）</p></li></ul><hr><h4 id="三、形容词和副词拼写相同，词性不同，意义一致或近似"><a href="#三、形容词和副词拼写相同，词性不同，意义一致或近似" class="headerlink" title="三、形容词和副词拼写相同，词性不同，意义一致或近似"></a>三、形容词和副词拼写相同，词性不同，意义一致或近似</h4><table><thead><tr><th>词</th><th>词性</th><th>意义</th></tr></thead><tbody><tr><td>fast</td><td>形容词&#x2F;副词</td><td>快的 &#x2F; 快速地</td></tr><tr><td>hard</td><td>形容词&#x2F;副词</td><td>艰难的 &#x2F; 努力地</td></tr><tr><td>late</td><td>形容词&#x2F;副词</td><td>晚的 &#x2F; 晚地</td></tr></tbody></table><p>举例：</p><ul><li><p><strong>He runs fast.</strong>（副词，跑得快）</p></li><li><p><strong>He is a fast runner.</strong>（形容词，跑得快的人）</p></li></ul><hr><h4 id="四、形容词和副词拼写相同，但意义不同（同形异义）"><a href="#四、形容词和副词拼写相同，但意义不同（同形异义）" class="headerlink" title="四、形容词和副词拼写相同，但意义不同（同形异义）"></a>四、形容词和副词拼写相同，但意义不同（同形异义）</h4><table><thead><tr><th>词</th><th>形容词意义</th><th>副词意义</th></tr></thead><tbody><tr><td>hard</td><td>艰难的</td><td>努力地</td></tr><tr><td>pretty</td><td>漂亮的</td><td>相当、很</td></tr><tr><td>late</td><td>晚的</td><td>最近（用 lately）或晚地（用 late）</td></tr></tbody></table><h3 id="副词的种类"><a href="#副词的种类" class="headerlink" title="副词的种类"></a>副词的种类</h3><h4 id="方式副词"><a href="#方式副词" class="headerlink" title="方式副词"></a>方式副词</h4><p>可以位于：句首／句中／句尾<br>Suddenly, the driver turned left.<br>The driver suddenly turned left.<br>The driver turned left suddenly<br>司机突然左转.</p><h4 id="程度副词"><a href="#程度副词" class="headerlink" title="程度副词"></a>程度副词</h4><p>程度副词+形容词&#x2F;副词</p><h4 id="地点副词"><a href="#地点副词" class="headerlink" title="地点副词"></a>地点副词</h4><blockquote><p>一般位于句尾；表强调时也可位于句首</p></blockquote><p>The rabbit eats carrots indoors&#x2F;outdoors<br>这兔子在室内&#x2F;室外吃胡萝卜.<br>The rabbit eats carrots up stairs down stairs.<br>这兔子在楼上&#x2F;楼下吃胡萝卜</p><h4 id="时间副词"><a href="#时间副词" class="headerlink" title="时间副词"></a>时间副词</h4><p>The rabbit ate some carrots yesterday.<br>这兔子昨天吃了些胡萝卜.<br>The rabbit is eating some carrots now.<br>这兔子正在吃些胡萝卜，<br>The rabbit will eat some carrots later.<br>这兔子之后要吃些胡萝卜.</p><h4 id="频率副词"><a href="#频率副词" class="headerlink" title="频率副词"></a>频率副词</h4><blockquote><p>大多位于行为动词之前,be动词&#x2F;助动词&#x2F;情态动词之后</p></blockquote><p>The rabbit eats carrots every day.<br>兔子每天都吃胡萝卜<br>Sometimes, the rabbit eats carrots.<br>这兔子有时吃胡萝卜<br>The rabbit usually eats carrots.<br>这兔子经常吃胡萝卜<br>The rabbit eats carrots three times a day.<br>这兔子一天三顿吃胡萝卜<br>I will always love you.</p><h4 id="疑问副词"><a href="#疑问副词" class="headerlink" title="疑问副词"></a>疑问副词</h4><p>用来构成特殊疑问句的副词</p><ol><li><strong>How</strong>- 对方式提问<ul><li>英文：How does the rabbit eat carrots?</li><li>中文：这兔子怎么吃胡萝卜？</li></ul></li><li><strong>Where</strong>- 对地点提问<ul><li>英文：Where does the rabbit eat carrots?</li><li>中文：这兔子在哪儿吃胡萝卜？</li></ul></li><li><strong>When</strong>- 对时间提问<ul><li>英文：When does the rabbit eat carrots?</li><li>中文：这兔子啥时候吃胡萝卜？</li></ul></li><li><strong>Why</strong>- 对原因提问<ul><li>英文：Why does the rabbit eat carrots?</li><li>中文：这兔子为什么吃胡萝卜？</li></ul></li></ol><h4 id="连接副词"><a href="#连接副词" class="headerlink" title="连接副词"></a>连接副词</h4><blockquote><p>不要和疑问副词含义混淆</p></blockquote><p><strong>引导名词性从句</strong>的副词<br>How the rabbit eats carrots is interesting.<br>这兔子如何吃胡萝卜这件事很有趣<br>I don’t know where the rabbit eats carrots.<br>我不知道这兔子在哪吃胡萝卜，<br>That is why the rabbit eats carrots.<br>这就是为什么这兔子吃胡萝卜</p><h4 id="关系副词"><a href="#关系副词" class="headerlink" title="关系副词"></a>关系副词</h4><blockquote><p>可以引导形容词性从句</p></blockquote><p>This was the place e <strong>where</strong> the rabbit ate the carrot.<br>这就是兔子吃掉胡萝卜的地方.<br>This is the reason <strong>why</strong> the rabbit ate the carrot.<br>这就是兔子吃掉胡萝卜的原因<br>That was the day <strong>when</strong> the rabbit ate the carrot for the first time.<br>那就是兔子第一次吃胡萝卜的那天</p><h4 id="句子副词"><a href="#句子副词" class="headerlink" title="句子副词"></a>句子副词</h4><blockquote><p>一般在句子开头，用逗号和主句分开</p></blockquote><p>Obviously, this rabbit here runs very fast.<br>显然,这里的这只兔子跑得很快</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>前后缀集合</title>
    <link href="/posts/3873374774/"/>
    <url>/posts/3873374774/</url>
    
    <content type="html"><![CDATA[<h3 id="一-前缀"><a href="#一-前缀" class="headerlink" title="(一) 前缀"></a>(一) 前缀</h3><ol><li><p><strong>anti-</strong> 反对</p><ul><li><p>抗日战争 (anti-Japanese war)</p></li><li><p>反坦克武器 (anti-tank weapons)</p></li></ul></li><li><p><strong>arch-</strong> 主要的</p><ul><li>主要敌人 (arch-enemy)</li></ul></li><li><p><strong>auto-</strong> 自动的</p><ul><li><p>小汽车 (automobile)</p></li><li><p>自传 (autobiography)</p></li></ul></li><li><p><strong>bi-</strong> 双</p><ul><li><p>自行车 (bicycle)</p></li><li><p>双语的 (bilingual)</p></li></ul></li><li><p><strong>by-</strong> 在旁</p><ul><li><p>旁观者 (bystander)</p></li><li><p>副产品 (by-product)</p></li></ul></li><li><p><strong>co-</strong> 共同</p><ul><li><p>合作 (co-operation)</p></li><li><p>共存 (co-existence)</p></li></ul></li><li><p><strong>counter-</strong> 反</p><ul><li><p>反攻 (counter-attack)</p></li><li><p>反主流文化 (counterculture)</p></li></ul></li><li><p><strong>de-</strong> 除去，否定</p><ul><li>分散 (decentralization)</li></ul></li><li><p><strong>dis-</strong> 否定</p><ul><li><p>发现 (discover)</p></li><li><p>混乱 (disorder)</p></li></ul></li><li><p><strong>en-, em-</strong> 使成为</p><ul><li><p>使能够 (enable)</p></li><li><p>奴役 (enslave)</p></li></ul></li><li><p><strong>extra-</strong> 额外</p><ul><li>非常的 (extraordinary)</li></ul></li><li><p><strong>for-, fore-</strong> 先，前，预</p><ul><li><p>向前 (forward)</p></li><li><p>预见 (foresee)</p></li></ul></li><li><p><strong>in-, il-, im-, ir-</strong> 不，非</p><ul><li><p>非正式的 (informal)</p></li><li><p>不完全的 (incomplete)</p></li><li><p>不合法的 (illegal)</p></li><li><p>不规则的 (irregular)</p></li></ul></li><li><p><strong>inter-</strong> 间，相互</p><ul><li><p>会见 (interview)</p></li><li><p>国际的 (international)</p></li></ul></li><li><p><strong>mal-</strong> 恶</p><ul><li>虐待 (maltreat)</li></ul></li><li><p><strong>micro-</strong> 微</p><ul><li><p>显微镜 (microscope)</p></li><li><p>微波 (microwave)</p></li></ul></li><li><p><strong>mid-</strong> 中</p><ul><li><p>半夜 (mid-night)</p></li><li><p>中秋的 (mid-autumn)</p></li></ul></li><li><p><strong>mis-</strong> 误</p><ul><li><p>误会 (misunderstand)</p></li><li><p>误用 (misuse)</p></li></ul></li><li><p><strong>multi-</strong> 多</p><ul><li>多民族的 (multi-national)</li></ul></li><li><p><strong>non-</strong> 非，不</p><ul><li><p>不存在的 (nonexistent)</p></li><li><p>不抽烟者 (non-smoker)</p></li></ul></li><li><p><strong>post-</strong> 后于</p><ul><li><p>战后的 (post-war)</p></li><li><p>后现代主义 (postmodernism)</p></li></ul></li><li><p><strong>pre-</strong> 先于</p><ul><li><p>战前的 (pre-war)</p></li><li><p>预习 (preview)</p></li></ul></li><li><p><strong>pro-</strong> 赞成，亲善</p><ul><li>亲美的 (pro-American)</li></ul></li><li><p><strong>re-</strong> 重，再，复</p><ul><li><p>复习 (review)</p></li><li><p>重写 (rewrite)</p></li></ul></li><li><p><strong>sub-</strong> 下，次</p><ul><li><p>细分 (subdivide)</p></li><li><p>零度以下气温 (sub-zero temperature)</p></li><li><p>地铁 (subway)</p></li></ul></li><li><p><strong>super-</strong> 上，超</p><ul><li>上层建筑 (super-structure)</li></ul></li><li><p><strong>tele-</strong> 远</p><ul><li><p>电话 (telephone)</p></li><li><p>望远镜 (telescope)</p></li><li><p>电视 (television)</p></li></ul></li><li><p><strong>trans-</strong> 横过，转移</p><ul><li><p>改造 (transformation)</p></li><li><p>翻译 (translate)</p></li></ul></li><li><p><strong>un-</strong> 不</p><ul><li><p>不能的 (unable)</p></li><li><p>不重要的 (unimportant)</p></li><li><p>不真实的 (untrue)</p></li></ul></li><li><p><strong>uni-</strong> 一、单</p><ul><li>划一的 (uniform)</li></ul></li></ol><h3 id="二-后缀"><a href="#二-后缀" class="headerlink" title="(二) 后缀"></a>(二) 后缀</h3><h4 id="1-名词-后缀"><a href="#1-名词-后缀" class="headerlink" title="(1) [[名词]]后缀"></a>(1) [[名词]]后缀</h4><ol><li><p><strong>-age</strong> 状态，集合</p><ul><li><p>婚姻 (marriage)</p></li><li><p>缺少 (shortage)</p></li><li><p>村庄 (village)</p></li></ul></li><li><p><strong>-an</strong> 人</p><ul><li><p>美国人 (American)</p></li><li><p>意大利人 (Italian)</p></li><li><p>非洲人 (African)</p></li></ul></li><li><p><strong>-ance, -ancy</strong> 性质，状态</p><ul><li><p>重要性 (importance)</p></li><li><p>意义 (significance)</p></li></ul></li><li><p><strong>-ant, -ent</strong> 人</p><ul><li><p>助手 (assistant)</p></li><li><p>学生 (student)</p></li></ul></li><li><p><strong>-ation, -ition</strong> 动作，状态</p><ul><li><p>决心 (determination)</p></li><li><p>工业化 (industrialization)</p></li><li><p>准备 (preparation)</p></li></ul></li><li><p><strong>-craft</strong> 技巧，工艺</p><ul><li>手工艺 (handicraft)</li></ul></li><li><p><strong>-dom</strong> 状态，领界</p><ul><li><p>自由 (freedom)</p></li><li><p>王国 (kingdom)</p></li></ul></li><li><p><strong>-ce</strong> 被动</p><ul><li><p>雇员 (employee)</p></li><li><p>收件人 (addressee)</p></li></ul></li><li><p><strong>-eer</strong> 人</p><ul><li><p>工程师 (engineer)</p></li><li><p>志愿者 (volunteer)</p></li></ul></li><li><p><strong>-ence, -ency</strong> 抽象[[名词]]</p><ul><li><p>依靠 (dependence)</p></li><li><p>卓越 (excellence)</p></li></ul></li><li><p><strong>-er</strong> 人，动作者</p><ul><li><p>战士 (fighter)</p></li><li><p>工人 (worker)</p></li><li><p>作家 (writer)</p></li><li><p>设计者 (designer)</p></li></ul></li><li><p><strong>-ese</strong> 人，语言</p><ul><li><p>中国人 (Chinese)</p></li><li><p>日文 (Japanese)</p></li></ul></li><li><p><strong>-ess</strong> 女性</p><ul><li><p>女演员 (actress)</p></li><li><p>公主 (princess)</p></li></ul></li><li><p><strong>-ful</strong> 充满</p><ul><li><p>一把 (handful)</p></li><li><p>一抱 (armful)</p></li></ul></li><li><p><strong>-hood</strong> 身份，境遇，状态</p><ul><li><p>童年 (childhood)</p></li><li><p>可能性 (likelihood)</p></li><li><p>成年期 (manhood)</p></li></ul></li><li><p><strong>-ian</strong> 人</p><ul><li><p>音乐家 (musician)</p></li><li><p>技术员 (technician)</p></li><li><p>魔术师 (magician)</p></li></ul></li><li><p><strong>-ity</strong> 抽象名词</p><ul><li><p>可能性 (possibility)</p></li><li><p>能力 (capability)</p></li></ul></li><li><p><strong>-man</strong> 人</p><ul><li><p>英国人 (Englishman)</p></li><li><p>邮递员 (postman)</p></li></ul></li><li><p><strong>-ment</strong> 运动，结果</p><ul><li><p>运动 (movement)</p></li><li><p>发展 (development)</p></li></ul></li><li><p><strong>-ness</strong> 状态，性质</p><ul><li><p>和善 (kindness)</p></li><li><p>小心 (carefulness)</p></li><li><p>心不在焉 (absent-mindedness)</p></li></ul></li><li><p><strong>-or</strong> 人，动作者</p><ul><li><p>男演员 (actor)</p></li><li><p>编辑 (editor)</p></li><li><p>拖拉机 (tractor)</p></li></ul></li><li><p><strong>-ry, -ery</strong> 行为，工作，性质，工作地点，货物种类，境遇等</p><ul><li><p>勇敢 (bravery)</p></li><li><p>托儿所 (nursery)</p></li><li><p>烹调 (cookery)</p></li></ul></li><li><p><strong>-ship</strong> 状态，身份</p><ul><li><p>友谊 (friendship)</p></li><li><p>苦难 (hardship)</p></li><li><p>领导 (leadership)</p></li></ul></li><li><p><strong>-tion</strong> 动作，状态</p><ul><li><p>注意 (attention)</p></li><li><p>行动 (action)</p></li><li><p>革命 (revolution)</p></li></ul></li><li><p><strong>-ty</strong> 抽象名词</p><ul><li><p>残酷 (cruelty)</p></li><li><p>忠实 (loyalty)</p></li></ul></li><li><p><strong>-ure</strong> 结果，动作</p><ul><li><p>快乐 (pleasure)</p></li><li><p>压力 (pressure)</p></li></ul></li></ol><h4 id="2-形容词-后缀"><a href="#2-形容词-后缀" class="headerlink" title="(2) [[形容词]]后缀"></a>(2) [[形容词]]后缀</h4><ol><li><p><strong>-able, -ible</strong> 能够</p><ul><li><p>难忘的 (unforgettable)</p></li><li><p>负责的 (responsible)</p></li></ul></li><li><p><strong>-al</strong> 的</p><ul><li><p>文化的 (cultural)</p></li><li><p>国家 (national)</p></li><li><p>农业的 (agricultural)</p></li></ul></li><li><p><strong>-an</strong> (地， 人)的</p><ul><li><p>俄罗斯的 (Russian)</p></li><li><p>美国的 (American)</p></li></ul></li><li><p><strong>-ed</strong> 有，像</p><ul><li><p>有才华的 (talented)</p></li><li><p>金色的 (golden)</p></li><li><p>木制的 (wooden)</p></li></ul></li><li><p><strong>-en</strong> 的</p><ul><li><p>金色的 (golden)</p></li><li><p>木制的 (wooden)</p></li></ul></li><li><p><strong>-ern</strong> (表示方向的)</p><ul><li><p>北方的 (northern)</p></li><li><p>东方的 (eastern)</p></li><li><p>南方的 (southern)</p></li></ul></li><li><p><strong>-ese</strong> (地，人)的</p><ul><li><p>中国的 (Chinese)</p></li><li><p>日本的 (Japanese)</p></li></ul></li><li><p><strong>-ful</strong> 充满</p><ul><li><p>小心的 (careful)</p></li><li><p>美丽的 (beautiful)</p></li><li><p>强有力的 (powerful)</p></li></ul></li><li><p><strong>-ic, -ical</strong> 的</p><ul><li><p>经济的 (economic)</p></li><li><p>政治的 (political)</p></li><li><p>语法的 (grammatical)</p></li></ul></li><li><p><strong>-ish</strong> 属于，稍微</p><ul><li><p>书本气的 (bookish)</p></li><li><p>稍黄的 (yellowish)</p></li><li><p>自私的 (selfish)</p></li><li><p>幼稚的 (childish)</p></li></ul></li><li><p><strong>-ive</strong> 性，倾向</p><ul><li><p>积极的 (active)</p></li><li><p>集体的 (collective)</p></li></ul></li><li><p><strong>-less</strong> 无</p><ul><li><p>无所畏惧的 (fearless)</p></li><li><p>不小心的 (careless)</p></li><li><p>无用的 (useless)</p></li><li><p>无意义的 (meaningless)</p></li></ul></li><li><p><strong>-like</strong> 如</p><ul><li>儿童般的 (childlike)</li></ul></li><li><p><strong>-ly</strong> 品质，的</p><ul><li><p>友好的 (friendly)</p></li><li><p>每星期的 (weekly)</p></li><li><p>丈夫气的 (manly)</p></li><li><p>每天的 (daily)</p></li></ul></li><li><p><strong>-ous</strong></p><ul><li><p>神经紧张的 (nervous)</p></li><li><p>危险的 (dangerous)</p></li></ul></li><li><p><strong>-some</strong> 引起，适于，易于</p><ul><li><p>烦人的 (troublesome)</p></li><li><p>令人感到厌倦的 (tiresome)</p></li></ul></li><li><p><strong>-ward</strong> 向</p><ul><li><p>向前 (forward)</p></li><li><p>向后 (backward)</p></li></ul></li><li><p><strong>-wise</strong> 方式</p><ul><li><p>同样地 (likewise)</p></li><li><p>否则 (otherwise)</p></li></ul></li></ol><h4 id="3-动词后缀"><a href="#3-动词后缀" class="headerlink" title="(3) 动词后缀"></a>(3) 动词后缀</h4><ol><li><p><strong>-ate</strong></p><ul><li>使孤立 (isolate)</li></ul></li><li><p><strong>-en</strong></p><ul><li><p>加深 (deepen)</p></li><li><p>加强 (strengthen)</p></li></ul></li><li><p><strong>-fy</strong></p><ul><li><p>简化 (simplify)</p></li><li><p>分类 (classify)</p></li></ul></li><li><p><strong>-ize, -ise</strong></p><ul><li><p>工业化 (industrialize)</p></li><li><p>使城市化 (urbanize)</p></li></ul></li></ol><h4 id="4-副词-后缀"><a href="#4-副词-后缀" class="headerlink" title="(4) [[副词]]后缀"></a>(4) [[副词]]后缀</h4><ol><li><p><strong>-ly</strong></p><ul><li><p>小心地 (carefully)</p></li><li><p>美丽地 (beautifully)</p></li><li><p>迅速地 (quickly)</p></li></ul></li><li><p><strong>-ward, -wards</strong> 向</p><ul><li><p>向前 (forward)</p></li><li><p>向后 (backward)</p></li><li><p>向上 (upwards)</p></li><li><p>向下 (downwards)</p></li></ul></li><li><p><strong>-wise</strong> 方式</p><ul><li><p>同样地 (likewise)</p></li><li><p>否则 (otherwise)</p></li></ul></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>英语</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>冠词</title>
    <link href="/posts/2581702918/"/>
    <url>/posts/2581702918/</url>
    
    <content type="html"><![CDATA[<h2 id="不定冠词"><a href="#不定冠词" class="headerlink" title="不定冠词"></a>不定冠词</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><h4 id="a"><a href="#a" class="headerlink" title="a"></a>a</h4><blockquote><p>用于辅音音素前</p></blockquote><h4 id="an"><a href="#an" class="headerlink" title="an"></a>an</h4><blockquote><p>用于元音音素前</p></blockquote><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><h4 id="泛指用法"><a href="#泛指用法" class="headerlink" title="泛指用法"></a>泛指用法</h4><p><strong>说话者和听话者可能都不知道指的是具体的哪个人或物</strong><br>I saw <span style="background:rgba(3, 135, 102, 0.2)">a</span> rabbit.<br>我看到一只兔子.(泛指某一只)<br>因此可以翻译为：我看到兔子了<br>A rabbit is smarter than a wolf.<br>兔子比狼聪明<br>A rabbit is eating a carrot.<br><strong>某一只</strong>兔子在吃一根胡萝卜.</p><hr><h4 id="表示数字"><a href="#表示数字" class="headerlink" title="表示数字"></a>表示数字</h4><p>I gave you a hundred carrots. &#x3D; one</p><hr><h4 id="表示“每”"><a href="#表示“每”" class="headerlink" title="表示“每”"></a>表示“每”</h4><p>I eat 10 carrots a day. &#x3D; every day<br>我每天吃10个胡萝卜</p><hr><h4 id="主谓一致"><a href="#主谓一致" class="headerlink" title="主谓一致"></a>主谓一致</h4><p>a teacher and video creator<br>一位老师兼视频创作者<br>a teacher and a video creator<br>一位老师和一位视频创作者</p><hr><h4 id="固定表达"><a href="#固定表达" class="headerlink" title="固定表达"></a>固定表达</h4><p>have a good time 玩得开心<br>as a result 因此;结果<br>in a hurry 匆忙地<br>all of a sudden 突然</p><hr><h2 id="定冠词"><a href="#定冠词" class="headerlink" title="定冠词"></a>定冠词</h2><h3 id="发音"><a href="#发音" class="headerlink" title="发音"></a>发音</h3><p>&#x2F;0 a&#x2F;:适用于辅音音素前.<br>&#x2F;0 z&#x2F;:适用于元音音素前.</p><h3 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h3><h4 id="特指"><a href="#特指" class="headerlink" title="特指"></a>特指</h4><h5 id="再次提到的人或事物"><a href="#再次提到的人或事物" class="headerlink" title="再次提到的人或事物"></a>再次提到的人或事物</h5><p>I saw a rabbit.The rabbit ran fast.</p><h5 id="用在-数词-164da9-序数词-和-形容词-的最高级前"><a href="#用在-数词-164da9-序数词-和-形容词-的最高级前" class="headerlink" title="用在[[数词#^164da9|序数词]]和[[形容词]]的最高级前"></a>用在[[数词#^164da9|序数词]]和[[形容词]]的最高级前</h5><p>the first rabbit<br>第一只兔子</p><h5 id="一无二的-名词-前"><a href="#一无二的-名词-前" class="headerlink" title="一无二的[[名词]]前"></a>一无二的[[名词]]前</h5><p>the sun 太阳<br>thee moon 月亮<br>the earth 地球</p><h5 id="泛指"><a href="#泛指" class="headerlink" title="泛指"></a>泛指</h5><p>I like playing <span style="background:rgba(3, 135, 102, 0.2)">the</span> piano.<br>我喜欢弹钢琴.(泛指”弹钢琴”这件事)（西洋古典乐器）<br>I like playing <span style="background:rgba(3, 135, 102, 0.2)">a</span> piano.<br>我喜欢弹钢琴.(可能有很多钢琴，随意找了一架弹)<br>I play the guitar<br>The computer has changed our way of life.<br>不推荐使用</p><h5 id="在形容词前"><a href="#在形容词前" class="headerlink" title="在形容词前"></a>在形容词前</h5><p>the + 形容词 指代一类人<br>the rich 富人<br>the poor 穷人</p><h5 id="固定表达-1"><a href="#固定表达-1" class="headerlink" title="固定表达"></a>固定表达</h5><p>all the time 一直;总是<br>by the way 顺便<br>out of the question 不可能;没门</p><h2 id="零冠词"><a href="#零冠词" class="headerlink" title="零冠词"></a>零冠词</h2><h3 id="定义-名词-前不用冠词的情况"><a href="#定义-名词-前不用冠词的情况" class="headerlink" title="定义:[[名词]]前不用冠词的情况"></a>定义:[[名词]]前不用冠词的情况</h3><h3 id="用法-2"><a href="#用法-2" class="headerlink" title="用法"></a>用法</h3><h4 id="复数泛指"><a href="#复数泛指" class="headerlink" title="复数泛指"></a>复数泛指</h4><p>Rabbits are smart.<br>兔子聪明<br>Computers have changed our way of life.<br>Water is important.(可以理解为零冠词复数泛指)</p><h4 id="泛指”概念”"><a href="#泛指”概念”" class="headerlink" title="泛指”概念”"></a>泛指”概念”</h4><p>Summer is hot.Winter is cold.<br>I want to play football<br>play erhu<br>I like geography<br>in spring</p><h4 id="专有-名词"><a href="#专有-名词" class="headerlink" title="专有[[名词]]"></a>专有[[名词]]</h4><h4 id="固定表达-2"><a href="#固定表达-2" class="headerlink" title="固定表达"></a>固定表达</h4><p>from time to time 不时地<br>face to face 面对面地<br>out of question 毫无疑问</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>介词</title>
    <link href="/posts/2084515499/"/>
    <url>/posts/2084515499/</url>
    
    <content type="html"><![CDATA[<h2 id="介词的原理"><a href="#介词的原理" class="headerlink" title="介词的原理"></a>介词的原理</h2><p>介词是为了介绍实词的虚词, 用来提供补充信息<br>preposition 前置词 介词</p><h2 id="介词的构成形式"><a href="#介词的构成形式" class="headerlink" title="介词的构成形式"></a>介词的构成形式</h2><h3 id="简单介词"><a href="#简单介词" class="headerlink" title="简单介词"></a>简单介词</h3><h3 id="短语介词"><a href="#短语介词" class="headerlink" title="短语介词"></a>短语介词</h3><blockquote><p>视作介词；不单独表完整义</p></blockquote><ul><li>by way of 通过..方式</li><li>at the end oi 在…的最后</li><li>along with 和…一起</li><li>because of 因为…</li><li>previous to …之前</li></ul><h3 id="合成介词"><a href="#合成介词" class="headerlink" title="合成介词"></a>合成介词</h3><p>into 到..之内<br>onto 到…之上<br>within 在..之内<br>notwithstanding 尽管</p><h3 id="分词介词"><a href="#分词介词" class="headerlink" title="分词介词"></a>分词介词</h3><blockquote><p>动词变的</p></blockquote><p>including prep.包括..<br>regarding prep..关于..;至于…<br>considering prep..鉴于… 考虑到…<br>given prep..考虑到…;如果..</p><h2 id="介词学习的误区"><a href="#介词学习的误区" class="headerlink" title="介词学习的误区"></a>介词学习的误区</h2><ol><li>介词意义太多，英文有些东西中文无法直接翻译，比如 in on 因此 无须过分追求一一对应</li><li>很多介词相互之间易混淆：在同一个类别里的介词有的时候看起来很像，比如in，on，at都可以表示时间或空间信息</li></ol><h2 id="介词学习的诀窍"><a href="#介词学习的诀窍" class="headerlink" title="介词学习的诀窍"></a>介词学习的诀窍</h2><p><strong>本义：根源意义;表达明确的空间含义</strong><br><strong>引申义：衍生含义;表达非空间含义</strong></p><h3 id="比如："><a href="#比如：" class="headerlink" title="比如："></a>比如：</h3><p> <strong>about</strong><br><strong>about</strong> -&gt; onbutan -&gt; on by utan -&gt; on the outside of 即”在…的外面（之处)<br><strong>关于 (外围;有涉及,非核心)</strong><br>I know something about the rabbit. <strong>我知道关于这个兔子的事儿.</strong><br><strong>大约 (从外大范围大致数数)</strong><br>There are about 20 carrots. <strong>大约有20根胡萝卜上</strong><br><strong>针对 (从外向内地解决)</strong><br>Let’s do something about the problem. <strong>让我们做些事儿解决问题</strong><br><strong>某人某事有某种特性</strong><br>There’s something dangerous about the wolf. <strong>狼有点危险的特质. (狼感觉有点危险.)</strong><br><strong>到处 (在外面来来回回)</strong><br>Stop running about! <strong>别来来回回跑!</strong></p><hr><p><strong>on</strong><br>Dinner is on me.<br>晚餐我付钱.<br>The burden of paying for dinner is on me.<br>为晚餐付钱的重任在我身上</p><hr><p><strong>beyond</strong><br>It’s beyond me.<br>我无法理解<br>It is beyond the things that I can understand.<br>这在我能理解的事情的范围之外</p><hr><p><strong>in</strong><br>一般表示在一堆东西中间，上下左右前后都能移动，说明是在一个大范围内<br><strong>空间</strong>：<br>I’m walking in the street.<br>我在大街上走<br><strong>时间：</strong><br>in a year in the month in the week</p><hr><p><strong>on</strong><br>一般指在..之上，说明有一面确定了，只能在这个平面上移动，自然范围小一点<br><strong>空间</strong>：<br>There is some trash on the street.<br>街上有些垃圾.<br><strong>时间：</strong><br>on that day on Monday On April 1st</p><hr><p><strong>at</strong><br>而at通常只在很明确的一点上<br><strong>空间</strong>：<br>Right now I’m at Carrot Street and Apple Street.<br>现在我在胡萝卜街和苹果街的交界处<br><strong>时间：</strong><br>at 8 o’clock at that moment</p><h2 id="常见英语介词用法"><a href="#常见英语介词用法" class="headerlink" title="常见英语介词用法"></a>常见英语介词用法</h2><ul><li>表示空间的介词<br>  <strong>in</strong><br>  <strong>在…里面（在…空间的内部）</strong><br>      in the house 在房屋里<br>      in the park 在公园里<br>      in the country 在国内<br>      There are some birds in the tree.<br>      树上有一些鸟 <strong>（外部事物）在树里</strong>.<br>  <strong>on</strong><br>  <strong>在…上面（在一个物体的表面上）和物体接触</strong><br>      on the table 在桌子上<br>      on the floor 在地板上<br>      There are some apples on the tree.<br>      树上结着一些苹果.<strong>（长在树上的）</strong><br>  <strong>at</strong><br>  <strong>在某处</strong><br>      at the corner of the street<br>      在街道拐角<br>      The bus stopped at the bus station.<br>      公交车在车站停下了.<br>  <strong>over</strong><br>  做<strong>空间介词</strong>：覆盖；在..上方;越过上空（<strong>可能接触，可能不接触</strong>）<br>  （<strong>更加正上方</strong>） （<strong>可以描述动态</strong>）<br>      The mother put a blanket over the child.<br>      妈妈把毯子盖在孩子身<strong>上</strong>.<br>      the bridge over the river<br>      在河<strong>上</strong>的桥<br>      The plane flew over the mountain.<br>      飞机飞<strong>越过</strong>高山.<br>      The rabbit climbed over the fence.<br>      兔子爬过栅栏<br>  <strong>above</strong><br>  <strong>在…上方（高于平面）（不能描述动态）</strong><br>      the sky above us<br>      在我们上方的天空<br>  <strong>under</strong><br>  <strong>在…正下方，含垂直在下方的意思，可以解除，可以留一定空间</strong><br>      There is a ball under the desk.<br>  <strong>below</strong><br>  <strong>在…下方，与above相对，低于某个平面，不管是不是正下方</strong><br>      The rabbit dived below the surface of the water. 兔子潜入了水下<br>  <strong>near</strong><br>  <strong>在…附近，在…周边</strong><br>      There is a school near here.<br>      这附近有个学校<br>  <strong>by</strong><br>  <strong>在..旁边</strong><br>      There is a hotel by&#x2F;beside the river.<br>  <strong>beside</strong><br>  <strong>(空间)在..旁边，边上</strong><br>      There is a hotel by&#x2F;beside the river.<br>  <strong>(非空间)比较</strong><br>      My carrot looks bigger beside yours.<br>      我的胡萝卜和你的一起看着更大<br>  <strong>next to</strong><br>  <strong>在…旁边;下一个；紧邻</strong><br>      the building next to the school<br>      The rabbit sat <strong>by&#x2F;beside&#x2F;next to</strong> the wolf.<br>      兔子坐在狼旁边<br>  <strong>across</strong><br>  <strong>(从表面)横过</strong><br>      go across the street<br>      穿过马路<br>      swim across the river<br>      游过河<br>  <strong>through</strong><br>  <strong>(从内部)穿过</strong><br>      go through the tunnel<br>      穿过隧道<br>      walk through the forest<br>      穿过森林<br>      look through the window<br>      透过窗户看<br>  <strong>past</strong><br>  <strong>经过;路过</strong><br>      The rabbit walked past the wolf without saying any words.<br>      兔子从狼身边经过，没说一句话<br>  <strong>in front of</strong><br>  <strong>在…前方</strong><br>      The rabbit is standing in front of the wolf.<br>      兔子站在狼前面.<br>  <strong>before</strong><br>  <strong>在…之前，在众人&#x2F;观众前</strong><br>      She played the violin before the crowd.<br>  <strong>behind</strong><br>  <strong>在..之后</strong><br>      The wolf is standing behind the rabbit<br>  <strong>between</strong><br>  <strong>在…之间（在口语中可能会取代among）</strong><br>      You shouldn’t eat between meals.<br>  <strong>between… and..</strong><br>      <strong>在…与..之间</strong><br>      The carrot is between the rabbit and the wolf.<br>  <strong>among</strong><br>  <strong>在..之间（三者或更多）</strong><br>      The rabbit is standing among the carrots.<br>  <strong>round, around</strong><br>  <strong>围绕;环绕</strong><br>      trees round&#x2F;around the field<br>  <strong>along</strong><br>  <strong>沿着;顺着</strong><br>      Walk along this road.<br>  <strong>to</strong><br>  <strong>向;朝…</strong><br>      go to school<br>  <strong>toward&#x2F;towards</strong><br>  <strong>朝着…的方向</strong><br>      walk toward home<br>  <strong>onto</strong><br>  <strong>到…上面</strong><br>      The rabbit jumped onto the table.<br>  <strong>into</strong><br>  <strong>到…里面(内部)</strong><br>      walk into the house<br>  <strong>out of</strong><br>  <strong>从里面出来</strong><br>      get out of the car<br>  <strong>opposite</strong><br>  <strong>在…对面</strong><br>      Our school is opposite my I house.<br>  <strong>against</strong><br>  <strong>与…相反;倚,靠</strong><br>      We were rowing against the current. 我们逆水行舟.<br>      The rabbit was leaning against the tree. 兔子正倚着一颗树.<br>  <strong>up</strong><br>  <strong>沿…向上</strong><br>      up the hill 上山<br>  <strong>down</strong><br>  <strong>沿…向下</strong><br>      walk down the road<br>      roll down the hill<br>  <strong>off</strong><br>  <strong>离…有一定距离</strong><br>      New Zealand lies off the eastern coast of Australia.<br>      新西兰离澳大利亚东海岸有一些距离</li></ul><hr><ul><li>表示时间的介词<br>  <strong>during</strong><br>  <strong>持续;在…期间</strong><br>      during the past 2 days<br>      在过去的2天里<br>  <strong>for</strong><br>  <strong>因为…因…持续</strong><br>      I’ve been learning English for 2 years.<br>      我持续学习英语两年时间.<br>  <strong>since</strong><br>  <strong>自从</strong><br>      since last week<br>  <strong>before</strong><br>  <strong>在..之前</strong><br>      before Monday<br>  <strong>注意：before很少用于空间的”在..之前”</strong><br>  <strong>after</strong><br>  <strong>在…之后</strong><br>      after two years<br>  <strong>from…to…</strong><br>  从….到…<br>      from 9:00 to 10:00<br>  <strong>by</strong><br>  <strong>在…附近&#x2F;旁边;不超过…边界;不迟于..前</strong><br>      by 2 o’clock<br>      在2点之前<br>  <strong>before</strong><br>  <strong>在…(时间点)之前，强调了时间</strong><br>      Please finish your homework before 8 PM.<br>      请在晚上8点前完成你的作业.<br>  <strong>until</strong><br>  <strong>直到..为止</strong><br>      until 8 o’clock<br>      直到8点为止</li></ul><hr><ul><li>表示方式的介词<br>  <strong>in</strong><br>  <strong>…方式；在…里面</strong><br>      Let’s talk in English.<br>      让我们用英语对话.<br>  <strong>through</strong><br>  <strong>通过…方式;穿过</strong><br>      We succeed through hard work.<br>      我们通过努力工作而成功<br>  <strong>by</strong><br>  <strong>通过…在..旁边</strong><br>      We learn English by watching videos.<br>      我们通过看视频学英语.<br>      I go to work by car.<br>      我开车去上班<br>  <strong>with</strong><br>  <strong>用..和…一起</strong><br>      We write with pens.<br>      我们用笔写字<br>  <strong>on</strong><br>  <strong>在..上面</strong><br>      We talked on the phone.<br>      我们通过电话进行了交谈<br>      online<br>      adj.线上</li></ul><hr><ul><li>表示原因的介词<br>  <strong>for</strong><br>  <strong>因为..;由于</strong><br>      This rabbit is famous for being able to speak.<br>      这只兔子因会说话出名.<br>  <strong>with</strong><br>  <strong>和…一起；是和…分不开的原因</strong><br>      The rabbit is shaking with cold.<br>      兔子冷得发抖.<br>  <strong>because of+名词</strong>（because十从句）<br>  因为..<br>      The rabbit didn’t go out because of the rain.<br>      因为下雨，兔子没出去</li></ul><hr><ul><li>表示关于的介词<br>  <strong>about</strong><br>  在…外面;<strong>关于</strong><br>      Could you tell me something about your school?<br>  <strong>of</strong><br>  <strong>此外的;附加的</strong><br>      He thought of something important.<br>      他想起了一些重要的事情.<br>  <strong>辨析</strong><br>      think about &#x2F; think of<br>      想到关于…的事 &#x2F; 想起<br>  <strong>on</strong><br>  在…上面;<strong>关于</strong><br>      Would you like some advice on learning English?<br>      你想要些关于学习英语的建议吗？</li></ul><hr><ul><li>表示数值的介词<br>  <strong>at</strong><br>  <strong>在某处</strong><br>      at a high price<br>      在一个高的价格(点)<br>      at a fast rate<br>      以一个很快的速率(点)<br>  <strong>by</strong><br>  <strong>(后接度量标准)</strong><br>      They get paid by the hour.<br>      他们按小时拿报酬.<br>  <strong>for</strong><br>  <strong>以…的价钱</strong><br>      I bought these books for 100 Yuan.<br>      我买这些书花了100元</li></ul><hr><ul><li>表示状态的介词<br>  <strong>in</strong><br>  在…里;<br>  <strong>在…状态中</strong><br>      in progress<br>      在进行(状态)中<br>      in a dilemma<br>      处于进退两难的境地中<br>  <strong>on</strong><br>  在…之上<br>  <strong>受到之下…的支持(的状态)</strong><br>      on a diet<br>      在节食 (在节食支持的状态)<br>      on drugs<br>      吃药 (在药物支持的状态)<br>  <strong>at</strong><br>  在某处;<br>  <strong>在某个状态</strong><br>      at work 在工作<br>      at dinner 在吃晚饭<br>  <strong>under</strong><br>  在…下面;<br>  <strong>在(框架,前提)下</strong><br>      under construction 在施工中<br>      under discussion 在讨论中</li></ul><hr><ul><li>表示排除的介词<br>  <strong>besides</strong><br>  <strong>除了… 还</strong><br>      I like many things besides carrots.<br>      除了胡萝卜，我还喜欢很多东西<br>  <strong>except</strong><br>  <strong>除了…</strong><br>      Everyone went to the party except the rabbit.<br>      大家都去了聚会，除了兔子<br>  <strong>except for 反驳之前的话，美中不足的是</strong><br>      The party is great <strong>except for</strong> the loud music.<br>      聚会很棒，除了嘈杂的音乐</li></ul><hr><h2 id="介词短语"><a href="#介词短语" class="headerlink" title="介词短语"></a>介词短语</h2><blockquote><p>介词+介词宾语</p></blockquote><p>可以充当句子中的各种成分<br>Between 10 and 11 is a good time for me.<br>10点到11点间适合我<br>The meeting is at 2 o’clock.<br>会议在2点钟.<br>This is the key to the house.<br>这是房子的钥匙，<br>I found the carrot in good condition<br>我发现那个胡萝卜保存完好.<br>最常见的是当<strong>状语</strong>，来修饰动词，描述动作的时间;地点;方式..<br>The rabbit ate a carrot at noon.<br>中午,兔子吃了一根胡萝卜.</p><h2 id="介词固定搭配"><a href="#介词固定搭配" class="headerlink" title="介词固定搭配"></a>介词固定搭配</h2><p>有些介词不好推导，有其约定俗成的搭配<br>due to 由于;因为<br>owing to 由于;因为<br>on account of 由于;因为<br>for example 比如<br>at ease 自在<br>in turn 依次<br><strong>动词+介词-&gt;短语动词</strong><br>需要特别记忆</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>连词</title>
    <link href="/posts/2579165117/"/>
    <url>/posts/2579165117/</url>
    
    <content type="html"><![CDATA[<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><h3 id="并列连词"><a href="#并列连词" class="headerlink" title="并列连词"></a>并列连词</h3><p>连接有着”并列的，同等语法地位的”单词，词组或句子</p><h4 id="并列关系"><a href="#并列关系" class="headerlink" title="并列关系"></a>并列关系</h4><h5 id="1-并列连词（单个词连接）"><a href="#1-并列连词（单个词连接）" class="headerlink" title="1. 并列连词（单个词连接）"></a>1. 并列连词（单个词连接）</h5><blockquote><p>连接有着”并列的，同等语法地位的”单词,词组或句子</p></blockquote><ul><li><strong>and（和、并且）</strong><ul><li>The rabbit is smart<strong>and</strong>cute.<br>（这兔子聪明<strong>且</strong>可爱。）</li><li>The rabbit teaches English<strong>and</strong>makes videos.<br>（兔子教英语<strong>并</strong>做视频。）</li></ul></li></ul><h5 id="2-关联连词（成对使用）"><a href="#2-关联连词（成对使用）" class="headerlink" title="2. 关联连词（成对使用）"></a>2. 关联连词（成对使用）</h5><ul><li><strong>both…and…（两者都）</strong><ul><li><strong>Both</strong>the rabbit<strong>and</strong>the wolf like carrots.<br>（兔子<strong>和</strong>狼<strong>都</strong>喜欢胡萝卜。）</li></ul></li><li><strong>not only…but also…（不仅…而且…）</strong><ul><li>The rabbit<strong>not only</strong>teaches English<strong>but also</strong>makes videos.<br>（兔子<strong>不仅</strong>教英语，<strong>还</strong>做视频。）</li><li>The rabbit teaches<strong>not only</strong>English<strong>but also</strong>German.<br>（兔子教的<strong>不仅是</strong>英语，<strong>还有</strong>德语。）</li></ul></li><li><strong>neither…nor…（既不…也不…）</strong><ul><li>The rabbit likes<strong>neither</strong>apples<strong>nor</strong>pears.<br>（兔子<strong>既</strong>不喜欢苹果，<strong>也</strong>不喜欢梨子。）</li><li><strong>Neither</strong>the rabbit<strong>nor</strong>the wolf likes apples.<br>（兔子<strong>和</strong>狼<strong>都</strong>不喜欢苹果。）</li></ul></li></ul><h4 id="选择关系"><a href="#选择关系" class="headerlink" title="选择关系"></a>选择关系</h4><h5 id="1-提供选项（二选一）"><a href="#1-提供选项（二选一）" class="headerlink" title="1. 提供选项（二选一）"></a>1. 提供选项（二选一）</h5><ul><li><p><strong>or（或者、还是）</strong></p><ul><li><p><strong>What does the rabbit like? Apples or carrots?</strong><br>（兔子喜欢什么？苹果<strong>还是</strong>胡萝卜？）</p></li><li><p><strong>Is the rabbit smart or just lucky?</strong><br>（兔子是聪明<strong>还是</strong>只是运气好？）</p></li></ul></li></ul><h5 id="2-非此即彼（either…or…）"><a href="#2-非此即彼（either…or…）" class="headerlink" title="2. 非此即彼（either…or…）"></a>2. 非此即彼（either…or…）</h5><ul><li><p><strong>Either A or B（不是A就是B）</strong></p><ul><li><p><strong>Either the rabbit or the wolf is going to the party this evening.</strong><br>（<strong>不是兔子就是狼</strong>会去参加今晚的聚会。）</p></li><li><p><strong>Either the rabbit or I am going to the party this evening.</strong><br>（<strong>不是兔子就是我</strong>要去参加今晚的聚会。）</p></li></ul></li></ul><h5 id="3-两者都不（neither…nor…）"><a href="#3-两者都不（neither…nor…）" class="headerlink" title="3. 两者都不（neither…nor…）"></a>3. 两者都不（neither…nor…）</h5><ul><li><p><strong>Neither A nor B（既不A也不B）</strong></p><ul><li><p><strong>The rabbit neither ate nor slept yesterday.</strong><br>（兔子昨天<strong>既没吃也没睡</strong>。）</p></li><li><p><strong>Neither the rabbit nor the wolf likes bananas.</strong><br>（兔子和狼<strong>都不</strong>喜欢香蕉。）</p></li></ul></li></ul><h5 id="4-否则（or-or-else-otherwise）"><a href="#4-否则（or-or-else-otherwise）" class="headerlink" title="4. 否则（or&#x2F;or else&#x2F;otherwise）"></a>4. 否则（or&#x2F;or else&#x2F;otherwise）</h5><ul><li><p><strong>表示“如果不这样，就会…”</strong></p><ul><li><p><strong>Hurry up, or you’ll be late!</strong><br>（快点，<strong>否则</strong>你要迟到了！）</p></li><li><p><strong>Be careful, or else you might fall.</strong><br>（小心点，<strong>不然</strong>你可能会摔倒。）</p></li><li><p><strong>Study hard, otherwise you won’t pass the exam.</strong><br>（努力学习，<strong>否则</strong>你考试会不及格。）</p></li></ul></li></ul><h4 id="转折关系"><a href="#转折关系" class="headerlink" title="转折关系"></a>转折关系</h4><p>The rabbit cooked some carrots, but he didn’t eat any.<br>兔子煮了些胡萝卜，但他没吃<br>The rabbit cooked some carrots, <span style="background:rgba(74, 82, 199, 0.2)">yet</span> he didn’t eat<br>any.<span style="background:rgba(74, 82, 199, 0.2)">并列连词(表转折)</span><br>兔子煮了胡萝卜，但他没吃<br>I haven’t eaten yet, yet I’m not hungry.<br>我还没吃，但我还不饿.</p><h4 id="因果关系"><a href="#因果关系" class="headerlink" title="因果关系"></a>因果关系</h4><p>The rabbit is busy, so he won’t go to the party tonight.<br>兔子很忙,所以今天晚上他不能参加聚会了. (前因后果)<br>The rabbit is busy. <strong>Therefore</strong>, he won’t go to the party tonight.(通常用于书面）<br>兔子很忙,所以今天晚上他不能参加聚会了. (前因后果)<br>The rabbit will skip lunch, <strong>for</strong> he is busy making a video. (前果后因)(for 是表 “因为”的连词)<br>兔子不吃午餐了，因为他在忙着做视频</p><h3 id="从属连词"><a href="#从属连词" class="headerlink" title="从属连词"></a>从属连词</h3><h4 id="名词性从句的连词：that、if、whether"><a href="#名词性从句的连词：that、if、whether" class="headerlink" title="名词性从句的连词：that、if、whether"></a>名词性从句的连词：that、if、whether</h4><h5 id="一、that-引导的名词性从句"><a href="#一、that-引导的名词性从句" class="headerlink" title="一、that 引导的名词性从句"></a>一、that 引导的名词性从句</h5><p>that 在从句中 <strong>不充当成分，仅起连接作用</strong>，没有实际意义。<br>适用于：<strong>主语从句、宾语从句、表语从句、同位语从句</strong></p><hr><h5 id="1-主语从句"><a href="#1-主语从句" class="headerlink" title="1. 主语从句"></a>1. 主语从句</h5><p><strong>结构：</strong> That + 从句 + 动词<br><strong>例句：</strong><br>That the rabbit ate the carrot was obvious.<br>兔子吃了胡萝卜，这很明显。</p><hr><h5 id="2-宾语从句"><a href="#2-宾语从句" class="headerlink" title="2. 宾语从句"></a>2. 宾语从句</h5><p><strong>结构：</strong> 主句 + 动词 + (that) + 从句<br><strong>例句：</strong><br>I saw (that) the rabbit ate the carrot.<br>我看见兔子吃了胡萝卜。<br>说明：that 可省略。</p><hr><h5 id="3-表语从句"><a href="#3-表语从句" class="headerlink" title="3. 表语从句"></a>3. 表语从句</h5><p><strong>结构：</strong> 主语 + 系动词 + that 从句<br><strong>例句：</strong><br>The fact is that the rabbit ate the carrot.<br>事实是兔子吃了胡萝卜。</p><hr><h5 id="4-同位语从句"><a href="#4-同位语从句" class="headerlink" title="4. 同位语从句"></a>4. 同位语从句</h5><p><strong>结构：</strong> 名词 + that 从句，that 不可省略。<br><strong>例句：</strong><br>The question that the rabbit ate the carrot surprised us.<br>（说明是“兔子吃了胡萝卜”这个问题让我们惊讶。）</p><p>⚠️ 有时也用 <strong>whether&#x2F;if</strong> 引导，尤其在表示“是否”的语义上：</p><p><strong>例句：</strong><br>The question whether the rabbit will eat the carrot is on all our minds.<br>兔子是否会吃胡萝卜这个问题萦绕在我们所有人心中。</p><hr><h5 id="补充：if-与-whether-的区别"><a href="#补充：if-与-whether-的区别" class="headerlink" title="补充：if 与 whether 的区别"></a>补充：if 与 whether 的区别</h5><ul><li><p><strong>if</strong> 通常只用于宾语从句，不能用于同位语从句和介词后</p></li><li><p><strong>whether</strong> 用法更广泛，可用于多种名词性从句中</p></li></ul><h4 id="引导状语从句的连词"><a href="#引导状语从句的连词" class="headerlink" title="引导状语从句的连词"></a>引导状语从句的连词</h4><p>[[从句#^ac5efa|详情参考]]</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>名词</title>
    <link href="/posts/605666503/"/>
    <url>/posts/605666503/</url>
    
    <content type="html"><![CDATA[<h2 id="普通名词"><a href="#普通名词" class="headerlink" title="普通名词"></a>普通名词</h2><p>one rabbit -&gt; two rabbits</p><h3 id="可数"><a href="#可数" class="headerlink" title="可数"></a>可数</h3><h4 id="个体名词"><a href="#个体名词" class="headerlink" title="个体名词"></a>个体名词</h4><h4 id="集合名词"><a href="#集合名词" class="headerlink" title="集合名词"></a>集合名词</h4><h3 id="不可数"><a href="#不可数" class="headerlink" title="不可数"></a>不可数</h3><h4 id="物质名词"><a href="#物质名词" class="headerlink" title="物质名词"></a>物质名词</h4><h4 id="抽象名词"><a href="#抽象名词" class="headerlink" title="抽象名词"></a>抽象名词</h4><h2 id="专有名词"><a href="#专有名词" class="headerlink" title="专有名词"></a>专有名词</h2><blockquote><p>首字母大写</p></blockquote><h3 id="可数名词"><a href="#可数名词" class="headerlink" title="可数名词"></a>可数名词</h3><p>There’s <span style="background:rgba(3, 135, 102, 0.2)">a</span> Michael downstairs looking for you.<br>There are three Michaels in my class.<br>我班上有三个(叫)Michael(的同学)</p><h3 id="不可数名词"><a href="#不可数名词" class="headerlink" title="不可数名词"></a>不可数名词</h3><h2 id="什么是可数的？"><a href="#什么是可数的？" class="headerlink" title="什么是可数的？"></a>什么是可数的？</h2><p>international waters<br>国际水域<br>we’d like two beers<br>看语境，不用教条主义</p><h2 id="名词所有格"><a href="#名词所有格" class="headerlink" title="名词所有格"></a>名词所有格</h2><p>”格“：反映某个词在在句中的语法功能<br>比如，一个词的主格就是说该词在句中充当主语，I: 主格</p><h3 id="‘s-所有格"><a href="#‘s-所有格" class="headerlink" title="‘s 所有格"></a>‘s 所有格</h3><p><strong>”所有格“：<br>(通常)表示所有&#x2F;所属关系</strong><br>the rabbit’s carrot<br>兔子的胡萝卜<br>Tom<span style="background:rgba(3, 135, 102, 0.2)">‘s</span> and Jerry<span style="background:rgba(3, 135, 102, 0.2)">‘s</span> rooms<br>Tom和Jerry各自的房间<br><strong>非人物后表示某种性质</strong><br>today’s news  </p><h3 id="of-所有格"><a href="#of-所有格" class="headerlink" title="of 所有格"></a>of 所有格</h3><p><strong>用来描述所修饰名词的性质特征，不能修饰所有&#x2F;所属</strong><br>the paper’s quality 纸张的质量<br>the quality of the paper 纸张的质量</p><h3 id="双重所有格"><a href="#双重所有格" class="headerlink" title="双重所有格"></a>双重所有格</h3><p>I am one of Michael’s friends. 我是Michael众多朋友中的一员。<br>I am a friend of Michael’s.<br>a photo of Michael’s Michael拥有的照片中的一张<br>a photo of Michael Michael出镜的照片之一</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>叹词</title>
    <link href="/posts/3118519138/"/>
    <url>/posts/3118519138/</url>
    
    <content type="html"><![CDATA[<p>负责表达情感的声音,单词,词组<br><strong>打招呼</strong><br>惊讶<br>犹豫<br>高兴<br>感动<br>疼痛<br>鼓励<br>赞同<br>反对<br>确认<br>后悔<br>伤心<br>厌恶<br>使注意<br>使安静<br>不耐烦<br>愤怒<br>高度依赖语气<br>不固定，感情到位即可</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>限定词</title>
    <link href="/posts/3919547997/"/>
    <url>/posts/3919547997/</url>
    
    <content type="html"><![CDATA[<blockquote><p>限定讨论描述范围的词</p></blockquote><table><thead><tr><th>示例</th><th>词类</th><th>说明</th></tr></thead><tbody><tr><td><strong>this carrot &#x2F; that carrot</strong></td><td><strong>指示代词</strong></td><td>指代特定的胡萝卜，this 表示近指，that 表示远指</td></tr><tr><td><strong>my carrot &#x2F; your carrot</strong></td><td><strong>物主代词</strong></td><td>表示“谁的胡萝卜”，如我的、你的等</td></tr><tr><td><strong>the wolf’s carrot &#x2F; the pig’s carrot</strong></td><td><strong>名词所有格</strong></td><td>用名词加 <code>&#39;s</code> 表示所属关系</td></tr><tr><td><strong>every carrot &#x2F; no carrot</strong></td><td><strong>不定代词</strong></td><td>不特指某个胡萝卜，表示“每个”、“没有一个”</td></tr><tr><td><strong>carrots</strong></td><td><strong>复数名词</strong></td><td>表示多个胡萝卜，前面可能有其他限定词（如 some）</td></tr><tr><td><strong>many carrots &#x2F; few carrots</strong></td><td><strong>限定词（数量词）</strong></td><td>可数名词前表示多或少，many 表“许多”，few 表“很少”</td></tr><tr><td><strong>a lot of carrots &#x2F; a small number of carrots</strong></td><td><strong>量词短语</strong></td><td>表示大量或少量，修饰复数可数名词</td></tr><tr><td><strong>two carrots &#x2F; three carrots</strong></td><td><strong>基数词</strong></td><td>表具体数量：两个胡萝卜、三个胡萝卜</td></tr><tr><td><strong>the second carrot &#x2F; the third carrot</strong></td><td><strong>序数词</strong></td><td>表示顺序：第二个胡萝卜、第三个胡萝卜</td></tr></tbody></table><p><strong>用位置划分：</strong><br>前位限定词：某些不定代词;倍数词;分数词<br>位限定词：冠词;物主代词；某些不定代词…<br>后位限定词：基数词;序数词;量词…</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>英语构词法</title>
    <link href="/posts/676945116/"/>
    <url>/posts/676945116/</url>
    
    <content type="html"><![CDATA[<hr><h2 id="派生"><a href="#派生" class="headerlink" title="派生"></a>派生</h2><h3 id="词根"><a href="#词根" class="headerlink" title="词根"></a>词根</h3><p>单词核心</p><h3 id="词缀"><a href="#词缀" class="headerlink" title="词缀"></a>词缀</h3><h4 id="前缀-prefix（一般改变词义）"><a href="#前缀-prefix（一般改变词义）" class="headerlink" title="前缀 prefix（一般改变词义）"></a>前缀 prefix（一般改变词义）</h4><h4 id="后缀-suffix（可改变词性）"><a href="#后缀-suffix（可改变词性）" class="headerlink" title="后缀 suffix（可改变词性）"></a>后缀 suffix（可改变词性）</h4><h2 id="合成"><a href="#合成" class="headerlink" title="合成"></a>合成</h2><h2 id="混合"><a href="#混合" class="headerlink" title="混合"></a>混合</h2><h2 id="截短"><a href="#截短" class="headerlink" title="截短"></a>截短</h2><h2 id="缩写"><a href="#缩写" class="headerlink" title="缩写"></a>缩写</h2><h2 id="转化"><a href="#转化" class="headerlink" title="转化"></a>转化</h2>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>形容词的用法</title>
    <link href="/posts/3951322404/"/>
    <url>/posts/3951322404/</url>
    
    <content type="html"><![CDATA[<h2 id="形容词的用法"><a href="#形容词的用法" class="headerlink" title="形容词的用法"></a>形容词的用法</h2><h3 id="定语"><a href="#定语" class="headerlink" title="定语"></a>定语</h3><h4 id="前置定语"><a href="#前置定语" class="headerlink" title="前置定语"></a>前置定语</h4><p>a <span style="background:rgba(3, 135, 102, 0.2)">hungry</span> rabbit<br>a <span style="background:rgba(3, 135, 102, 0.2)">little</span> <span style="background:rgba(3, 135, 102, 0.2)"><br>white</span> rabbit<br>一只小白兔</p><h5 id="前置定语顺序："><a href="#前置定语顺序：" class="headerlink" title="前置定语顺序："></a>前置定语顺序：</h5><table><thead><tr><th align="center">限定词</th><th align="center">(主观)特征</th><th align="center">尺寸</th><th align="center">形状</th><th align="center">新旧</th><th align="center">颜色</th><th align="center">来源</th><th align="center">材料</th><th align="center">用途</th></tr></thead><tbody><tr><td align="center">a</td><td align="center">beautiful</td><td align="center">big</td><td align="center">round</td><td align="center">new</td><td align="center">black</td><td align="center">Chinese</td><td align="center">wooden</td><td align="center">table</td></tr></tbody></table><h4 id="后置定语"><a href="#后置定语" class="headerlink" title="后置定语"></a>后置定语</h4><table><thead><tr><th align="center">复合不定代词</th><th align="center">例句</th></tr></thead><tbody><tr><td align="center">somebody</td><td align="center">somebody nice 某个好人</td></tr><tr><td align="center">anybody</td><td align="center">anybody absent 不在场的人</td></tr><tr><td align="center">everything</td><td align="center">everything possible 所有可能的事儿</td></tr><tr><td align="center">nothing</td><td align="center">nothing wrong 没不对的事儿</td></tr></tbody></table><h4 id="形容词短语作定语"><a href="#形容词短语作定语" class="headerlink" title="形容词短语作定语"></a>形容词短语作定语</h4><p>carrots <span style="background:rgba(3, 135, 102, 0.2)">good for the rabbit</span><br>对兔子有好处的胡萝卜</p><p>the rabbit eager <span style="background:rgba(3, 135, 102, 0.2)">to eat</span> carrots<br>the rabbit <span style="background:rgba(3, 135, 102, 0.2)">that is eager to eat carrots</span><br>急于吃胡萝卜的兔子</p><p>the rabbit busy <span style="background:rgba(3, 135, 102, 0.2)">eating</span> carrots<br>the rabbit <span style="background:rgba(3, 135, 102, 0.2)">that is busy eating carrots</span><br>忙着吃胡萝卜的兔子</p><h3 id="表语"><a href="#表语" class="headerlink" title="表语"></a>表语</h3><p>The rabbit <span style="background:rgba(3, 135, 102, 0.2)">is</span> <span style="background:rgba(240, 107, 5, 0.2)"><br>hungry</span>.<br>hungry用来表达主语的性质，称为主语补语（表语）</p><h4 id="有些英语形容词通常只做表语："><a href="#有些英语形容词通常只做表语：" class="headerlink" title="有些英语形容词通常只做表语："></a>有些英语形容词通常只做表语：</h4><p>比如<strong>一些</strong>以 <strong>a-</strong> 开头的形容词<br>The rabbit is <strong>alive&#x2F;asleep&#x2F;alone</strong>.<br>兔子是活的&#x2F;睡着的&#x2F;孤单的</p><p><strong>如果转化为定语则</strong><br><del>an alive&#x2F;asleep&#x2F;alone rabbit</del><br>a living&#x2F;sleeping&#x2F;lonely rabbit<br>一只活的&#x2F;睡着的&#x2F;孤独的兔子</p><p><strong>某些情况下，这样的形容词可做后置定语</strong><br>the only rabbit alive<br>唯一一只活着的兔子</p><h4 id="某些表身体状况的形容词，如-ill，well"><a href="#某些表身体状况的形容词，如-ill，well" class="headerlink" title="某些表身体状况的形容词，如 ill，well"></a>某些表身体状况的形容词，如 ill，well</h4><p>The rabbit <span style="background:rgba(3, 135, 102, 0.2)">is</span> ill&#x2F;well.<br>兔子是生病的&#x2F;健康的.</p><p><del>an ill&#x2F;well rabbit.</del><br>一只生病的&#x2F;健康的的兔子<br>a sick&#x2F;healthy rabbit<br>一只生病的&#x2F;健康的兔子</p><h3 id="补语"><a href="#补语" class="headerlink" title="补语"></a>补语</h3><p>Carrots make rabbits happy.<br>胡萝卜让兔子开心.</p><h3 id="状语"><a href="#状语" class="headerlink" title="状语"></a>状语</h3><p>The rabbit came home, <span style="background:rgba(3, 135, 102, 0.2)">tired and hungry</span>.<br>兔子回到家，又累又饿.</p><h2 id="形容词的构成"><a href="#形容词的构成" class="headerlink" title="形容词的构成"></a>形容词的构成</h2><h3 id="形容词-形容词-现在分词-过去分词"><a href="#形容词-形容词-现在分词-过去分词" class="headerlink" title="形容词+形容词&#x2F;现在分词&#x2F;过去分词"></a>形容词+形容词&#x2F;现在分词&#x2F;过去分词</h3><p>a red-hot coal<br>一块红热的煤<br>a good-looking rabbit<br>一只好看的兔子<br>anew-born baby<br>一个新生儿</p><hr><h3 id="副词-形容词-现在分词-过去分词"><a href="#副词-形容词-现在分词-过去分词" class="headerlink" title="[[副词]]+形容词&#x2F;现在分词&#x2F;过去分词"></a>[[副词]]+形容词&#x2F;现在分词&#x2F;过去分词</h3><p>all-round<br>全面的<br>hard-working<br>努力的<br>recently-built<br>最近建成的</p><hr><h3 id="形容词-数词-名词"><a href="#形容词-数词-名词" class="headerlink" title="形容词&#x2F;数词+名词"></a>形容词&#x2F;数词+名词</h3><h4 id="可以转成定语从句"><a href="#可以转成定语从句" class="headerlink" title="可以转成定语从句"></a>可以转成定语从句</h4><p>white-haired &#x3D; a man whose hair is white<br>白发的<br>kind-hearted &#x3D; a woman whose heart is kind<br>好心的;善良的</p><blockquote><p>往往要求第二个词（名词）+ed（与动词过去式无关）<br>这些也是定语从句</p></blockquote><h4 id="有些情况不能转化，比如对象不是人或动物"><a href="#有些情况不能转化，比如对象不是人或动物" class="headerlink" title="有些情况不能转化，比如对象不是人或动物"></a>有些情况不能转化，比如对象不是人或动物</h4><p>a long-distance call</p><h4 id="数词情况"><a href="#数词情况" class="headerlink" title="数词情况"></a>数词情况</h4><p>a one-way street<br>单行街道</p><hr><h3 id="名词-形容词-现在分词-过去分词"><a href="#名词-形容词-现在分词-过去分词" class="headerlink" title="名词+形容词&#x2F;现在分词&#x2F;过去分词"></a>名词+形容词&#x2F;现在分词&#x2F;过去分词</h3><p>a snow-white rabbit<br>a rabbit that is white like snow<br>一只雪白的兔子<br>a carrot-eating rabbit<br>a rabbit that eats carrots<br>一只吃胡萝卜的兔子<br>a heart-broken rabbit<br>a rabbit whose heart is broken<br>一只心碎的兔子</p><h2 id="形容词的比较级和最高级"><a href="#形容词的比较级和最高级" class="headerlink" title="形容词的比较级和最高级"></a>形容词的比较级和最高级</h2><h3 id="通常情况"><a href="#通常情况" class="headerlink" title="通常情况"></a>通常情况</h3><table><thead><tr><th align="center">一般</th><th align="center">比较</th><th align="center">最高</th></tr></thead><tbody><tr><td align="center">long</td><td align="center">longer</td><td align="center">longest</td></tr><tr><td align="center">late</td><td align="center">later</td><td align="center">latest</td></tr><tr><td align="center">happy</td><td align="center">happier</td><td align="center">happiest</td></tr></tbody></table><h3 id="重读闭音节单词"><a href="#重读闭音节单词" class="headerlink" title="重读闭音节单词"></a>重读闭音节单词</h3><table><thead><tr><th align="center">一般</th><th align="center">比较</th><th align="center">最高</th></tr></thead><tbody><tr><td align="center">big</td><td align="center">bigger</td><td align="center">biggest</td></tr></tbody></table><h3 id="多音节词-部分双音节词"><a href="#多音节词-部分双音节词" class="headerlink" title="多音节词&#x2F;部分双音节词"></a>多音节词&#x2F;部分双音节词</h3><blockquote><p>音节中含有三个或三个以上的元音音素，称为多音节单词</p></blockquote><table><thead><tr><th align="center">一般</th><th align="center">比较</th><th align="center">最高</th></tr></thead><tbody><tr><td align="center">interesting</td><td align="center">more interesting</td><td align="center">most interesting</td></tr></tbody></table><h3 id="不规则变化"><a href="#不规则变化" class="headerlink" title="不规则变化"></a>不规则变化</h3><table><thead><tr><th align="center">一般</th><th align="center">比较</th><th align="center">最高</th></tr></thead><tbody><tr><td align="center">good</td><td align="center">better</td><td align="center">best</td></tr><tr><td align="center">bad</td><td align="center">worse</td><td align="center">worst</td></tr><tr><td align="center">many</td><td align="center">more</td><td align="center">most</td></tr><tr><td align="center">little</td><td align="center">less</td><td align="center">least</td></tr></tbody></table><h2 id="形容词比较级的用法"><a href="#形容词比较级的用法" class="headerlink" title="形容词比较级的用法"></a>形容词比较级的用法</h2><h3 id="一、基本比较结构"><a href="#一、基本比较结构" class="headerlink" title="一、基本比较结构"></a>一、基本比较结构</h3><h4 id="1-形容词比较级-than"><a href="#1-形容词比较级-than" class="headerlink" title="1. 形容词比较级 + than"></a>1. 形容词比较级 + than</h4><blockquote><p>This carrot is <strong>bigger than</strong> that one.<br>这根胡萝卜比那根大。</p></blockquote><h4 id="2-倍数-比较级-than"><a href="#2-倍数-比较级-than" class="headerlink" title="2. 倍数 + 比较级 + than"></a>2. 倍数 + 比较级 + than</h4><blockquote><p>This carrot is <strong>three times bigger than</strong> that one.<br>这根胡萝卜比那根大三倍。</p></blockquote><hr><h3 id="二、as…as…结构（表示同等）"><a href="#二、as…as…结构（表示同等）" class="headerlink" title="二、as…as…结构（表示同等）"></a>二、as…as…结构（表示同等）</h3><h4 id="1-as-形容词原级-as"><a href="#1-as-形容词原级-as" class="headerlink" title="1. as + 形容词原级 + as"></a>1. as + 形容词原级 + as</h4><blockquote><p>This carrot is <strong>as big as</strong> that one.<br>这根胡萝卜和那根一样大。</p></blockquote><h4 id="2-倍数-as-形容词原级-as"><a href="#2-倍数-as-形容词原级-as" class="headerlink" title="2. 倍数 + as + 形容词原级 + as"></a>2. 倍数 + as + 形容词原级 + as</h4><blockquote><p>This carrot is <strong>three times as big as</strong> that one.<br>这根胡萝卜是那根的三倍大。</p></blockquote><p>说明：</p><ul><li><p>这两种结构都可以表示倍数，但“<strong>three times as big as</strong>”更正式、更准确；</p></li><li><p>“<strong>three times bigger than</strong>”虽然常用，但有时会被认为逻辑不严谨（因为三倍大本身已经是原来的四倍了）。</p></li></ul><hr><h3 id="三、越来越…"><a href="#三、越来越…" class="headerlink" title="三、越来越…"></a>三、越来越…</h3><h4 id="1-形容词比较级-and-形容词比较级"><a href="#1-形容词比较级-and-形容词比较级" class="headerlink" title="1. 形容词比较级 and 形容词比较级"></a>1. 形容词比较级 and 形容词比较级</h4><p>（用于单音节或常见比较级）</p><blockquote><p>She is <strong>prettier and prettier</strong>.<br>她越来越漂亮。</p></blockquote><h4 id="2-more-and-more-形容词原级"><a href="#2-more-and-more-形容词原级" class="headerlink" title="2. more and more + 形容词原级"></a>2. more and more + 形容词原级</h4><p>（用于多音节或无法变形的词）</p><blockquote><p>The rabbit is <strong>more and more beautiful</strong>.<br>兔子越来越漂亮。</p></blockquote><blockquote><p>The rabbit is <strong>smarter and smarter</strong>.<br>兔子越来越聪明了。</p></blockquote><hr><h3 id="四、the-比较级…the-比较级（越……就越……）"><a href="#四、the-比较级…the-比较级（越……就越……）" class="headerlink" title="四、the + 比较级…the + 比较级（越……就越……）"></a>四、the + 比较级…the + 比较级（越……就越……）</h3><blockquote><p>The more carrots the rabbit eats,<br>the smarter he will become.<br>兔子吃的胡萝卜越多，他就会变得越聪明。（<strong>假设&#x2F;将来</strong>）</p></blockquote><blockquote><p>The more carrots the rabbit ate,<br>the smarter he became.<br>兔子吃的越多，就变得越聪明。（<strong>过去的情况</strong>）</p></blockquote><blockquote><p>The more, the better.<br>越多越好。（<strong>省略句，语境判断具体含义</strong>）</p></blockquote><hr><h3 id="五、最高级"><a href="#五、最高级" class="headerlink" title="五、最高级"></a>五、最高级</h3><blockquote><p>The queen is <strong>a most beautiful woman</strong>.<br>皇后是一位<strong>非常漂亮</strong>的女人。</p></blockquote><p>注意：</p><ul><li><p>这里的 “<strong>a most beautiful</strong>” 是<strong>文雅用法</strong>，表示 <strong>非常漂亮的</strong>，不是最高级中的“最……”。</p></li><li><p>正常最高级要搭配 <strong>the</strong>，比如：</p></li></ul><blockquote><p>She is <strong>the most beautiful</strong> woman in the kingdom.<br>她是王国里最漂亮的女人。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数词</title>
    <link href="/posts/1747738981/"/>
    <url>/posts/1747738981/</url>
    
    <content type="html"><![CDATA[<h2 id="基数词"><a href="#基数词" class="headerlink" title="基数词"></a>基数词</h2><h3 id="构成形式"><a href="#构成形式" class="headerlink" title="构成形式"></a>构成形式</h3><table><thead><tr><th>数字</th><th>英文</th></tr></thead><tbody><tr><td>1</td><td>one</td></tr><tr><td>2</td><td>two</td></tr><tr><td>3</td><td>three</td></tr><tr><td>4</td><td>four</td></tr><tr><td>5</td><td>five</td></tr><tr><td>6</td><td>six</td></tr><tr><td>7</td><td>seven</td></tr><tr><td>8</td><td>eight</td></tr><tr><td>9</td><td>nine</td></tr><tr><td>10</td><td>ten</td></tr><tr><td>11</td><td>eleven</td></tr><tr><td>12</td><td>twelve</td></tr><tr><td>13</td><td>thirteen</td></tr><tr><td>14</td><td>fourteen</td></tr><tr><td>15</td><td>fifteen</td></tr><tr><td>16</td><td>sixteen</td></tr><tr><td>17</td><td>seventeen</td></tr><tr><td>18</td><td>eighteen</td></tr><tr><td>19</td><td>nineteen</td></tr><tr><td>20</td><td>twenty</td></tr></tbody></table><table><thead><tr><th>数字</th><th>英文</th></tr></thead><tbody><tr><td>30</td><td>thirty</td></tr><tr><td>40</td><td>forty</td></tr><tr><td>50</td><td>fifty</td></tr><tr><td>60</td><td>sixty</td></tr><tr><td>70</td><td>seventy</td></tr><tr><td>80</td><td>eighty</td></tr><tr><td>90</td><td>ninety</td></tr><tr><td>100</td><td>one hundred</td></tr></tbody></table><table><thead><tr><th>数字</th><th>英文</th></tr></thead><tbody><tr><td>21</td><td>twenty-one</td></tr><tr><td>35</td><td>thirty-five</td></tr><tr><td>48</td><td>forty-eight</td></tr><tr><td>62</td><td>sixty-two</td></tr><tr><td>77</td><td>seventy-seven</td></tr><tr><td>89</td><td>eighty-nine</td></tr><tr><td>99</td><td>ninety-nine</td></tr></tbody></table><table><thead><tr><th>数字</th><th>英文</th></tr></thead><tbody><tr><td>100</td><td>one hundred</td></tr><tr><td>101</td><td>one hundred and one</td></tr><tr><td>110</td><td>one hundred and ten</td></tr><tr><td>120</td><td>one hundred and twenty</td></tr><tr><td>200</td><td>two hundred</td></tr><tr><td>300</td><td>three hundred</td></tr><tr><td>400</td><td>four hundred</td></tr><tr><td>500</td><td>five hundred</td></tr><tr><td>600</td><td>six hundred</td></tr><tr><td>700</td><td>seven hundred</td></tr><tr><td>800</td><td>eight hundred</td></tr><tr><td>900</td><td>nine hundred</td></tr><tr><td>999</td><td>nine hundred and ninety-nine</td></tr><tr><td>1000</td><td>one thousand</td></tr></tbody></table><table><thead><tr><th>数字</th><th>英文</th></tr></thead><tbody><tr><td>1,000</td><td>one thousand</td></tr><tr><td>10,000</td><td>ten thousand</td></tr><tr><td>100,000</td><td>one hundred thousand</td></tr><tr><td>1,000,000</td><td>one million</td></tr><tr><td>10,000,000</td><td>ten million</td></tr><tr><td>100,000,000</td><td>one hundred million</td></tr><tr><td>1,000,000,000</td><td>one billion</td></tr></tbody></table><h3 id="可充当的句子成分"><a href="#可充当的句子成分" class="headerlink" title="可充当的句子成分"></a>可充当的句子成分</h3><p>One and two is three. 一加二等于三<br>It costs fifty (Yuan). 它要(花费)50元<br>You two can go with me. 你们两个可以跟我一起去 （two 做 同位语）</p><h4 id="不确定的数字"><a href="#不确定的数字" class="headerlink" title="不确定的数字"></a>不确定的数字</h4><p>hundreds of<br>thousands of<br>thousands of carrots<br>数以千计的(几千根)胡萝卜<br>tens of thousands of carrots<br>数以万(多个”十个千”)计的胡萝卜<br>hundreds of thousands of carrots<br>几十万根胡萝卜<br>millions of</p><h2 id="序数词"><a href="#序数词" class="headerlink" title="序数词"></a>序数词</h2><p>^164da9</p><h3 id="构成形式-1"><a href="#构成形式-1" class="headerlink" title="构成形式"></a>构成形式</h3><table><thead><tr><th>数字</th><th>正确序数词</th></tr></thead><tbody><tr><td>1</td><td>first</td></tr><tr><td>2</td><td>second</td></tr><tr><td>3</td><td>third</td></tr></tbody></table><table><thead><tr><th>数字</th><th>序数词</th></tr></thead><tbody><tr><td>4</td><td>fourth</td></tr><tr><td>6</td><td>sixth</td></tr><tr><td>10</td><td>tenth</td></tr><tr><td>27</td><td>twenty-seventh</td></tr><tr><td>58</td><td>fifty-eighth</td></tr><tr><td>99</td><td>ninety-ninth</td></tr></tbody></table><table><thead><tr><th>数字</th><th>序数词</th><th>说明</th></tr></thead><tbody><tr><td>20</td><td>twentieth</td><td>twenty → twent<strong>ieth</strong></td></tr><tr><td>30</td><td>thirtieth</td><td>thirty → thirt<strong>ieth</strong></td></tr><tr><td>40</td><td>fortieth</td><td>forty → fort<strong>ieth</strong></td></tr></tbody></table><table><thead><tr><th>数字</th><th>正确写法</th></tr></thead><tbody><tr><td>21</td><td>twenty-first</td></tr><tr><td>42</td><td>forty-second</td></tr><tr><td>103</td><td>one hundred and third</td></tr></tbody></table><h3 id="可充当的句子成分-1"><a href="#可充当的句子成分-1" class="headerlink" title="可充当的句子成分"></a>可充当的句子成分</h3><p><strong>一般情况要加 the</strong><br><strong>但如果已经有其他限定词了，就不能加 the</strong><br>This is my first book.<br>这是我的第一本书</p><p>Room 315<br>315号房(第315的房间)</p><p>The fifth to pay the bill will get this prize.<br>第五个付款的(人)将得到这个奖品</p><p>Please give me the second.<br>请给我第二个.</p><p>He is the 13th person to fall over this morning.<br>他是今天早上第13个摔倒的人了.</p><h2 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h2><h3 id="分数"><a href="#分数" class="headerlink" title="分数"></a>分数</h3><p>one third 1&#x2F;3<br>three fifth<span style="background:rgba(240, 107, 5, 0.2)">s</span> 3&#x2F;5 （分子&gt;1）<br>one second &#x3D; a half<br>one fourth &#x3D; a quarter<br>three fourths &#x3D; three quarter<br>two and one third 2 1&#x2F;3</p><h3 id="小数"><a href="#小数" class="headerlink" title="小数"></a>小数</h3><p>one point three four 1.34<br>zero point five seven 0.57<br>twelve point eight nine six 12.896</p><h3 id="百分数"><a href="#百分数" class="headerlink" title="百分数"></a>百分数</h3><p>twenty-five percent 25%<br>two point five percent 2.5%</p><h3 id="倍数"><a href="#倍数" class="headerlink" title="倍数"></a>倍数</h3><p>This carrot is half&#x2F;twice&#x2F;three times the size of that one.<br>这根胡萝卜是那一根的一半&#x2F;两倍&#x2F;三倍大小 (倍数 + the + 计量 + of)<br>I have half&#x2F;twice&#x2F;three times as many carrots as he has.<br>我有的胡萝卜是他有的一半&#x2F;两倍&#x2F;三倍. (我有两倍于他的胡萝卜.)(倍数 + as …as…)<br>I can eat three times faster than he can.<br>我吃东西的速度比他快三倍. (倍数+比较级+ than)<br>I have increased my income by three times.<br>我增加了三倍收入.(by 倍数)</p><h3 id="数字符号和算术"><a href="#数字符号和算术" class="headerlink" title="数字符号和算术"></a>数字符号和算术</h3><table><thead><tr><th>英文表达</th><th>数学表达</th></tr></thead><tbody><tr><td>2 plus 2 is 4</td><td>2 + 2 &#x3D; 4</td></tr><tr><td>4 minus 2 is 2</td><td>4 - 2 &#x3D; 2</td></tr><tr><td>2 multiplied by 3 is 6</td><td>2 × 3 &#x3D; 6</td></tr><tr><td>2 times 3 is 6</td><td>2 × 3 &#x3D; 6</td></tr><tr><td>8 divided by 4 is 2</td><td>8 ÷ 4 &#x3D; 2</td></tr><tr><td>2 squared is 4</td><td>2² &#x3D; 4</td></tr><tr><td>2 cubed is 8</td><td>2³ &#x3D; 8</td></tr><tr><td>4 is more than 3</td><td>4 &gt; 3</td></tr><tr><td>2 is less than 3</td><td>2 &lt; 3</td></tr></tbody></table><h3 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h3><h4 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h4><table><thead><tr><th align="center">英文表达</th><th align="center">数字时间</th></tr></thead><tbody><tr><td align="center">at seven</td><td align="center">7:00</td></tr><tr><td align="center">a quarter past seven<br>sevenfifteen</td><td align="center">7:15</td></tr><tr><td align="center">half past seven</td><td align="center">7:30</td></tr><tr><td align="center">ten to eight<br>sevenfifty</td><td align="center">7:50</td></tr></tbody></table><h4 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h4><p>英式：12th December, 2020<br>美式：December 12th, 2020</p><p>500 B.C. 公元前500年<br>500 A.D. 公元500年<br>2020 公元2020年<br>2020’s &#x2F; 2020s 21世纪20年代<br>1980’s &#x2F; 1980s 20世纪80年代</p><h4 id="长度"><a href="#长度" class="headerlink" title="长度"></a>长度</h4><table><thead><tr><th>英文[[形容词]]</th><th>词性</th><th>对应名词</th><th>词性</th></tr></thead><tbody><tr><td>long</td><td>adj.</td><td>length</td><td>n.</td></tr><tr><td>wide</td><td>adj.</td><td>width</td><td>n.</td></tr><tr><td>high</td><td>adj.</td><td>height</td><td>n.</td></tr></tbody></table><p>The river is 1000 meters long.<br>这条河有1000米长<br>基数词 +单位词(复数) +形容词(长宽高)<br>The river is 1000 meters in length.<br>这条河有1000米长.<br>基数词 +单位词(复数) +in + (长宽高)名词</p><p>This room is 20 by 35 meters.<br>这个房间是20米×35米<br>This room is 700 square meters.<br>这个房间有700平方米<br>This box is 8 by 5 by 6 centimeters.<br>这个盒子的长宽高分别是8厘米，5厘米和6厘米</p><h4 id="温度"><a href="#温度" class="headerlink" title="温度"></a>温度</h4><p>37 degrees centigrade(可以省略) 37℃<br>37 degrees Fahrenheit 37°F<br>10 degrees below zero -10°</p>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语/词性</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>英语语法综述</title>
    <link href="/posts/1388991698/"/>
    <url>/posts/1388991698/</url>
    
    <content type="html"><![CDATA[<p>英语句子基本结构：主语(人&#x2F;物)+谓语(动作&#x2F;发生了什么事)</p><h2 id="一-简单句（simple-sentence）"><a href="#一-简单句（simple-sentence）" class="headerlink" title="一. 简单句（simple sentence）"></a>一. 简单句（simple sentence）</h2><h3 id="五大句型"><a href="#五大句型" class="headerlink" title="五大句型"></a>五大句型</h3><ol><li>可以独立完成的动作<br> 主语+<span style="background:rgba(3, 135, 102, 0.2)">不及物动词</span><br> Papa <span style="background:rgba(3, 135, 102, 0.2)">Rabbit</span> ^932887</li><li>有1个动作的承受者<br> 主语+<span style="background:rgba(3, 135, 102, 0.2)">及物动词</span>+<span style="background:rgba(240, 107, 5, 0.2)">宾语</span><br> Papa Rabbit <span style="background:rgba(3, 135, 102, 0.2)">likes</span> <span style="background:rgba(240, 107, 5, 0.2)">you</span>.</li><li>有2个动作承受者<br> 主语+<span style="background:rgba(3, 135, 102, 0.2)">双及物动词</span>+<span style="background:rgba(5, 117, 197, 0.2)">间接宾语</span>+<span style="background:rgba(74, 82, 199, 0.2)">直接宾语</span><br> Papa Rabbit <span style="background:rgba(3, 135, 102, 0.2)">teaches</span> <span style="background:rgba(5, 117, 197, 0.2)">you</span> <span style="background:rgba(74, 82, 199, 0.2)">English</span>.</li><li>只有1个动作承受者(但需补充)<br> 主语+<span style="background:rgba(3, 135, 102, 0.2)">复杂及物动词</span>+<span style="background:rgba(5, 117, 197, 0.2)">宾语</span>+<span style="background:rgba(74, 82, 199, 0.2)">(宾语)补语</span><br> Papa Rabbit <span style="background:rgba(3, 135, 102, 0.2)">considers</span> <span style="background:rgba(5, 117, 197, 0.2)">you</span> <span style="background:rgba(74, 82, 199, 0.2)">smart</span>.</li><li>非”动作”<br> 主语+[[系动词]]+<span style="background:rgba(5, 117, 197, 0.2)">(主语)补语&#x2F;表语</span><br> Papa Rabbit <span style="background:rgba(3, 135, 102, 0.2)">smells</span> <span style="background:rgba(5, 117, 197, 0.2)">nice</span>.</li></ol><h3 id="句子成分"><a href="#句子成分" class="headerlink" title="句子成分"></a>句子成分</h3><ol><li>主语</li><li>谓语<ol><li>谓语动词<ol><li>[[动词时态]]<ol><li>动作时间<ul><li>现在</li><li>过去</li><li>将来</li><li>过去将来</li></ul></li><li>动作状态<ul><li>一般</li><li>完成</li><li>进行</li><li>完成进行</li></ul></li><li>动作假设、情感…语气<ul><li>虚拟<br>  If I were a rabbit.</li><li>陈述<br>  I ate a carrot and…</li><li>祈使<br>  Eat this carrot and…</li></ul></li></ol></li></ol></li><li>[[助动词&amp;情态动词|助动词]]<br> 不要把助动词和实义动词混淆</li></ol></li><li>宾语</li><li>宾语补语</li><li>主语补语（表语）</li><li>定语——修饰主语、宾语<br> <span style="background:rgba(3, 135, 102, 0.2)">The little white</span> <span style="background:rgba(240, 107, 5, 0.2)">rabbitate</span> <span style="background:rgba(3, 135, 102, 0.2)">a large</span> <span style="background:rgba(240, 107, 5, 0.2)">carrot</span>.</li><li>状语——修饰谓语动词&#x2F;表语<br> The <span style="background:rgba(240, 107, 5, 0.2)">rabbit</span> <span style="background:rgba(3, 135, 102, 0.2)">atequickly</span></li><li>同位语<br> <span style="background:rgba(240, 107, 5, 0.2)">Papa Rabbit</span>, <span style="background:rgba(3, 135, 102, 0.2)">an English teacher</span>, eats carrots.</li></ol><h2 id="二-复杂句-complex-sentence-与复合句-compound-sentence"><a href="#二-复杂句-complex-sentence-与复合句-compound-sentence" class="headerlink" title="二. 复杂句(complex sentence)与复合句(compound sentence)"></a>二. 复杂句(complex sentence)与复合句(compound sentence)</h2><ol><li>简单句<ol><li>复合句</li><li>复杂句<br> 主句<br> [[从句]]<br> [[名词]]性从句<br>     做主语-&gt;主语从句<br>     作宾语-&gt;宾语从句<br>     作表语-&gt;表语从句<br>     作同位语-&gt;同位语从句<br> 作定语-&gt;定语从句<br> 作状语-&gt;状语从句 ^cde9ae</li></ol></li></ol><h2 id="三-词性（词类）"><a href="#三-词性（词类）" class="headerlink" title="三. 词性（词类）"></a>三. 词性（词类）</h2><blockquote><p>句子成分！&#x3D;词类</p></blockquote><ol><li>[[动词]]<ol><li>谓语动词 ^bf82b9</li><li>[[非谓语动词]]<br> 可以代替从句，从而简化句子，但失去了状态<ol><li>[[非谓语动词#^29fa52|动词不定式]]</li><li>[[非谓语动词#^0cff3d|现在分词]]</li><li>[[非谓语动词#^b420d3|动名词]]</li><li>[[非谓语动词#^725f9f|过去分词]]</li></ol></li></ol></li><li>[[名词]]</li><li>[[冠词]]</li><li>[[代词]]</li><li>[[形容词]]</li><li>[[数词]]</li><li>[[副词]]<br> 修饰或限制动词、形容词，表示范围、程度、情态、语气等的词，一般不能修饰或限制[[名词]]。 ^20eba9</li><li>[[介词]]</li><li>[[叹词]]</li><li>[[连词]]</li></ol>]]></content>
    
    
    <categories>
      
      <category>英语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>英语</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>实现在hexo博客首页展示不背单词的学习数据</title>
    <link href="/posts/939383718/"/>
    <url>/posts/939383718/</url>
    
    <content type="html"><![CDATA[<h1 id="实现在hexo博客首页展示不背单词的学习数据"><a href="#实现在hexo博客首页展示不背单词的学习数据" class="headerlink" title="实现在hexo博客首页展示不背单词的学习数据"></a>实现在hexo博客首页展示不背单词的学习数据</h1><p>今天在背单词时想让网站记录一下数据，于是开始百度ing…<strong>(典型的不务正业）</strong></p><p>发现不背单词没有提供接口后决定自己进行爬取</p><p>使用软件：<strong><a href="https://reqable.com/zh-CN/">Reqable · API抓包调试 + API测试一站式工具</a></strong></p><h2 id="首先在手机上安装此软件，按照步骤安装"><a href="#首先在手机上安装此软件，按照步骤安装" class="headerlink" title="首先在手机上安装此软件，按照步骤安装"></a>首先在手机上安装此软件，按照步骤安装</h2><p>这里找了位仁兄的博客，不会使用可以进行参考：<a href="https://blog.csdn.net/Zuko_chen/article/details/135524420">一键式调试工具—Reqable 使用指南-CSDN博客</a></p><p><strong>先安装证书</strong></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/bbdc/98093165A272A06023C68C5798437764.jpg" alt="点击开发者按钮"></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/bbdc/CC677642A6069B9CFC7C086C9DA35F58.jpg" alt="手机设置找到凭据"></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/bbdc/3C59355D565F60B11C78F71BCA96960A.jpg" alt="安装CA证书"></p><h2 id="开始抓取接口"><a href="#开始抓取接口" class="headerlink" title="开始抓取接口"></a>开始抓取接口</h2><p>点击刚才软件<strong>右下角的飞机</strong>，这样你的软件上就会开始出现应用的请求记录</p><p>然后打开<strong>不背单词</strong>，点击下方第三个按钮进入<strong>仪表盘</strong>，点击<strong>我的数据</strong><strong><strong>下方</strong></strong>的<strong>卡片</strong></p><p>返回刚才的应用</p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/bbdc/313DB9539535C906D5A70C0366B6D7F5.jpg" alt="请求列表"></p><p>点击<strong>显示绿色200</strong>的一个请求</p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/bbdc/37BF34E5A5393F48A7FBBED19E478BBA.jpg" alt="请求页面"></p><p>点击链接右边的复制按钮，这里怕有人点错 附上链接</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>learnywhere.cn<span class="hljs-regexp">/api/</span>bb<span class="hljs-regexp">/dashboard/</span>profile/search?sid=*****<br></code></pre></td></tr></table></figure><p>这里sid便是你的个人id</p><h2 id="Python部分（其实就是一个请求而已）"><a href="#Python部分（其实就是一个请求而已）" class="headerlink" title="Python部分（其实就是一个请求而已）"></a>Python部分（其实就是一个请求而已）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, jsonify<br><span class="hljs-keyword">import</span> requests<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/bbdc&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_profile</span>():<br>    session = requests.Session()<br>    url = <span class="hljs-string">&quot;https://learnywhere.cn/api/bb/dashboard/profile/search?sid=****&quot;</span><br>    response = session.get(url)<br>    data = response.json()<br>    <span class="hljs-keyword">return</span> jsonify(data)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(host=<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, port=<span class="hljs-number">5000</span>)<br></code></pre></td></tr></table></figure><p>这样就能获取到你不背单词的json数据</p><h2 id="博客部分"><a href="#博客部分" class="headerlink" title="博客部分"></a>博客部分</h2><blockquote><p>基本思路就是：在首页名字下方插入一个盒子，在盒子里加上js请求来的json数据，整理后创建元素显示数据</p></blockquote><p><strong>这部分自由发挥，我的绝对不是最好的，你甚至可以直接在js中调用不背单词的接口，但我因为跨域和安全性（防止暴露sid）等问题使用了Python接口</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> url = <span class="hljs-string">&quot;http://[你的服务器ip]:5000/api/bbdc&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);<br>    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();<br><br>    <span class="hljs-keyword">const</span> todayData = data.<span class="hljs-property">data_body</span>.<span class="hljs-property">learnList</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">date</span> === <span class="hljs-string">&quot;今日&quot;</span>);<br>    <span class="hljs-keyword">const</span> todayDuration = data.<span class="hljs-property">data_body</span>.<span class="hljs-property">durationList</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">date</span> === <span class="hljs-string">&quot;今日&quot;</span>);<br><br>    <span class="hljs-keyword">const</span> learnNum = todayData ? todayData.<span class="hljs-property">learnNum</span> : <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">const</span> reviewNum = todayData ? todayData.<span class="hljs-property">reviewNum</span> : <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">const</span> duration = todayDuration ? todayDuration.<span class="hljs-property">duration</span> : <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// 创建一个新的元素来显示数据</span><br>    <span class="hljs-keyword">const</span> dataElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);<br>    dataElement.<span class="hljs-property">textContent</span> = <span class="hljs-string">`单词数: <span class="hljs-subst">$&#123;learnNum&#125;</span> | 复习数: <span class="hljs-subst">$&#123;reviewNum&#125;</span> | 学习时间: <span class="hljs-subst">$&#123;duration&#125;</span> 分钟`</span>;<br><br>    <span class="hljs-comment">// 设置样式</span><br>    dataElement.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = <span class="hljs-string">&quot;14px&quot;</span>;<br>    dataElement.<span class="hljs-property">style</span>.<span class="hljs-property">textAlign</span> = <span class="hljs-string">&quot;center&quot;</span>;<br>    dataElement.<span class="hljs-property">style</span>.<span class="hljs-property">marginTop</span> = <span class="hljs-string">&quot;10px&quot;</span>;<br>    dataElement.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">&quot;#fff&quot;</span>;  <span class="hljs-comment">// 设置文字颜色</span><br><br>    <span class="hljs-comment">// 获取容器并插入新元素</span><br>    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.banner-text.text-center.fade-in-up&quot;</span>);<br>    <span class="hljs-keyword">if</span> (container) &#123;<br>      <span class="hljs-comment">// 通过 flex 布局使内容竖直排列</span><br>      container.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&quot;flex&quot;</span>;<br>      container.<span class="hljs-property">style</span>.<span class="hljs-property">flexDirection</span> = <span class="hljs-string">&quot;column&quot;</span>; <span class="hljs-comment">// 设置竖直排列</span><br>      container.<span class="hljs-property">style</span>.<span class="hljs-property">alignItems</span> = <span class="hljs-string">&quot;center&quot;</span>; <span class="hljs-comment">// 水平居中</span><br>      container.<span class="hljs-property">style</span>.<span class="hljs-property">justifyContent</span> = <span class="hljs-string">&quot;center&quot;</span>; <span class="hljs-comment">// 竖直居中</span><br><br>      <span class="hljs-comment">// 将新元素插入到容器中</span><br>      container.<span class="hljs-title function_">appendChild</span>(dataElement);<br>    &#125;<br><br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Error:&#x27;</span>, error);<br>  &#125;<br>&#125;<br><br><span class="hljs-title function_">fetchData</span>();<br></code></pre></td></tr></table></figure><p>我的博客框架是hexo，因此使用hexo注入器注入到主页的body内</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xquery">const &#123;<span class="hljs-built_in"> root</span>: siteRoot = <span class="hljs-string">&quot;/&quot;</span> &#125; = hexo.config;<br>hexo.extend.injector.register(<span class="hljs-string">&quot;body_end&quot;</span>,`<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;siteRoot&#125;js/bbdc.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>`,<span class="hljs-string">&#x27;home&#x27;</span>);<br></code></pre></td></tr></table></figure><p><a href="https://hexo.io/zh-cn/api/injector.html">注入器（Injector） | Hexo</a></p><p>个人未找到通过id获取sid的方法，知道的大佬可以跟我说，非常感谢</p>]]></content>
    
    
    
    <tags>
      
      <tag>crawler</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>记录一次因批操作引发的问题</title>
    <link href="/posts/421413020/"/>
    <url>/posts/421413020/</url>
    
    <content type="html"><![CDATA[<h1 id="记录LOCK-WRITE报错"><a href="#记录LOCK-WRITE报错" class="headerlink" title="记录LOCK_WRITE报错"></a>记录LOCK_WRITE报错</h1><p>之前 <strong>RDS</strong> 到期了，把数据库表结构和数据导出放入了服务器本地的mysql中部署，然后任何插入行为都出现了 <strong>LOCK_WRITE</strong>相关的报错</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml">### Error updating database. Cause: java.sql.SQLException: The MySQL server is running with the LOCK_WRITE option so it cannot execute this statement <br>### The error may exist in com/dawnlight/chronicle_dawnlight/mapper/TransactionMapper.xml <br>### The error may involve defaultParameterMap <br>### The error occurred while setting parameters <br>### SQL: INSERT INTO transactions (id, user_id, amount, category_id, type, description, date, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, NOW(), NOW())<br>### Cause: java.sql.SQLException: The MySQL server is running with the LOCK_WRITE option so it cannot execute this statement ; <br>uncategorized SQLException;<br>SQL state [HY000]; error code [1290];<br>The MySQL server is running with the LOCK_WRITE option so it cannot execute this statement;<br>nested exception is java.sql.SQLException: The MySQL server is running with the LOCK_WRITE option so it cannot execute this statement<br></code></pre></td></tr></table></figure><p>后来问ChatGPT4，和deepseek都是检查一系列配置文件或有没有开启<strong>只读模式</strong>等等，结果一切正常</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>经过<strong>群内老鸽</strong>和ChatGPT分析</p><p>因为我导入数据的时候执行了批操作，导致可能触发了 <strong>InnoDB 的事务日志保护机制</strong>，导致 <code>LOCK_WRITE</code> 锁定表，防止数据损坏。</p><p><strong>因此</strong></p><p><strong>只需要删除事务日志后重启mysql即可解决问题</strong></p><p><strong>代码实现</strong></p><ol><li><p><strong>先停掉 MySQL</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl stop mysql<br></code></pre></td></tr></table></figure></li><li><p><strong>删除事务日志文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> -f /var/lib/mysql/ib_logfile*<br></code></pre></td></tr></table></figure></li><li><p><strong>重启 MySQL</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl start mysql<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mysql</tag>
      
      <tag>数据库</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Terraria：天顶世界通关纪念</title>
    <link href="/posts/4013144158/"/>
    <url>/posts/4013144158/</url>
    
    <content type="html"><![CDATA[<h1 id="Terraria天顶世界通关"><a href="#Terraria天顶世界通关" class="headerlink" title="Terraria天顶世界通关"></a>Terraria天顶世界通关</h1><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/8.png" alt="这是图片" title="emm，一排奖杯"></p><p>我玩的召唤师，同学玩的射手（堆防战士，花了47h</p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/0.png" alt="这是图片" title="47h"></p><p>似了611次</p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/1.png" alt="这是图片" title="611"></p><p>大世界，所以跑图跑到飞起，但因为资源多，所以发育比较充分（死的比较充分</p><p>纪念一波</p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/2.png" alt="这是图片" title="微光，向日葵是因为之前是腐化"></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/3.png" alt="这是图片" title="梦开始的地方"></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/4.png" alt="这是图片" title="探索的脚步"></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/5.png" alt="这是图片" title="嗯，用蜂蜜卡石巨人"></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/6.png" alt="这是图片" title="沙漠和奇怪的地牢"></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/7.png" alt="这是图片" title="雪地和钓鱼平台（钓不到溜冰鞋💢）"></p><p><img src="https://zheep.oss-cn-beijing.aliyuncs.com/blog/Terraria/9.png" alt="这是图片" title="END"></p>]]></content>
    
    
    <categories>
      
      <category>游戏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>游戏</tag>
      
      <tag>Terraria</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于博客</title>
    <link href="/posts/1244016237/"/>
    <url>/posts/1244016237/</url>
    
    <content type="html"><![CDATA[<h3 id="这是我第四次重构博客"><a href="#这是我第四次重构博客" class="headerlink" title="这是我第四次重构博客"></a>这是我第四次重构博客</h3><p>第一次做博客是在一年前，那时我刚上大一，只会一些基础的 HTML、CSS 和 JavaScript，便简单地做了一个纯静态页面的博客。说是博客，实际上只是一个有着好看主页和 About 页的个人名片。后来，我跟着网上的教程，把它部署到了 GitHub Pages。</p><p>后来，我开始接触前端框架 Vue，发现它能更灵活地构建页面，前端开发变得更加高效。于是，我决定用 Vue 重构博客。这次不仅有主页和 About，还新增了文章分类和文章页面。不过，那时的文章上传方式依旧很“离谱”——每写一篇文章，我就新建一个 router，再做一个文章组件，把内容直接写在里面。（别打我，当时我觉得这样最方便。）</p><p>随着 Java 学习的深入，我学会了用 Spring 和数据库开发后端业务，也逐渐理解了前后端分离的概念，并弄清了各大网络论坛的基本实现原理。</p><p>于是，我又一次重构博客。这次，我用 Vue 进行前端开发，模仿了一些博客框架，从零开始手搓：前端用富文本编辑器编写文章，文章存储到数据库，同时还加入了网盘和记账功能（果然，还是逃不过记账）。</p><p>然后，搭配 Nginx 进行打包部署，并将项目放到了阿里云服务器上。期间，踩了不少坑，比如跨域问题…因为服务器是国内的，网站挂域名需要备案，通过 Cloudflare 进行映射才解决。折腾了一番后，最终成功上线了一个集文章、记账和网盘于一体的网站，甚至还支持多账户系统（有整整 5 个用户！）。记账功能确实挺方便的，不过后来 us.kg 域名寄了，导致网站也跟着凉了。还有，搬数据库也实在是太麻烦了……</p><p>本来我对现成的博客框架是不屑一顾的，但今天用了一次后，只想说，真香！以后就在这里简单写写文章算了，懒得折腾了，反正也没人看</p>]]></content>
    
    
    <categories>
      
      <category>笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>记录</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>书记：《我们为何要睡觉》</title>
    <link href="/posts/983190540/"/>
    <url>/posts/983190540/</url>
    
    <content type="html"><![CDATA[<h1 id="书记：《我们为何要睡觉》"><a href="#书记：《我们为何要睡觉》" class="headerlink" title="书记：《我们为何要睡觉》"></a>书记：《我们为何要睡觉》</h1><blockquote><p><strong>仅对个人习惯进行补充</strong></p></blockquote><hr><h3 id="一、睡眠不足的影响"><a href="#一、睡眠不足的影响" class="headerlink" title="一、睡眠不足的影响"></a>一、<strong>睡眠不足的影响</strong></h3><p><strong>容易变成baka⑨</strong></p><h4 id="认知功能损害"><a href="#认知功能损害" class="headerlink" title="认知功能损害"></a>认知功能损害</h4><table><thead><tr><th>睡眠时长</th><th>认知表现</th><th>情绪状态</th></tr></thead><tbody><tr><td>&lt;6h</td><td>相当于酒驾水平</td><td>易怒焦虑</td></tr><tr><td>6-7h</td><td>下降20-30%</td><td>情绪波动</td></tr><tr><td>7-9h</td><td>最佳状态</td><td>情绪稳定</td></tr></tbody></table><h4 id="慢性健康风险"><a href="#慢性健康风险" class="headerlink" title="慢性健康风险"></a>慢性健康风险</h4><ul><li><strong>破坏免疫系统</strong>，增加生病风险</li><li>增加 <strong>阿尔兹海默症</strong> 的可能性</li><li><strong>渴望高热量食物</strong>，导致体重增加</li><li><strong>寿命减少</strong></li><li><strong>专注力下降</strong>，影响学习和工作效率</li><li><strong>情绪不稳定</strong>，易怒、焦虑增加</li><li><strong>生殖能力下降</strong></li></ul><hr><h3 id="二、睡眠的好处"><a href="#二、睡眠的好处" class="headerlink" title="二、睡眠的好处"></a>二、<strong>睡眠的好处</strong></h3><h4 id="睡眠的生理功能"><a href="#睡眠的生理功能" class="headerlink" title="睡眠的生理功能"></a>睡眠的生理功能</h4><ol><li><strong>神经修复功能</strong></li></ol><ul><li><p>清除大脑代谢废物（如β-淀粉样蛋白，与阿尔茨海默症相关）</p></li><li><p>促进神经元修复与突触重塑</p></li></ul><ol start="2"><li><strong>记忆整合机制</strong></li></ol><ul><li><p>非快速眼动睡眠（NREM）阶段进行记忆分类存储</p></li><li><p>快速眼动睡眠（REM）阶段实现创造性联想</p></li></ul><ol start="3"><li><strong>免疫调节作用</strong></li></ol><ul><li><p>增强T细胞功能，提升抗病毒能力</p></li><li><p>调节炎症因子水平</p></li></ul><h4 id="昼夜节律系统"><a href="#昼夜节律系统" class="headerlink" title="昼夜节律系统"></a>昼夜节律系统</h4><ul><li><p>受下丘脑视交叉上核调控</p></li><li><p>褪黑素分泌受光照强度抑制（蓝光特别敏感）</p></li><li><p>核心体温下降触发睡意（较日间低1℃时最佳）</p></li></ul><h4 id="最佳睡眠时长"><a href="#最佳睡眠时长" class="headerlink" title="最佳睡眠时长"></a><strong>最佳睡眠时长</strong></h4><ul><li><strong>低于 7 小时影响健康</strong></li><li><strong>超过 9 小时可能增加死亡风险</strong></li><li><strong>推荐 7-9 小时的睡眠时间</strong></li></ul><hr><h3 id="三、睡眠周期详解"><a href="#三、睡眠周期详解" class="headerlink" title="三、睡眠周期详解"></a>三、睡眠周期详解</h3><h4 id="睡眠阶段特征"><a href="#睡眠阶段特征" class="headerlink" title="睡眠阶段特征"></a>睡眠阶段特征</h4><ol><li><strong>NREM睡眠（占75-80%）</strong></li></ol><ul><li><p>N1（过渡期）：肌肉放松，易惊醒</p></li><li><p>N2（浅睡眠）：体温下降，心率减缓</p></li><li><p>N3（深睡眠）：生长激素分泌高峰</p></li></ul><ol start="2"><li><strong>REM睡眠（占20-25%）</strong></li></ol><ul><li><p>脑电波类似清醒状态</p></li><li><p>肌肉张力完全抑制（防梦境动作）</p></li><li><p>每90分钟循环一次，后半夜占比增加</p></li></ul><h3 id="睡眠周期演进"><a href="#睡眠周期演进" class="headerlink" title="睡眠周期演进"></a>睡眠周期演进</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-selector-attr">[入睡]</span> → N1 → N2 → N3 → N2 → REM → <span class="hljs-selector-attr">[循环]</span><br>         │          │           │<br>         (<span class="hljs-number">10</span>-<span class="hljs-number">20</span>min) (<span class="hljs-number">30</span>-<span class="hljs-number">40</span>min) (首次<span class="hljs-number">5</span>-<span class="hljs-number">10</span>min)<br></code></pre></td></tr></table></figure><h3 id="四、现代生活对睡眠的干扰"><a href="#四、现代生活对睡眠的干扰" class="headerlink" title="四、现代生活对睡眠的干扰"></a>四、现代生活对睡眠的干扰</h3><h4 id="灯光"><a href="#灯光" class="headerlink" title="灯光"></a><strong>灯光</strong></h4><ul><li>人工灯光重新定义了“午夜”</li><li>LED 光源抑制褪黑素分泌，影响入睡</li></ul><h4 id="酒精"><a href="#酒精" class="headerlink" title="酒精"></a><strong>酒精</strong></h4><ul><li>导致睡眠碎片化</li><li>抑制 REM 睡眠</li><li>本质上是镇静剂，会麻醉大脑</li></ul><h4 id="强制清醒"><a href="#强制清醒" class="headerlink" title="强制清醒"></a><strong>强制清醒</strong></h4><ul><li>酒精、咖啡因、安眠药容易形成恶性循环</li><li>闹钟对心血管系统有害</li></ul><hr><h3 id="五、快速入睡的方法"><a href="#五、快速入睡的方法" class="headerlink" title="五、快速入睡的方法"></a>五、<strong>快速入睡的方法</strong></h3><ol><li><strong>认知行为疗法（CBT-I）</strong></li></ol><ul><li><p>睡眠限制：严格固定起床时间</p></li><li><p>刺激控制：仅将床用于睡眠</p></li></ul><ol start="2"><li><strong>生理调节技术</strong></li></ol><ul><li><p>呼吸法：4-7-8呼吸模式</p></li><li><p>渐进式肌肉放松</p></li><li><p><strong>保持夜间微冷</strong>，适合入睡</p></li><li><p><strong>减少电子产品使用</strong>，避免屏幕蓝光干扰褪黑素分泌</p></li><li><p><strong>使用防蓝光措施</strong>，如夜间模式或防蓝光眼镜</p></li></ul><hr><h3 id="六、特殊场景应对"><a href="#六、特殊场景应对" class="headerlink" title="六、特殊场景应对"></a>六、特殊场景应对</h3><ol><li><p><strong>时差调整</strong>：每24小时最多调整2小时时区</p></li><li><p><strong>轮班工作</strong>：保持固定作息周期（即使倒班）</p></li><li><p><strong>考前睡眠</strong>：重点保证考试前两晚睡眠质量</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
      <tag>睡眠</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法-有序链表（五）</title>
    <link href="/posts/2163665622/"/>
    <url>/posts/2163665622/</url>
    
    <content type="html"><![CDATA[<h1 id="算法-有序链表（五）"><a href="#算法-有序链表（五）" class="headerlink" title="算法-有序链表（五）"></a>算法-有序链表（五）</h1><h2 id="合并K个有序链表"><a href="#合并K个有序链表" class="headerlink" title="合并K个有序链表"></a>合并K个有序链表</h2><h3 id="分治法"><a href="#分治法" class="headerlink" title="分治法"></a><strong>分治法</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for singly-linked list.</span><br><span class="hljs-comment"> * public class ListNode &#123;</span><br><span class="hljs-comment"> * int val;</span><br><span class="hljs-comment"> * ListNode next;</span><br><span class="hljs-comment"> * ListNode() &#123;&#125;</span><br><span class="hljs-comment"> * ListNode(int val) &#123; this.val = val; &#125;</span><br><span class="hljs-comment"> * ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">mergeKLists</span><span class="hljs-params">(ListNode[] lists)</span> &#123;<br>        <span class="hljs-keyword">if</span> (lists.length == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">return</span> split(lists, <span class="hljs-number">0</span>, lists.length - <span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">split</span><span class="hljs-params">(ListNode[] lists, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-keyword">if</span> (i == j)<br>            <span class="hljs-keyword">return</span> lists[i];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> split(lists, i, m);<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> split(lists, m + <span class="hljs-number">1</span>, j);<br>        <span class="hljs-keyword">return</span> mergeTwoLists(left, right);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">mergeTwoLists</span><span class="hljs-params">(ListNode list1, ListNode list2)</span> &#123;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">dummy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">0</span>);<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> dummy;<br>        <span class="hljs-keyword">while</span> (list1 != <span class="hljs-literal">null</span> &amp;&amp; list2 != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">if</span> (list1.val &lt; list2.val) &#123;<br>                current.next = list1;<br>                list1 = list1.next;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                current.next = list2;<br>                list2 = list2.next;<br>            &#125;<br>            current = current.next;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (list1 == <span class="hljs-literal">null</span>) &#123;<br>            current.next = list2;<br>            <span class="hljs-keyword">return</span> dummy.next;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (list2 == <span class="hljs-literal">null</span>) &#123;<br>            current.next = list1;<br>            <span class="hljs-keyword">return</span> dummy.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dummy.next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="链表的中间节点"><a href="#链表的中间节点" class="headerlink" title="链表的中间节点"></a>链表的中间节点</h2><p><strong>快慢指针</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">public</span> ListNode middleNode(ListNode head) &#123;<br>    ListNode <span class="hljs-built_in">p1</span> = head<span class="hljs-comment">;</span><br>    ListNode <span class="hljs-built_in">p2</span> = head<span class="hljs-comment">;</span><br>    <span class="hljs-meta">while</span> (<span class="hljs-built_in">p2</span> != null &amp;&amp; <span class="hljs-built_in">p2</span>.next != null) &#123;<br>        <span class="hljs-built_in">p1</span> = <span class="hljs-built_in">p1</span>.next<span class="hljs-comment">;</span><br>        <span class="hljs-built_in">p2</span> = <span class="hljs-built_in">p2</span>.next.next<span class="hljs-comment">;</span><br>    &#125;<br>    return <span class="hljs-built_in">p1</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法-有序链表（四）删除链表的导数第N个节点</title>
    <link href="/posts/2445309310/"/>
    <url>/posts/2445309310/</url>
    
    <content type="html"><![CDATA[<h1 id="算法-有序链表（四）删除链表的导数第N个节点"><a href="#算法-有序链表（四）删除链表的导数第N个节点" class="headerlink" title="算法-有序链表（四）删除链表的导数第N个节点"></a>算法-有序链表（四）删除链表的导数第N个节点</h1><h2 id="递归法："><a href="#递归法：" class="headerlink" title="递归法："></a>递归法：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">removeNthFromEnd</span><span class="hljs-params">(ListNode head, <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-comment">// 定义哨兵节点，便于删除头结点</span><br>    <span class="hljs-type">ListNode</span> <span class="hljs-variable">dummy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">0</span>,head);<br>    removeFromEnd(dummy, n);<br>    <span class="hljs-keyword">return</span> dummy.next;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">removeFromEnd</span><span class="hljs-params">(ListNode head, <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">null</span>)<br>    <span class="hljs-comment">// 如果head为null，那就返回0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 累加，用于记录当前为倒数第 n+1 个节点</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> removeFromEnd(head.next, n) + <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// 如果当前节点 + 1为导数第n + 1个节点，那就删除next的节点</span><br>    <span class="hljs-keyword">if</span> (num == n + <span class="hljs-number">1</span>) &#123;<br>        head.next = head.next.next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> num;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux美化开机欢迎语并使用Python获取Ip调用天气</title>
    <link href="/posts/3850106952/"/>
    <url>/posts/3850106952/</url>
    
    <content type="html"><![CDATA[<h1 id="Linux-美化开机欢迎语并使用-Python-获取-IP-调用天气"><a href="#Linux-美化开机欢迎语并使用-Python-获取-IP-调用天气" class="headerlink" title="Linux 美化开机欢迎语并使用 Python 获取 IP 调用天气"></a>Linux 美化开机欢迎语并使用 Python 获取 IP 调用天气</h1><p>本篇文章涉及知识：</p><ul><li>Python 的 requests 的使用</li><li>Python 对 JSON 数据的处理</li><li>Linux 中 Toilet 命令的基本使用</li><li><code>.bashrc</code> 脚本的基础使用</li><li><code>echo</code> 颜色输出</li></ul><h2 id="bashrc"><a href="#bashrc" class="headerlink" title=".bashrc"></a><code>.bashrc</code></h2><p><code>.bashrc</code> 是 bash 终端里面指令运行的配置脚本——可以简单理解为登录后自动执行的脚本文件。</p><h3 id="修改文件内容"><a href="#修改文件内容" class="headerlink" title="修改文件内容"></a>修改文件内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim ~/.bashrc<br></code></pre></td></tr></table></figure><p>对 <code>.bashrc</code> 做出的修改，会在下一次启动终端时候生效。如果希望立即生效，可以执行 <code>source</code> 指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><h2 id="Toilet"><a href="#Toilet" class="headerlink" title="Toilet"></a>Toilet</h2><p><code>toilet</code> 是一个命令行工具，用于生成漂亮的 ASCII 艺术字。它类似于 <code>figlet</code>，支持多种字体、颜色和样式。</p><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt-get install toilet<br></code></pre></td></tr></table></figure><h3 id="2-显示简单的文本"><a href="#2-显示简单的文本" class="headerlink" title="2. 显示简单的文本"></a>2. 显示简单的文本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">toilet <span class="hljs-string">&quot;Hello, World!&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">输出结果<br><span class="hljs-type">#</span>  <span class="hljs-variable">H</span>   <span class="hljs-variable">H</span>  <span class="hljs-variable">EEEEE</span>  <span class="hljs-variable">L</span>      <span class="hljs-variable">L</span>       <span class="hljs-variable">OOO</span>      <span class="hljs-variable">W</span>   <span class="hljs-variable">W</span>  <span class="hljs-variable">OOO</span>   <span class="hljs-variable">RRRR</span>   <span class="hljs-variable">L</span>      <span class="hljs-variable">DDDD</span><br><span class="hljs-type">#</span>  <span class="hljs-variable">H</span>   <span class="hljs-variable">H</span>  <span class="hljs-built_in">E</span>      <span class="hljs-variable">L</span>      <span class="hljs-variable">L</span>      <span class="hljs-built_in">O</span>   <span class="hljs-built_in">O</span>     <span class="hljs-variable">W</span>   <span class="hljs-variable">W</span>  <span class="hljs-built_in">O</span>   <span class="hljs-built_in">O</span>  <span class="hljs-variable">R</span>   <span class="hljs-variable">R</span>  <span class="hljs-variable">L</span>      <span class="hljs-built_in">D</span>   <span class="hljs-built_in">D</span><br><span class="hljs-type">#</span>  <span class="hljs-variable">HHHHH</span>  <span class="hljs-variable">EEEE</span>   <span class="hljs-variable">L</span>      <span class="hljs-variable">L</span>      <span class="hljs-built_in">O</span>   <span class="hljs-built_in">O</span>     <span class="hljs-variable">W</span> <span class="hljs-variable">W</span> <span class="hljs-variable">W</span>  <span class="hljs-built_in">O</span>   <span class="hljs-built_in">O</span>  <span class="hljs-variable">RRRR</span>   <span class="hljs-variable">L</span>      <span class="hljs-built_in">D</span>   <span class="hljs-built_in">D</span><br><span class="hljs-type">#</span>  <span class="hljs-variable">H</span>   <span class="hljs-variable">H</span>  <span class="hljs-built_in">E</span>      <span class="hljs-variable">L</span>      <span class="hljs-variable">L</span>      <span class="hljs-built_in">O</span>   <span class="hljs-built_in">O</span>     <span class="hljs-variable">W</span> <span class="hljs-variable">W</span> <span class="hljs-variable">W</span>  <span class="hljs-built_in">O</span>   <span class="hljs-built_in">O</span>  <span class="hljs-variable">R</span> <span class="hljs-variable">R</span>    <span class="hljs-variable">L</span>      <span class="hljs-built_in">D</span>   <span class="hljs-built_in">D</span><br><span class="hljs-type">#</span>  <span class="hljs-variable">H</span>   <span class="hljs-variable">H</span>  <span class="hljs-variable">EEEEE</span>  <span class="hljs-variable">LLLLL</span>  <span class="hljs-variable">LLLLL</span>   <span class="hljs-variable">OOO</span>       <span class="hljs-variable">W</span> <span class="hljs-variable">W</span>    <span class="hljs-variable">OOO</span>   <span class="hljs-variable">R</span>  <span class="hljs-variable">RR</span>  <span class="hljs-variable">LLLLL</span>  <span class="hljs-variable">DDDD</span><br></code></pre></td></tr></table></figure><h3 id="3-常用选项"><a href="#3-常用选项" class="headerlink" title="3. 常用选项"></a>3. 常用选项</h3><ul><li><code>-f [字体名]</code> 指定字体文件</li><li><code>-F [效果]</code> 添加特殊效果（border, metal 等）</li><li><code>--gay</code> 彩虹色文字</li><li><code>-w [宽度]</code> 设置输出宽度</li></ul><h3 id="4-组合使用"><a href="#4-组合使用" class="headerlink" title="4. 组合使用"></a>4. 组合使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">toilet -F border --gay <span class="hljs-string">&quot;Hello World!&quot;</span><br></code></pre></td></tr></table></figure><p>因此，我们可以把 <code>toilet</code> 的命令添加到 <code>.bashrc</code> 文件中，开机就可以自动展示自定义的彩色字符画。</p><h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="1-下载-requests"><a href="#1-下载-requests" class="headerlink" title="1. 下载 requests"></a>1. 下载 requests</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install requests<br></code></pre></td></tr></table></figure><h3 id="2-简单使用"><a href="#2-简单使用" class="headerlink" title="2. 简单使用"></a>2. 简单使用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>url = <span class="hljs-string">&quot;https://www.cz88.net/api/cz88/ip/base&quot;</span><br>params = &#123;<span class="hljs-string">&quot;ip&quot;</span>: <span class="hljs-string">&quot;要查询的ip&quot;</span>&#125;<br>headers = &#123;<span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0&quot;</span>&#125;<br>response = requests.get(url, headers=headers, params=params)<br></code></pre></td></tr></table></figure><h3 id="3-解析响应"><a href="#3-解析响应" class="headerlink" title="3. 解析响应"></a>3. 解析响应</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:<br>    data = response.json()<br>    <span class="hljs-built_in">print</span>(data)<br></code></pre></td></tr></table></figure><h2 id="4-代码示例"><a href="#4-代码示例" class="headerlink" title="4. 代码示例"></a>4. 代码示例</h2><h3 id="4-1-通过-IP-调用-API-返回地址值"><a href="#4-1-通过-IP-调用-API-返回地址值" class="headerlink" title="4.1 通过 IP 调用 API 返回地址值"></a>4.1 通过 IP 调用 API 返回地址值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># 获取登录者 IP</span><br>ip = os.popen(<span class="hljs-string">&quot;last | head -n 1 | awk &#x27;&#123;print $3&#125;&#x27;&quot;</span>).read().strip()<br><br><span class="hljs-comment"># 请求的 URL</span><br>url = <span class="hljs-string">f&quot;https://www.cz88.net/api/cz88/ip/base?ip=<span class="hljs-subst">&#123;ip&#125;</span>&quot;</span><br>headers = &#123;<span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0&quot;</span>&#125;<br><br><span class="hljs-comment"># 发起 GET 请求</span><br>ipResponse = requests.get(url, headers=headers)<br>city_code = <span class="hljs-string">&quot;&quot;</span><br><br><span class="hljs-keyword">if</span> ipResponse.status_code == <span class="hljs-number">200</span>:<br>    data = ipResponse.json()<br>    <span class="hljs-keyword">if</span> data.get(<span class="hljs-string">&quot;success&quot;</span>):<br>        ip_data = data[<span class="hljs-string">&quot;data&quot;</span>]<br>        country = ip_data[<span class="hljs-string">&quot;country&quot;</span>]<br>        province = ip_data[<span class="hljs-string">&quot;province&quot;</span>]<br>        city = ip_data[<span class="hljs-string">&quot;city&quot;</span>]<br>        city_code = ip_data[<span class="hljs-string">&quot;cityCode&quot;</span>]<br>        isp = ip_data[<span class="hljs-string">&quot;isp&quot;</span>]<br>        time = data[<span class="hljs-string">&quot;time&quot;</span>]<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;country&#125;</span> <span class="hljs-subst">&#123;province&#125;</span> <span class="hljs-subst">&#123;city&#125;</span> <span class="hljs-subst">&#123;isp&#125;</span> <span class="hljs-subst">&#123;time&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="4-2-通过城市-code-获取天气"><a href="#4-2-通过城市-code-获取天气" class="headerlink" title="4.2 通过城市 code 获取天气"></a>4.2 通过城市 code 获取天气</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">weatherResponse = requests.get(<span class="hljs-string">f&quot;https://restapi.amap.com/v3/weather/weatherInfo?city=<span class="hljs-subst">&#123;city_code&#125;</span>&amp;key=[你的key]&quot;</span>)<br><br><span class="hljs-keyword">if</span> weatherResponse.status_code == <span class="hljs-number">200</span>:<br>    weather_data = weatherResponse.json()<br>    <span class="hljs-keyword">if</span> weather_data.get(<span class="hljs-string">&quot;status&quot;</span>) == <span class="hljs-string">&quot;1&quot;</span>:<br>        live_weather = weather_data[<span class="hljs-string">&quot;lives&quot;</span>][<span class="hljs-number">0</span>]<br>        weather = live_weather[<span class="hljs-string">&quot;weather&quot;</span>]<br>        temperature = live_weather[<span class="hljs-string">&quot;temperature&quot;</span>]<br>        wind_direction = live_weather[<span class="hljs-string">&quot;winddirection&quot;</span>]<br>        wind_power = live_weather[<span class="hljs-string">&quot;windpower&quot;</span>]<br>        humidity = live_weather[<span class="hljs-string">&quot;humidity&quot;</span>]<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;天气：<span class="hljs-subst">&#123;weather&#125;</span> 温度：<span class="hljs-subst">&#123;temperature&#125;</span> 风向：<span class="hljs-subst">&#123;wind_direction&#125;</span> 风力：<span class="hljs-subst">&#123;wind_power&#125;</span> 湿度：<span class="hljs-subst">&#123;humidity&#125;</span>%&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="5-在-Linux-启动时自动执行"><a href="#5-在-Linux-启动时自动执行" class="headerlink" title="5. 在 Linux 启动时自动执行"></a>5. 在 Linux 启动时自动执行</h3><p>将代码保存为 <code>ipInfo.py</code>，然后在 <code>.bashrc</code> 文件中添加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 /usr/local/python/ipInfo.py<br></code></pre></td></tr></table></figure><p>这样，当你登录 Linux 服务器时，就会自动弹出字符画和 IP 信息。</p><h2 id="6-美化输出"><a href="#6-美化输出" class="headerlink" title="6. 美化输出"></a>6. 美化输出</h2><p>可以使用 <code>tput</code>、<code>pv</code>、<code>lolcat</code> 进行美化：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt install pv lolcat<br></code></pre></td></tr></table></figure><p>然后使用以下方式打印美化输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">bold=$(tput bold)<br>normal=$(tput sgr0)<br>output=$(python3 /usr/local/python/ipInfo.py)<br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;bold&#125;</span><span class="hljs-variable">$&#123;output&#125;</span><span class="hljs-variable">$&#123;normal&#125;</span>&quot;</span> | pv -qL 10 | lolcat<br></code></pre></td></tr></table></figure><p>这样，文字会以每秒 10 个字符的速度逐字打印，并且带有彩虹渐变。</p><h2 id="7-参考资料"><a href="#7-参考资料" class="headerlink" title="7. 参考资料"></a>7. 参考资料</h2><ul><li><a href="https://blog.csdn.net/Dreamhai/article/details/103432525">Linux <code>echo</code> 颜色输出</a></li><li><a href="https://blog.csdn.net/xhtchina/article/details/112931829">Linux 管道符 <code>|</code> 使用详解</a></li></ul><hr><p><strong>后会有期！</strong></p><p>2024 年 12 月 8 日 12:45:31</p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Python</tag>
      
      <tag>爬虫</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法-有序链表（三）根据值删除节点</title>
    <link href="/posts/2505439617/"/>
    <url>/posts/2505439617/</url>
    
    <content type="html"><![CDATA[<h1 id="算法-有序链表（三）根据值删除节点："><a href="#算法-有序链表（三）根据值删除节点：" class="headerlink" title="算法-有序链表（三）根据值删除节点："></a>算法-有序链表（三）根据值删除节点：</h1><h2 id="迭代法："><a href="#迭代法：" class="headerlink" title="迭代法："></a>迭代法：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">deleteNode</span><span class="hljs-params">(ListNode head, <span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-comment">// 哨兵节点，用于处理删除头节点的情况</span><br>    <span class="hljs-type">ListNode</span> <span class="hljs-variable">sentry</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">0</span>, head);<br>    <span class="hljs-comment">// 遍历链表</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">ListNode</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> sentry; current.next != <span class="hljs-literal">null</span>; current = current.next) &#123;<br>        <span class="hljs-keyword">if</span> (current.next.val == val) &#123;<br>            <span class="hljs-comment">// 删除节点</span><br>            current.next = current.next.next;<br>            <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 删除后直接退出循环</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> sentry.next; <span class="hljs-comment">// 返回新链表的头节点</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="递归法："><a href="#递归法：" class="headerlink" title="递归法："></a>递归法：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">removeNode</span><span class="hljs-params">(ListNode p,<span class="hljs-type">int</span> val)</span> &#123;<br>    <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">if</span> (p.val == val)&#123;<br>        <span class="hljs-keyword">return</span> removeNode(p.next,val);<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        p.next = removeNode(p.next,val);<br>        <span class="hljs-keyword">return</span> p;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法-有序链表（二）反转单向链表</title>
    <link href="/posts/3095623497/"/>
    <url>/posts/3095623497/</url>
    
    <content type="html"><![CDATA[<h1 id="算法-有序链表（二）反转单向链表："><a href="#算法-有序链表（二）反转单向链表：" class="headerlink" title="算法-有序链表（二）反转单向链表："></a>算法-有序链表（二）反转单向链表：</h1><h3 id="方法一：构造新链表，遍历当前链表，将数据插入新链表头部"><a href="#方法一：构造新链表，遍历当前链表，将数据插入新链表头部" class="headerlink" title="方法一：构造新链表，遍历当前链表，将数据插入新链表头部"></a>方法一：构造新链表，遍历当前链表，将数据插入新链表头部</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">reverseList</span><span class="hljs-params">(ListNode head)</span> &#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">ListNode</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">for</span> (; head != <span class="hljs-literal">null</span>; head = head.next) &#123;<br>        n = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(head.val, n);<br>    &#125;<br>    <span class="hljs-keyword">return</span> n;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="方法二：与方法一类似，构建一个新节点用于存储倒序后的链表，区别是不需要反复创建新节点，而是从旧的节点上拿过来"><a href="#方法二：与方法一类似，构建一个新节点用于存储倒序后的链表，区别是不需要反复创建新节点，而是从旧的节点上拿过来" class="headerlink" title="方法二：与方法一类似，构建一个新节点用于存储倒序后的链表，区别是不需要反复创建新节点，而是从旧的节点上拿过来"></a>方法二：与方法一类似，构建一个新节点用于存储倒序后的链表，区别是不需要反复创建新节点，而是从旧的节点上拿过来</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">reverseList</span><span class="hljs-params">(ListNode head)</span> &#123;<br>    <span class="hljs-type">List</span> <span class="hljs-variable">l1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>(head);<br>    <span class="hljs-type">List</span> <span class="hljs-variable">l2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>(<span class="hljs-literal">null</span>);<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">first</span> <span class="hljs-operator">=</span> l1.removeFirst();<br>        <span class="hljs-keyword">if</span> (first == <span class="hljs-literal">null</span>)<br>            <span class="hljs-keyword">break</span>;<br>        l2.addFirst(first);<br>    &#125;<br>    <span class="hljs-keyword">return</span> l2.head;<br>&#125;<br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">List</span> &#123;<br>    ListNode head;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">List</span><span class="hljs-params">(ListNode head)</span> &#123;<br>        <span class="hljs-built_in">this</span>.head = head;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addFirst</span><span class="hljs-params">(ListNode first)</span> &#123;<br>        first.next = head;<br>        head = first;<br>    &#125;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">removeFirst</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> head;<br>        <span class="hljs-keyword">if</span> (head != <span class="hljs-literal">null</span>) &#123;<br>            head = head.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> h;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="方法三：使用递归进行求解"><a href="#方法三：使用递归进行求解" class="headerlink" title="方法三：使用递归进行求解"></a>方法三：使用递归进行求解</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">reList</span><span class="hljs-params">(ListNode p)</span> &#123;<br>    <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">null</span> || p.next == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">return</span> p;<br>    &#125;<br>    <span class="hljs-type">ListNode</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> reList(p.next);<br>    p.next.next = p;<br>    p.next = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">return</span> last;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>方法四：使用双指针进行逐步反转</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">reverseList</span><span class="hljs-params">(ListNode head)</span> &#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">ListNode</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">while</span> (head != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">o2</span> <span class="hljs-operator">=</span> head.next;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">o1</span> <span class="hljs-operator">=</span> n1;<br>        n1 = head;<br>        n1.next = o1;<br>        head = o2;<br>    &#125;<br>    <span class="hljs-keyword">return</span> n1;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构-递归（三）</title>
    <link href="/posts/2890764492/"/>
    <url>/posts/2890764492/</url>
    
    <content type="html"><![CDATA[<h1 id="数据结构-递归（三）"><a href="#数据结构-递归（三）" class="headerlink" title="数据结构-递归（三）"></a>数据结构-递归（三）</h1><h2 id="多路递归"><a href="#多路递归" class="headerlink" title="多路递归"></a>多路递归</h2><h3 id="汉诺塔："><a href="#汉诺塔：" class="headerlink" title="汉诺塔："></a>汉诺塔：</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @param n 圆盘个数</span><br><span class="hljs-comment"> * @param a 起始柱子</span><br><span class="hljs-comment"> * @param b 中间柱子</span><br><span class="hljs-comment"> * @param c 目标柱子</span><br><span class="hljs-comment"> */</span><br>static void move(int n, LinkedList&lt;Integer&gt; a, LinkedList&lt;Integer&gt; b, LinkedList&lt;Integer&gt; c) &#123;<br>    <span class="hljs-comment">//如果 0 就中止返回</span><br>    if (n == <span class="hljs-number">0</span>) return;<br>    <span class="hljs-comment">//把除了最后一个圆盘，通过c柱子移动到b柱子</span><br>    move(n - <span class="hljs-number">1</span>, a, c, b);<br>    <span class="hljs-comment">//把a最后一个圆盘移动到c;</span><br>    c<span class="hljs-selector-class">.addLast</span>(a.removeLast());<span class="hljs-comment">//中间</span><br>    <span class="hljs-comment">//把除了最后一个圆盘，通过a柱子移动到c柱子</span><br>    move(n - <span class="hljs-number">1</span>, b, a, c);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="杨辉三角："><a href="#杨辉三角：" class="headerlink" title="杨辉三角："></a>杨辉三角：</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//生成当前坐标的值</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">element</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> i, <span class="hljs-built_in">int</span> j</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span> || i == j) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> element(i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>) + element(i - <span class="hljs-number">1</span>, j);<br>&#125;<br><span class="hljs-comment">//生成空格，用于居中</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printSpace</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n, <span class="hljs-built_in">int</span> a</span>)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; (n - <span class="hljs-number">1</span> - a) * <span class="hljs-number">2</span>; i++) &#123;<br>        System.<span class="hljs-keyword">out</span>.print(<span class="hljs-string">&quot; &quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//创建杨辉三角</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">create</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n</span>)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        printSpace(n,i);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt;= i; j++) &#123;<br>            System.<span class="hljs-keyword">out</span>.printf(<span class="hljs-string">&quot;%-4d&quot;</span>, element(i, j));<br>        &#125;<br>        System.<span class="hljs-keyword">out</span>.println();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p><strong>如此调用过于繁琐，因此我们可以舍弃递归（？），使用数组单独记忆上一排的数据从而计算</strong></p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">create</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n</span>)</span> &#123;<br>    <span class="hljs-comment">//创建记忆数组</span><br>    <span class="hljs-built_in">int</span>[] triangle = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[n];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-comment">//创建临时数组</span><br>        <span class="hljs-built_in">int</span>[] temp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[n];<br>        printSpace(n, i);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt;= i; j++) &#123;<br>            <span class="hljs-comment">//使用记忆数组进行计算</span><br>            temp[j] = (j == <span class="hljs-number">0</span> || i == j) ? <span class="hljs-number">1</span> : triangle[j - <span class="hljs-number">1</span>] + triangle[j];<br>            System.<span class="hljs-keyword">out</span>.printf(<span class="hljs-string">&quot;%-4d&quot;</span>, temp[j]);<br>        &#125;<br>        <span class="hljs-comment">//计算完成后将当前行进行记忆，用于下一次计算</span><br>        triangle = temp;<br>        System.<span class="hljs-keyword">out</span>.println();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>当前，杨辉三角是可以通过每行前一项计算出下一项的，暂不展开</strong></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构-递归（二）</title>
    <link href="/posts/3780326302/"/>
    <url>/posts/3780326302/</url>
    
    <content type="html"><![CDATA[<h1 id="数据结构-递归（二）"><a href="#数据结构-递归（二）" class="headerlink" title="数据结构-递归（二）"></a>数据结构-递归（二）</h1><h2 id="爆栈问题（栈溢出）："><a href="#爆栈问题（栈溢出）：" class="headerlink" title="爆栈问题（栈溢出）："></a>爆栈问题（栈溢出）：</h2><p><strong>例子：</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] <span class="hljs-keyword">args</span></span>)</span> &#123;<br>    System.<span class="hljs-keyword">out</span>.println(f(<span class="hljs-number">15000</span>));<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">long</span> <span class="hljs-title">f</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> n</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> n + f(n - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>递归需要在所有方法结束之后才会进行释放资源，因此当调用的方法足够多的时候，就会让内存占满，从而发成栈溢出事件</strong></p><p><strong>因此，我们出现了尾调用和尾递归</strong></p><hr><h2 id="尾调用："><a href="#尾调用：" class="headerlink" title="尾调用："></a><strong>尾调用：</strong></h2><p><strong>函数的最后一步是调用函数，成为尾调用</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-type">b()</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>这些方法不是：</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>() &#123;<br>    const c = b()<br>    <span class="hljs-keyword">return</span> <span class="hljs-type">c</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-type">b()</span> + <span class="hljs-number">1</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(x) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-type">b()</span> + x<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="尾递归：最后调用的函数是他本身"><a href="#尾递归：最后调用的函数是他本身" class="headerlink" title="尾递归：最后调用的函数是他本身"></a>尾递归：最后调用的函数是他本身</h2><h3 id="如何解决尾递归？"><a href="#如何解决尾递归？" class="headerlink" title="如何解决尾递归？"></a>如何解决尾递归？</h3><p><strong>把尾递归转化为迭代</strong></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-type">long</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">long</span> n, <span class="hljs-type">long</span> accumulator)</span> </span>&#123;<br>    <span class="hljs-keyword">while</span> (n != <span class="hljs-number">1</span>) &#123;<br>        accumulator += n;<br>        n--;<br>    &#125;<br>    <span class="hljs-keyword">return</span> accumulator + <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构-递归（一）</title>
    <link href="/posts/3511017286/"/>
    <url>/posts/3511017286/</url>
    
    <content type="html"><![CDATA[<h1 id="数据结构-递归（一）"><a href="#数据结构-递归（一）" class="headerlink" title="数据结构-递归（一）"></a>数据结构-递归（一）</h1><h2 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h2><p>在计算机科学中，递归是一种解决计算问题的方法，其中<strong>解决</strong>方案取决于<strong>同一类问题</strong>的更小子集</p><p><strong>递归遍历链表的例子：</strong></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">void f(<span class="hljs-keyword">Node</span> <span class="hljs-title">node</span>) &#123;<br>    if(<span class="hljs-keyword">node</span> <span class="hljs-title">== nu11</span>)&#123;<br>        return;<br>    f(node.next);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>说明:</strong></p><ul><li><p><strong>自己调用自己</strong>，如果说每个函数对应着一种解决方案，自己调用自己<strong>意味着解决方案</strong>是<strong>一样</strong>的(有规律的)</p></li><li><p>每次调用，函数处理的<strong>数据</strong>会<strong>较上次缩减</strong>(子集)，而且<strong>最后</strong>会<strong>缩减至无需继续递归</strong></p></li><li><p><strong>内层函数</strong>调用(子集处理)<strong>完成</strong>，<strong>外层函数才能算</strong>调用<strong>完成</strong></p></li></ul><h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ul><li><p>确定能否使用递归求解</p></li><li><p>推导出递推关系，即父问题与子问题的关系，以及递归的结束条件</p></li></ul><p><em>先递后归</em></p><h2 id="例1：阶乘"><a href="#例1：阶乘" class="headerlink" title="例1：阶乘"></a>例1：阶乘</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">factorial</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> n * <span class="hljs-built_in">factorial</span>(n - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="例2：倒序字符串"><a href="#例2：倒序字符串" class="headerlink" title="例2：倒序字符串"></a>例2：倒序字符串</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reversePrint</span>(<span class="hljs-built_in">String</span> <span class="hljs-built_in">str</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">str</span>.<span class="hljs-property">isEmpty</span>()) <span class="hljs-keyword">return</span>;<br>    System.<span class="hljs-property">out</span>.<span class="hljs-property">println</span>(<span class="hljs-built_in">str</span>.<span class="hljs-property">charAt</span>(<span class="hljs-built_in">str</span>.<span class="hljs-property">length</span>()<span class="hljs-number">-1</span>));<br>    <span class="hljs-title function_">reversePrint</span>(<span class="hljs-built_in">str</span>.<span class="hljs-property">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">str</span>.<span class="hljs-property">length</span>()<span class="hljs-number">-1</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="例3：二分查找"><a href="#例3：二分查找" class="headerlink" title="例3：二分查找"></a><strong>例3：二分查找</strong></h2><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">recursion</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[] arr, <span class="hljs-keyword">int</span> <span class="hljs-keyword">target</span>)</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">recursionMain</span><span class="hljs-params">(arr, <span class="hljs-keyword">target</span>, <span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>)</span></span>;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">recursionMain</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[] arr, <span class="hljs-keyword">int</span> <span class="hljs-keyword">target</span>, <span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> j)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (i &gt; j) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br><br>    <span class="hljs-keyword">int</span> mid = (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">target</span> &lt; arr[mid]) &#123;<br>        <span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">recursionMain</span><span class="hljs-params">(arr, <span class="hljs-keyword">target</span>, i, mid - <span class="hljs-number">1</span>)</span></span>;<br>    &#125; <span class="hljs-function"><span class="hljs-keyword">else</span> <span class="hljs-title">if</span> <span class="hljs-params">(arr[mid] &lt; <span class="hljs-keyword">target</span>)</span> </span>&#123;<br>        <span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">recursionMain</span><span class="hljs-params">(arr, <span class="hljs-keyword">target</span>, mid + <span class="hljs-number">1</span>, j)</span></span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> mid;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="例四：冒泡排序"><a href="#例四：冒泡排序" class="headerlink" title="例四：冒泡排序"></a>例四：冒泡排序</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span>[] <span class="hljs-title">bubbleMain</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[] arr, <span class="hljs-built_in">int</span> j</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> arr;<br>    &#125;<br>    <span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>;<span class="hljs-comment">//用于记录i交换的位置</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; j; i++) &#123;<br>        <span class="hljs-keyword">if</span> (arr[i] &gt; arr[i + <span class="hljs-number">1</span>]) &#123;<br>            <span class="hljs-built_in">int</span> temp = arr[i];<br>            arr[i] = arr[i + <span class="hljs-number">1</span>];<br>            arr[i + <span class="hljs-number">1</span>] = temp;<br>            x = i;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//交换最终的位置作为边界，这样就不用进行后面多余的循环了</span><br>    bubbleMain(arr, x);<br>    <span class="hljs-keyword">return</span> arr;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="例五：插入排序"><a href="#例五：插入排序" class="headerlink" title="例五：插入排序"></a>例五：插入排序</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">InsertionSortMain</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> low)</span> </span>&#123;<br>    <span class="hljs-comment">// 如果待插入值已经在数组尾部之后，就说明排序结束</span><br>    <span class="hljs-keyword">if</span> (low == arr.length) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">//获取待插入值</span><br>    <span class="hljs-type">int</span> t = arr[low];<br>    <span class="hljs-comment">//定义插入值将要比较位置的索引</span><br>    <span class="hljs-type">int</span> i = low - <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">//如果发现比较值小于插入值，说明这一轮排序完成</span><br>    <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; arr[i] &gt; t) &#123;<br>        <span class="hljs-comment">//如果比较值大于插入值，则比较值向右移动一位</span><br>        arr[i + <span class="hljs-number">1</span>] = arr[i];<br>        <span class="hljs-comment">//继续向前比较</span><br>        i--;<br>    &#125;<br>    <span class="hljs-comment">//比较值小于插入值，就在比较值右边插入插入值，如果 i 为 -1，直接插入0索引，因此不用担心</span><br>    arr[i + <span class="hljs-number">1</span>] = t;<br>    <span class="hljs-comment">//low 的值已经插入完成，现在拿起 low + 1 的值进行比较</span><br>    <span class="hljs-built_in">InsertionSortMain</span>(arr, low + <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">ps：如果插入值为 4<br>   <span class="hljs-comment">[ 1 ,2 ,3, 5 ,5 ,6 ,7 ]</span><br>              ↑ 这是插入位置，因为上一轮 arr <span class="hljs-comment">[ i + 1 ]</span> = arr<span class="hljs-comment">[ i ]</span> ，因此无须担心会有数据丢失<br></code></pre></td></tr></table></figure><h2 id="例六：斐波那契数列第N个数的值"><a href="#例六：斐波那契数列第N个数的值" class="headerlink" title="例六：斐波那契数列第N个数的值"></a>例六：斐波那契数列第N个数的值</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart">private <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> f(<span class="hljs-built_in">int</span> <span class="hljs-built_in">num</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">num</span> == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">num</span> == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> f(<span class="hljs-built_in">num</span> - <span class="hljs-number">1</span>) + f(<span class="hljs-built_in">num</span> - <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ps : 调用程序次数也是斐波那契数列，具体公式为：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span>* f(n + <span class="hljs-number">1</span>) - <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>时间复杂度：Θ &#x3D; 1.618^n</p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法-有序链表（一）</title>
    <link href="/posts/625834366/"/>
    <url>/posts/625834366/</url>
    
    <content type="html"><![CDATA[<h1 id="算法-有序链表（一）"><a href="#算法-有序链表（一）" class="headerlink" title="算法-有序链表（一）"></a>算法-有序链表（一）</h1><h2 id="1-合并两个有序链表"><a href="#1-合并两个有序链表" class="headerlink" title="1.合并两个有序链表"></a>1.合并两个有序链表</h2><ul><li><p><strong>基础代码实现</strong></p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for singly-linked list.</span><br><span class="hljs-comment"> * public class ListNode &#123;</span><br><span class="hljs-comment"> * int val;</span><br><span class="hljs-comment"> * ListNode next;</span><br><span class="hljs-comment"> * ListNode() &#123;&#125;</span><br><span class="hljs-comment"> * ListNode(int val) &#123; this.val = val; &#125;</span><br><span class="hljs-comment"> * ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">mergeTwoLists</span><span class="hljs-params">(ListNode list1, ListNode list2)</span> &#123;<br>        <span class="hljs-comment">//定义哨兵头结点，便于返回数据</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">dummy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">0</span>);<br>        <span class="hljs-comment">//定义当前节点，便于操控索引前进</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> dummy;<br>        <span class="hljs-keyword">while</span> (list1 != <span class="hljs-literal">null</span> &amp;&amp; list2 != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">if</span> (list1.val &lt; list2.val) &#123;<br>                <span class="hljs-comment">//让较小的值插入到当前节点的下一个节点</span><br>                current.next = list1;<br>                <span class="hljs-comment">//让当前 current 指向的节点移动到下一个节点</span><br>                list1 = list1.next;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                current.next = list2;<br>                list2 = list2.next;<br>            &#125;<br>            <span class="hljs-comment">//向下移动主节点</span><br>            current = current.next;<br>        &#125;<br>        <span class="hljs-comment">//如果其中一个节点遍历完毕或为空，就让另一个节点剩下的元素插入到 current 的下一个节点</span><br>        <span class="hljs-keyword">if</span> (list1 == <span class="hljs-literal">null</span>) &#123;<br>            current.next = list2;<br>            <span class="hljs-keyword">return</span> dummy.next;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (list2 == <span class="hljs-literal">null</span>) &#123;<br>            current.next = list1;<br>            <span class="hljs-keyword">return</span> dummy.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dummy.next;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-删除排序链表中的重复元素"><a href="#2-删除排序链表中的重复元素" class="headerlink" title="2.删除排序链表中的重复元素"></a>2.删除排序链表中的重复元素</h2><ul><li><p><strong>基础代码实现</strong></p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for singly-linked list.</span><br><span class="hljs-comment"> * public class ListNode &#123;</span><br><span class="hljs-comment"> * int val;</span><br><span class="hljs-comment"> * ListNode next;</span><br><span class="hljs-comment"> * ListNode() &#123;&#125;</span><br><span class="hljs-comment"> * ListNode(int val) &#123; this.val = val; &#125;</span><br><span class="hljs-comment"> * ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">deleteDuplicates</span><span class="hljs-params">(ListNode head)</span> &#123;<br>        <span class="hljs-comment">// 定义当前指针</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> head;<br>        <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">while</span> (cur.next != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">// 如果当前值和下一个值相等，那就直接指向下下一个值（删除下一个值）</span><br>            <span class="hljs-keyword">if</span> (cur.val == cur.next.val) &#123;<br>                cur.next = cur.next.next;<br>            <span class="hljs-comment">// 否则前移动</span><br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                cur = cur.next;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构-链表（三）双向哨兵循环链表</title>
    <link href="/posts/1196199971/"/>
    <url>/posts/1196199971/</url>
    
    <content type="html"><![CDATA[<h1 id="数据结构-链表（三）双向哨兵循环链表"><a href="#数据结构-链表（三）双向哨兵循环链表" class="headerlink" title="数据结构-链表（三）双向哨兵循环链表"></a>数据结构-链表（三）双向哨兵循环链表</h1><h2 id="代码实现："><a href="#代码实现：" class="headerlink" title="代码实现："></a>代码实现：</h2><ul><li><p><strong>构造</strong></p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> LinkedLists;<br><br><span class="hljs-keyword">import</span> java.util.NoSuchElementException;<br><span class="hljs-keyword">import</span> java.util.function.Consumer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoublyLoopLinkedListSentinel</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Node_</span> <span class="hljs-variable">sentinel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node_</span>(<span class="hljs-literal">null</span>, -<span class="hljs-number">1</span>, <span class="hljs-literal">null</span>);<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DoublyLoopLinkedListSentinel</span><span class="hljs-params">()</span> &#123;<br>        sentinel.prev = sentinel;<br>        sentinel.next = sentinel;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node_</span> &#123;<br>        Node_ prev;<br>        <span class="hljs-type">int</span> value;<br>        Node_ next;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node_</span><span class="hljs-params">(Node_ prev, <span class="hljs-type">int</span> value, Node_ next)</span> &#123;<br>            <span class="hljs-built_in">this</span>.prev = prev;<br>            <span class="hljs-built_in">this</span>.value = value;<br>            <span class="hljs-built_in">this</span>.next = next;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>插入</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> addFirst(<span class="hljs-built_in">int</span> value) &#123;<br>    Node_ <span class="hljs-keyword">next</span> = sentinel.<span class="hljs-keyword">next</span>;<br>    Node_ newNode = <span class="hljs-keyword">new</span> Node_(sentinel, value, <br>    sentinel.<span class="hljs-keyword">next</span> = newNode;<br>    <span class="hljs-keyword">next</span>.prev = newNode;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> insert(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>, <span class="hljs-built_in">int</span> value) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">index</span> == <span class="hljs-number">0</span>) &#123;<br>        addFirst(value);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    Node_ prev = findByIndex(<span class="hljs-keyword">index</span> - <span class="hljs-number">1</span>);<br>    Node_ <span class="hljs-keyword">next</span> = prev.<span class="hljs-keyword">next</span>;<br>    prev.<span class="hljs-keyword">next</span> = <span class="hljs-keyword">new</span> Node_(prev, value, <span class="hljs-keyword">next</span>);<br>    <span class="hljs-keyword">next</span>.prev = prev.<span class="hljs-keyword">next</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>删除</strong></p>  <figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs abnf">private void removeFirst() &#123;<br>    if (sentinel.next <span class="hljs-operator">=</span><span class="hljs-operator">=</span> sentinel) &#123;<br>        throw new NoSuchElementException(<span class="hljs-string">&quot;索引为空&quot;</span>)<span class="hljs-comment">;</span><br>    &#125;<br>    Node_ next <span class="hljs-operator">=</span> sentinel.next.next<span class="hljs-comment">;</span><br>    sentinel.next <span class="hljs-operator">=</span> next<span class="hljs-comment">;</span><br>    next.prev <span class="hljs-operator">=</span> sentinel<span class="hljs-comment">;</span><br>&#125;<br>private void removeLast() &#123;<br>    if (sentinel.prev <span class="hljs-operator">=</span><span class="hljs-operator">=</span> sentinel) &#123;<br>        throw new NoSuchElementException(<span class="hljs-string">&quot;索引为空&quot;</span>)<span class="hljs-comment">;</span><br>    &#125;<br>    Node_ prev <span class="hljs-operator">=</span> sentinel.prev.prev<span class="hljs-comment">;</span><br>    sentinel.prev <span class="hljs-operator">=</span> prev<span class="hljs-comment">;</span><br>    prev.next <span class="hljs-operator">=</span> sentinel<span class="hljs-comment">;</span><br>&#125;<br>public void remove(int index) &#123;<br>    if (index <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">0</span>) &#123;<br>        removeFirst()<span class="hljs-comment">;</span><br>        return<span class="hljs-comment">;</span><br>    &#125;<br>    Node_ prev <span class="hljs-operator">=</span> findByIndex(index - <span class="hljs-number">1</span>)<span class="hljs-comment">;</span><br>    Node_ next <span class="hljs-operator">=</span> prev.next.next<span class="hljs-comment">;</span><br>    prev.next <span class="hljs-operator">=</span> next<span class="hljs-comment">;</span><br>    next.prev <span class="hljs-operator">=</span> prev<span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>索引查找</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">private</span> Node_ findByIndex(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>) &#123;<br>    <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (Node_ cur = sentinel.<span class="hljs-keyword">next</span>; cur != sentinel; cur = cur.<span class="hljs-keyword">next</span>, i++) &#123;<br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-keyword">index</span>) &#123;<br>            <span class="hljs-keyword">return</span> cur;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IndexOutOfBoundsException(<span class="hljs-string">&quot;索引异常index[&quot;</span> + <span class="hljs-keyword">index</span> + <span class="hljs-string">&quot;]&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构-链表（二）双向链表（带哨兵）</title>
    <link href="/posts/229247514/"/>
    <url>/posts/229247514/</url>
    
    <content type="html"><![CDATA[<h1 id="数据结构-链表（二）双向链表（带哨兵）"><a href="#数据结构-链表（二）双向链表（带哨兵）" class="headerlink" title="数据结构-链表（二）双向链表（带哨兵）"></a>数据结构-链表（二）双向链表（带哨兵）</h1><h2 id="代码实现："><a href="#代码实现：" class="headerlink" title="代码实现："></a>代码实现：</h2><ul><li><p><strong>构造</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs axapta">package LinkedLists;<br>import java.util.NoSuchElementException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoublyLinkedListSentinel</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Node_ head;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Node_ tail;<br><br>    <span class="hljs-comment">// 构造函数</span><br>    <span class="hljs-keyword">public</span> DoublyLinkedListSentinel() &#123;<br>        <span class="hljs-comment">//头哨兵</span><br>        head = <span class="hljs-keyword">new</span> Node_(<span class="hljs-literal">null</span>, <span class="hljs-number">114514</span>, <span class="hljs-literal">null</span>);<br>        <span class="hljs-comment">//尾哨兵</span><br>        tail = <span class="hljs-keyword">new</span> Node_(<span class="hljs-literal">null</span>, <span class="hljs-number">1919810</span>, <span class="hljs-literal">null</span>);<br>        head.<span class="hljs-keyword">next</span> = tail;<br>        tail.prev = head;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node_</span> &#123;<br>        Node_ prev;<br>        <span class="hljs-built_in">int</span> value;<br>        Node_ <span class="hljs-keyword">next</span>;<br><br>        <span class="hljs-keyword">public</span> Node_(Node_ prev, <span class="hljs-built_in">int</span> value, Node_ <span class="hljs-keyword">next</span>) &#123;<br>            <span class="hljs-keyword">this</span>.prev = prev;<br>            <span class="hljs-keyword">this</span>.value = value;<br>            <span class="hljs-keyword">this</span>.<span class="hljs-keyword">next</span> = <span class="hljs-keyword">next</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>插入</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> insert(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>, <span class="hljs-built_in">int</span> value) &#123;<br>    Node_ prev = findByIndex(<span class="hljs-keyword">index</span> - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (prev != <span class="hljs-literal">null</span>) &#123;<br>        prev.<span class="hljs-keyword">next</span> = <span class="hljs-keyword">new</span> Node_(prev, value, prev.<span class="hljs-keyword">next</span>);<br>    &#125;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IndexOutOfBoundsException(<span class="hljs-string">&quot;非法指针index[&quot;</span> + <span class="hljs-keyword">index</span> + <span class="hljs-string">&quot;]&quot;</span>);<br>&#125;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> addLast(<span class="hljs-built_in">int</span> value) &#123;<br>    tail.prev.<span class="hljs-keyword">next</span> = <span class="hljs-keyword">new</span> Node_(tail.prev, value, tail);<br>    tail.prev = tail.prev.<span class="hljs-keyword">next</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>删除</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> remove(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>) &#123;<br>    Node_ prev = findByIndex(<span class="hljs-keyword">index</span> - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (prev != <span class="hljs-literal">null</span> &amp;&amp; prev.<span class="hljs-keyword">next</span> != tail) &#123;<br>        prev.<span class="hljs-keyword">next</span>.<span class="hljs-keyword">next</span>.prev = prev.<span class="hljs-keyword">next</span>;<br>        prev.<span class="hljs-keyword">next</span> = prev.<span class="hljs-keyword">next</span>.<span class="hljs-keyword">next</span>;<br>    &#125;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IndexOutOfBoundsException(<span class="hljs-string">&quot;非法指针index[&quot;</span> + <span class="hljs-keyword">index</span> + <span class="hljs-string">&quot;]&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> removeLast() &#123;<br>    <span class="hljs-keyword">if</span> (tail.prev == head) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NoSuchElementException(<span class="hljs-string">&quot;链表为空，无法删除最后一个元素&quot;</span>);<br>    &#125;<br>    tail.prev.prev.<span class="hljs-keyword">next</span> = tail;<br>    tail.prev = tail.prev.prev;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构-链表（一）单向</title>
    <link href="/posts/1653457601/"/>
    <url>/posts/1653457601/</url>
    
    <content type="html"><![CDATA[<h1 id="数据结构-链表（一）单向"><a href="#数据结构-链表（一）单向" class="headerlink" title="数据结构-链表（一）单向"></a>数据结构-链表（一）单向</h1><h2 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h2><p>数据元素的线性集合，每个元素都指向下一个元素，元素存储不连续</p><hr><h2 id="简单分类："><a href="#简单分类：" class="headerlink" title="简单分类："></a>简单分类：</h2><ul><li><p><strong>单向链表</strong>：每个元素只指向下一个元素</p></li><li><p><strong>双向链表</strong>：每个元素指向上一个和下一个元素</p></li><li><p><strong>循环链表</strong>：<strong>通常</strong>链表尾节点 tail 指向为 <strong>null</strong> ，而循环链表指向为头结点 <strong>head</strong></p><hr></li></ul><h2 id="性能："><a href="#性能：" class="headerlink" title="性能："></a>性能：</h2><h3 id="随机访问："><a href="#随机访问：" class="headerlink" title="随机访问："></a>随机访问：</h3><ul><li>根据index查找，时间复杂度O(n)</li></ul><h3 id="插入或删除："><a href="#插入或删除：" class="headerlink" title="插入或删除："></a>插入或删除：</h3><ul><li><p>起始位置：O(1)</p></li><li><p>结束位置：如果已知尾节点，则O(1)，反之O(n)</p></li><li><p>中间位置：根据index查找时间 + O(1)</p></li></ul><hr><h2 id="代码实现——Java"><a href="#代码实现——Java" class="headerlink" title="代码实现——Java"></a>代码实现——Java</h2><ul><li><p><strong>定义节点类</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_ inherited__">Iterable</span>&lt;Integer&gt; &#123;<br>    <span class="hljs-keyword">private</span> Node_ head = <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-comment">//节点类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node_</span> &#123;<br>        <span class="hljs-built_in">int</span> value;<span class="hljs-comment">//节点值</span><br>        Node_ <span class="hljs-keyword">next</span>;<span class="hljs-comment">//指向下一个节点</span><br><br>        <span class="hljs-keyword">public</span> Node_(<span class="hljs-built_in">int</span> value, Node_ <span class="hljs-keyword">next</span>) &#123;<br>            <span class="hljs-keyword">this</span>.value = value;<br>            <span class="hljs-keyword">this</span>.<span class="hljs-keyword">next</span> = <span class="hljs-keyword">next</span>;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>头插法添加索引</strong></p>  <figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//头插法</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">addToFirst</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> </span>&#123;<br>    head = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Node_</span>(value, head);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>根据给定索引返回节点</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-comment">//根据给定索引返回节点</span><br><span class="hljs-keyword">private</span> Node_ findByIndex(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>) &#123;<br>    <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (Node_ cur = head; head != <span class="hljs-literal">null</span>; cur = cur.<span class="hljs-keyword">next</span>, i++) &#123;<br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-keyword">index</span>) <span class="hljs-keyword">return</span> cur;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>尾插法</strong></p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//尾插法</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToLast</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-type">Node_</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> findLast();<br>    <span class="hljs-keyword">if</span> (last == <span class="hljs-literal">null</span>) &#123;<br>        head = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node_</span>(value, <span class="hljs-literal">null</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        last.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node_</span>(value, <span class="hljs-literal">null</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>根据索引插入</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-comment">//根据合法索引插入节点</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> insert(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>, <span class="hljs-built_in">int</span> value) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">index</span> == <span class="hljs-number">0</span>) &#123;<br>        addToFirst(value);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">//当前节点的上一个节点</span><br>    Node_ cur = findByIndex(<span class="hljs-keyword">index</span> - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (cur == <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> getIllegalArgumentException(<span class="hljs-keyword">index</span>);<br>    cur.<span class="hljs-keyword">next</span> = <span class="hljs-keyword">new</span> Node_(value, cur.<span class="hljs-keyword">next</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>删除节点</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-comment">//删除头结点</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> deleteToFirst()&#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-keyword">throw</span> getIllegalArgumentException(<span class="hljs-number">0</span>);<br>    &#125;<br>    head = head.<span class="hljs-keyword">next</span>;<br>&#125;<br><span class="hljs-comment">//根据索引删除节点</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> deleteByIndex(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>)&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">index</span> == <span class="hljs-number">0</span>)&#123;<br>        deleteToFirst();<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    Node_ cur = findByIndex(<span class="hljs-keyword">index</span> - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (cur == <span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-keyword">throw</span> getIllegalArgumentException(<span class="hljs-keyword">index</span>);<br>    &#125;<br>    cur.<span class="hljs-keyword">next</span> = cur.<span class="hljs-keyword">next</span>.<span class="hljs-keyword">next</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>遍历节点</strong></p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//遍历节点</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">loop</span>(<span class="hljs-params"><span class="hljs-title class_">Consumer</span>&lt;<span class="hljs-title class_">Integer</span>&gt; consumer</span>) &#123;<br>    <span class="hljs-title class_">Node</span>_ cur = head;<br>    <span class="hljs-keyword">while</span> (cur != <span class="hljs-literal">null</span>) &#123;<br>        consumer.<span class="hljs-title function_">accept</span>(cur.<span class="hljs-property">value</span>);<br>        cur = cur.<span class="hljs-property">next</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">loop2</span>(<span class="hljs-params"><span class="hljs-title class_">Consumer</span>&lt;<span class="hljs-title class_">Integer</span>&gt; consumer</span>) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Node</span>_ cur = head; cur != <span class="hljs-literal">null</span>; cur = cur.<span class="hljs-property">next</span>) &#123;<br>        consumer.<span class="hljs-title function_">accept</span>(cur.<span class="hljs-property">value</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//迭代器</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">Iterator</span>&lt;<span class="hljs-title class_">Integer</span>&gt; <span class="hljs-title function_">iterator</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;&gt;() &#123;<br>        <span class="hljs-title class_">Node</span>_ cur = head;<br>    <br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">hasNext</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-comment">//是否有下一个元素</span><br>            <span class="hljs-keyword">return</span> cur != <span class="hljs-literal">null</span>;<br>        &#125;<br>    <br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Integer</span> <span class="hljs-title function_">next</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-comment">//返回当前元素的值，并指向下一个元素</span><br>            int value = cur.<span class="hljs-property">value</span>;<br>            cur = cur.<span class="hljs-property">next</span>;<br>            <span class="hljs-keyword">return</span> value;<br>        &#125;<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="使用哨兵节点"><a href="#使用哨兵节点" class="headerlink" title="使用哨兵节点"></a><strong>使用哨兵节点</strong></h2><ul><li><em>哨兵节点：也称为哑元节点，不存储数据，通常当做首尾，简化边界判断</em></li></ul><p>我们对一些代码进行改动，因为索引的开头不再是Node，而是一个哨兵；</p><ul><li><p><strong>头插法</strong></p>  <figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">addToFirst</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-built_in">insert</span>(<span class="hljs-number">0</span>,value)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>尾插法</strong></p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToLast</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-type">Node_</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> findLast();<br>    last.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node_</span>(value, <span class="hljs-literal">null</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>按索引插入</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> insert(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>, <span class="hljs-built_in">int</span> value) &#123;<br>    Node_ cur = findByIndex(<span class="hljs-keyword">index</span> - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (cur == <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> getIllegalArgumentException(<span class="hljs-keyword">index</span>);<br>    cur.<span class="hljs-keyword">next</span> = <span class="hljs-keyword">new</span> Node_(value, cur.<span class="hljs-keyword">next</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>按索引返回节点</strong></p>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">private</span> Node_ findByIndex(<span class="hljs-built_in">int</span> <span class="hljs-keyword">index</span>) &#123;<br>    <span class="hljs-built_in">int</span> i = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">for</span> (Node_ cur = head; cur != <span class="hljs-literal">null</span>; cur = cur.<span class="hljs-keyword">next</span>, i++) &#123;<br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-keyword">index</span>) <span class="hljs-keyword">return</span> cur;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="什么时候要用static呢？"><a href="#什么时候要用static呢？" class="headerlink" title="什么时候要用static呢？"></a>什么时候要用static呢？</h3><ul><li><p><em>当某一个</em><strong><em>内部类使用了外部类的属性</em></strong><em>的时候</em><strong><em>不能使用</em></strong> <em>static ，静态类只能引用静态的变量和方法</em></p></li><li><p><em>当一个内部类</em><strong><em>相对独立</em></strong><em>时</em><strong><em>可以使用</em></strong> <em>static</em></p></li><li><p><em>建议能加尽量加 （）</em></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>实现Spring发送邮件</title>
    <link href="/posts/2642441170/"/>
    <url>/posts/2642441170/</url>
    
    <content type="html"><![CDATA[<h1 id="Springboot实现发送邮件功能"><a href="#Springboot实现发送邮件功能" class="headerlink" title="Springboot实现发送邮件功能"></a>Springboot实现发送邮件功能</h1><h2 id="首先我们导入spring的mail方法"><a href="#首先我们导入spring的mail方法" class="headerlink" title="首先我们导入spring的mail方法"></a>首先我们导入spring的mail方法</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="获取邮箱授权码——QQ邮箱为例"><a href="#获取邮箱授权码——QQ邮箱为例" class="headerlink" title="获取邮箱授权码——QQ邮箱为例"></a>获取邮箱授权码——QQ邮箱为例</h2><p>打开QQ邮箱（网页）—&gt;最上方的设置—&gt;账号—&gt;POP3&#x2F;IMAP&#x2F;SMTP&#x2F;Exchange&#x2F;CardDAV&#x2F;CalDAV服务</p><h2 id="配置application-yml"><a href="#配置application-yml" class="headerlink" title="配置application.yml"></a>配置application.yml</h2><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs nix">application.yml<br><span class="hljs-params">spring:</span><br>  <span class="hljs-params">mail:</span><br>    <span class="hljs-params">host:</span> smtp.qq.com<br>    <span class="hljs-params">username:</span> 你的邮箱（发送方邮箱）<br>    <span class="hljs-params">password:</span> 你的邮箱授权码<br>    <span class="hljs-params">port:</span> <span class="hljs-number">465</span><br>    <span class="hljs-params">default-encoding:</span> UTF-<span class="hljs-number">8</span><br>    <span class="hljs-params">properties:</span><br>      <span class="hljs-params">mail:</span><br>        <span class="hljs-params">smtp:</span><br>          <span class="hljs-params">auth:</span> <span class="hljs-literal">true</span><br>          <span class="hljs-params">starttls:</span><br>            <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>            <span class="hljs-params">required:</span> <span class="hljs-literal">true</span><br>          <span class="hljs-params">ssl:</span><br>            <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>          <span class="hljs-params">socketFactory:</span><br>            <span class="hljs-params">port:</span> <span class="hljs-number">465</span><br>            <span class="hljs-params">class:</span> javax.net.ssl.SSLSocketFactory<br></code></pre></td></tr></table></figure><h2 id="创建一个Service"><a href="#创建一个Service" class="headerlink" title="创建一个Service"></a>创建一个Service</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MailService</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 注入邮件工具类</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">JavaMailSenderImpl</span> javaMailSender;<br><br>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">&quot;$&#123;spring.mail.username&#125;&quot;</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> sendMailer;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 发送纯文本/HTML格式邮件</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">to</span></span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">subject</span></span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">text</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendTextMailMessage</span>(<span class="hljs-params"><span class="hljs-title class_">String</span> to,<span class="hljs-title class_">String</span> subject,<span class="hljs-title class_">String</span> text</span>)&#123;<br>        <span class="hljs-title function_">checkMail</span>(to,subject,text);<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//true 代表支持复杂的类型</span><br>            <span class="hljs-title class_">MimeMessageHelper</span> mimeMessageHelper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessageHelper</span>(javaMailSender.<span class="hljs-title function_">createMimeMessage</span>(),<span class="hljs-literal">true</span>);<br>            <span class="hljs-comment">//邮件发信人</span><br>            mimeMessageHelper.<span class="hljs-title function_">setFrom</span>(sendMailer);<br>            <span class="hljs-comment">//邮件收信人  1或多个</span><br>            mimeMessageHelper.<span class="hljs-title function_">setTo</span>(to.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;,&quot;</span>));<br>            <span class="hljs-comment">//邮件主题</span><br>            mimeMessageHelper.<span class="hljs-title function_">setSubject</span>(subject);<br>            <span class="hljs-comment">//邮件内容：text后面可以添加true--(text,true)以便使用html格式</span><br>            mimeMessageHelper.<span class="hljs-title function_">setText</span>(text);<br>            <span class="hljs-comment">//邮件发送时间</span><br>            mimeMessageHelper.<span class="hljs-title function_">setSentDate</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>            <span class="hljs-comment">//发送邮件</span><br>            javaMailSender.<span class="hljs-title function_">send</span>(mimeMessageHelper.<span class="hljs-title function_">getMimeMessage</span>());<br>            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;发送邮件成功：&quot;</span>+sendMailer+<span class="hljs-string">&quot;-&gt;&quot;</span>+to);<br><br>        &#125; <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">MessagingException</span> e) &#123;<br>            e.<span class="hljs-title function_">printStackTrace</span>();<br>            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;发送邮件失败：&quot;</span>+e.<span class="hljs-title function_">getMessage</span>());<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="Controlle"><a href="#Controlle" class="headerlink" title="Controlle"></a>Controlle</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 发送邮件</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">to</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">subject</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">content</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">&quot;/sendMailMessage&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendHtmlMailMessage</span>(<span class="hljs-params"><span class="hljs-title class_">String</span> to,<span class="hljs-title class_">String</span> subject,<span class="hljs-title class_">String</span> content</span>)&#123;<br>    mailService.<span class="hljs-title function_">sendHtmlMailMessage</span>(to,subject,content);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redis与序列化反序列化</title>
    <link href="/posts/247666901/"/>
    <url>/posts/247666901/</url>
    
    <content type="html"><![CDATA[<h1 id="Redis与序列化反序列化"><a href="#Redis与序列化反序列化" class="headerlink" title="Redis与序列化反序列化"></a>Redis与序列化反序列化</h1><p>SpringBoot自带JSON</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs processing">@Component<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisUtil</span> &#123;<br><br>    @Autowired<br>    <span class="hljs-keyword">private</span> StringRedisTemplate stringRedisTemplate;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ObjectMapper objectMapper = <span class="hljs-keyword">new </span><span class="hljs-class title_">ObjectMapper</span>();<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 设置键值对（对象序列化为JSON存储），并设置过期时间</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-built_in">set</span>(<span class="hljs-built_in">String</span> <span class="hljs-built_in">key</span>, T value, <span class="hljs-type">long</span> timeout) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-built_in">String</span> json = objectMapper.<span class="hljs-property">writeValueAsString</span>(value);<br>            stringRedisTemplate.<span class="hljs-property">opsForValue</span>().<span class="hljs-property">set</span>(<span class="hljs-built_in">key</span>, json, timeout, TimeUnit.<span class="hljs-property">MINUTES</span>);<br>        &#125; <span class="hljs-title function_">catch</span> (Exception e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new </span><span class="hljs-class title_">RuntimeException</span>(<span class="hljs-string">&quot;Redis set operation failed&quot;</span>, e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 获取值（JSON反序列化为对象）</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-built_in">get</span>(<span class="hljs-built_in">String</span> <span class="hljs-built_in">key</span>, TypeReference&lt;T&gt; typeReference) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-built_in">String</span> json = stringRedisTemplate.<span class="hljs-property">opsForValue</span>().<span class="hljs-property">get</span>(<span class="hljs-built_in">key</span>);<br>            <span class="hljs-keyword">if</span> (json == <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> objectMapper.<span class="hljs-property">readValue</span>(json, typeReference);<br>        &#125; <span class="hljs-title function_">catch</span> (Exception e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new </span><span class="hljs-class title_">RuntimeException</span>(<span class="hljs-string">&quot;Redis get operation failed&quot;</span>, e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 删除键</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span>(<span class="hljs-built_in">String</span> <span class="hljs-built_in">key</span>) &#123;<br>        stringRedisTemplate.<span class="hljs-property">delete</span>(<span class="hljs-built_in">key</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Added non-passive event listener to a scroll-blocking ‘touchmove‘ event解决方案</title>
    <link href="/posts/1281837295/"/>
    <url>/posts/1281837295/</url>
    
    <content type="html"><![CDATA[<h1 id="Added-non-passive-event-listener-to-a-scroll-blocking-‘touchmove‘-event解决方案"><a href="#Added-non-passive-event-listener-to-a-scroll-blocking-‘touchmove‘-event解决方案" class="headerlink" title="Added non-passive event listener to a scroll-blocking ‘touchmove‘ event解决方案"></a>Added non-passive event listener to a scroll-blocking ‘touchmove‘ event解决方案</h1><blockquote><p>如果你的浏览器后台发出了如下警告，可能原因是使用Echarts中的组件导致</p><p>在表单校验时，添加了一个非被动的事件监视器：<strong>touchmove</strong>，事件有阻塞滚动功能，在移动端滚动性能下降。</p><p>我们的Chrome为了提高性能，会默认把具有滚动阻塞特性的事件设为被动，实现流畅效果</p></blockquote><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">[Violation]Added non-passive <span class="hljs-keyword">event</span> listener <span class="hljs-keyword">to</span> a scroll-blocking <span class="hljs-string">&#x27;mousewheel&#x27;</span> <span class="hljs-keyword">event</span>. Consider marking <span class="hljs-keyword">event</span> handler <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;passive&#x27;</span> <span class="hljs-keyword">to</span> make the page more responsive. See https:<span class="hljs-comment">//www.chromestatus.com/feature/5745543795965952</span><br>addEventListener @ <span class="hljs-keyword">event</span>.js:<span class="hljs-number">94</span><br>mountSingleDOMEventListener @ HandlerProxy.js:<span class="hljs-number">236</span><br></code></pre></td></tr></table></figure><blockquote><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>使用“default-passive-events”库</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">yarn <span class="hljs-keyword">add</span> <span class="hljs-literal">default</span>-passive-events<br></code></pre></td></tr></table></figure><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;default-passive-events&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>debug</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法-二分查找及其应用</title>
    <link href="/posts/1825358984/"/>
    <url>/posts/1825358984/</url>
    
    <content type="html"><![CDATA[<h1 id="算法-二分查找及其应用"><a href="#算法-二分查找及其应用" class="headerlink" title="算法-二分查找及其应用"></a>算法-二分查找及其应用</h1><blockquote><p>原理：</p><ul><li><p>在<strong>有序排列</strong>的数据下，<strong>目标值</strong>可以<strong>与</strong>当前数据的<strong>中间值比较</strong>，从而将查找范围去掉一半，因此，我们<strong>使用两个值定位</strong>这串数据的<strong>首尾</strong></p></li><li><p>如果数据恰好<strong>与中间值相等</strong>，则<strong>直接返回</strong>位置</p></li><li><p>在<strong>左半部</strong>分<strong>则右侧指针指向中间索引 -1</strong>（减一是因为中间索引参与比较了因此向左来一位）</p></li><li><p>右半部分同理</p></li><li><p>如此反复，最终我们的中间索引会指向结果，并返回结果位置</p></li><li><p>如果没有结果，则指针继续移动，会出现指针重叠，因此我们用此判断无结果，返回 -1</p></li></ul></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><br><span class="hljs-meta">#二分查找——采用半开区间[i,j) </span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">binarySearch</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[] a, <span class="hljs-built_in">int</span> target</span>)</span> &#123;<br>    <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>, j = a.length;<br>    <span class="hljs-keyword">while</span> (i &lt; j) &#123;<br>        <span class="hljs-built_in">int</span> m = (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) j = m;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target &gt; a[m]) i = m + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> m;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><br><span class="hljs-meta">#二分查找——采用闭区间[i,j]</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">binarySearch</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[] a, <span class="hljs-built_in">int</span> target</span>)</span> &#123;<br>    <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-built_in">int</span> m = (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) j = m - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) i = m + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> m;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>基本的二分查找有以上两种方法，个人常用第一种方法。</p><p>接下来稍微变化一下二分查找，使其能够解决别的问题</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><br><span class="hljs-meta">#二分查找查找最左侧重复元素</span><br><span class="hljs-meta">#把中间索引移动到重复位置的最左侧，直到指向非目标数</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Leftmost</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[] a, <span class="hljs-built_in">int</span> target</span>)</span> &#123;<br>        <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>, candidate = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>            <span class="hljs-built_in">int</span> m = (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (target &lt; a[m]) j = m - <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) i = m + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">//记录候选位置</span><br>                candidate = m;<br>                <span class="hljs-comment">//因为查找最左侧元素，所以右边索引向左靠拢</span><br>                j = m - <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> candidate;<br>    &#125;<br></code></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><br><span class="hljs-meta">#二分查找查找最右侧重复元素</span><br><span class="hljs-meta">#把中间索引移动到重复位置的最右侧，直到指向非目标数</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Rightmost</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[] a, <span class="hljs-built_in">int</span> target</span>)</span> &#123;<br>        <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>, candidate = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>            <span class="hljs-built_in">int</span> m = (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (target &lt; a[m]) j = m - <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) i = m + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">//记录候选位置</span><br>                candidate = m;<br>                <span class="hljs-comment">//因为查找最右侧元素，所以左边索引向右靠拢</span><br>                i = m + <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> candidate;<br>    &#125;<br></code></pre></td></tr></table></figure><blockquote><p>以上两种可以进行简化</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><br><span class="hljs-meta"># 二分查找查找最左侧重复元素</span><br><span class="hljs-meta"># 返回值：返回的为大于等于目标最靠左侧的索引</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Leftmost2</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[] a, <span class="hljs-built_in">int</span> target</span>)</span> &#123;<br>    <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-built_in">int</span> m = (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target&lt;=a[m]) j = m - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> i = m + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> i;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><br><span class="hljs-meta"># 二分查找查找最右侧重复元素</span><br><span class="hljs-meta"># 返回值：返回的为小于等于目标最靠右侧的索引，不一定需要查找到目标元素</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Rightmost2</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>[] a, <span class="hljs-built_in">int</span> target</span>)</span> &#123;<br>    <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-built_in">int</span> m = (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) j = m - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> i = m + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> i - <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="简单理解以上两个优化后函数的-if-target-a-m-的不同"><a href="#简单理解以上两个优化后函数的-if-target-a-m-的不同" class="headerlink" title="简单理解以上两个优化后函数的 if (target &lt; a[m])的不同"></a>简单理解以上两个优化后函数的 if (target &lt; a[m])的不同</h4><ul><li><p>当需要查找最<strong>左侧元素</strong>时，<strong>如果</strong>中间值和目标值<strong>相等</strong>，我们需要把右侧边界向左推进 j &#x3D; m - 1，因此<strong>无论target &lt; 还是 &#x3D; 中间值，我们都需要让 又边界向左推进</strong></p></li><li><p>当需要查找最<strong>右侧元素</strong>时，<strong>如果</strong>中间值和目标值<strong>相等</strong>，说明目标在右侧，因此我们左边界应当<strong>向右侧推进</strong>，i &#x3D; m + 1</p></li></ul><h4 id="简单理解以上两个优化后函数的返回值不同"><a href="#简单理解以上两个优化后函数的返回值不同" class="headerlink" title="简单理解以上两个优化后函数的返回值不同"></a>简单理解以上两个优化后函数的返回值不同</h4><ul><li><p>如果我们进行简单的推算可以发现一个规律，当查找最<strong>左侧重复</strong>元素，最终 i 恰好落在重复的最左侧元素上，因此<strong>直接返回</strong> i 值</p></li><li><p>当进行最<strong>右侧查找</strong>，我们发现 i 在重复最右侧值的 +1 位置，因此我们<strong>需要减去 1</strong></p><hr></li></ul><p>学习算法时的二分查找笔记，理解浅薄，见谅🙏🏻</p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>电影天堂爬虫代码示例</title>
    <link href="/posts/4130465742/"/>
    <url>/posts/4130465742/</url>
    
    <content type="html"><![CDATA[<h1 id="电影天堂爬虫代码示例"><a href="#电影天堂爬虫代码示例" class="headerlink" title="电影天堂爬虫代码示例"></a>电影天堂爬虫代码示例</h1><hr><h3 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-comment"># 首先获取网站首页html内容，过程省略</span><br><span class="hljs-comment"># 为了防止反爬，将html保存于本地</span><br>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;dy2018.html&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>html = f.<span class="hljs-built_in">read</span>()<br>f.<span class="hljs-built_in">close</span>()<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 将html以标题进行分类</span><br>op = re.<span class="hljs-built_in">compile</span>(<br>    <span class="hljs-string">r&#x27;&lt;div class=&quot;co_area2&quot;(?P&lt;item&gt;.*?)\s*&lt;/div&gt;\s*&lt;/div&gt;&#x27;</span>,<br>    re.S)<br>item = re.findall(op, html)<br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># 创建总列表用于存储</span><br><span class="hljs-attr">sum_list</span> = []<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 遍历分类子元素</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> item:<br>    op = re.<span class="hljs-built_in">compile</span>(<br>        <span class="hljs-string">r&#x27;.*?&lt;div class=&quot;title_all&quot;&gt;.*?&lt;span style=&quot;float:left;&quot;&gt;(?P&lt;title_name&gt;.*?)&lt;/span&gt;.*?&lt;ul&gt;(?P&lt;ul_content&gt;.*?)&lt;/ul&gt;&#x27;</span>,<br>        re.S)<br>    matches = re.findall(op, i)[<span class="hljs-number">0</span>]<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 清洗title</span><br>re_title = <span class="hljs-string">r&#x27;(?:&lt;a [^&gt;]*&gt;([^&lt;]+)&lt;/a&gt;|([^&lt;]+))&#x27;</span><br>title = re.findall(re_title, matches[<span class="hljs-number">0</span>])[<span class="hljs-number">0</span>]<br><span class="hljs-keyword">if</span> title[<span class="hljs-number">0</span>]:<br>    title = title[<span class="hljs-number">0</span>]<br><span class="hljs-keyword">else</span>:<br>    title = title[<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 清洗ul_content</span><br>to_content_list = <span class="hljs-string">r&#x27;&lt;li&gt;(.*?)&lt;/li&gt;&#x27;</span><br>content_list = re.findall(to_content_list, matches[<span class="hljs-number">1</span>])<br>re_content = <span class="hljs-string">r&quot;&lt;a href=&#x27;(?P&lt;link&gt;.*?)&#x27; title=\&quot;(?P&lt;name&gt;.*?)\&quot;&gt;&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># 创建列表接收数据</span><br><span class="hljs-attr">movie_list</span> = []<br></code></pre></td></tr></table></figure><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs maxima"># 将re_content中的<span class="hljs-built_in">li</span>提取为<span class="hljs-built_in">title</span>和详情页链接link<br><span class="hljs-keyword">for</span> <span class="hljs-built_in">content</span> <span class="hljs-keyword">in</span> content_list:<br>    <span class="hljs-built_in">content</span> = re.findall(re_content, <span class="hljs-built_in">content</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">content</span>:<br>        <span class="hljs-built_in">content</span> = <span class="hljs-built_in">content</span>[<span class="hljs-number">0</span>]<br>        link = <span class="hljs-string">&quot;https://www.dy2018.com/&quot;</span> + <span class="hljs-built_in">content</span>[<span class="hljs-number">0</span>]<br>        movie_title = <span class="hljs-built_in">content</span>[<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment">#添加headers防止反爬</span><br> <span class="hljs-attr">headers</span> = &#123;略&#125;<br> <span class="hljs-attr">req</span> = requests.get(link, headers=headers)<br> <span class="hljs-attr">req.encoding</span> = <span class="hljs-string">&#x27;gbk&#x27;</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 获取电影详情页下载地址</span><br>link_list = re.findall(<span class="hljs-string">r&#x27;&lt;td style=&quot;WORD-WRAP: break-word&quot; bgcolor=&quot;#fdfddf&quot;&gt;&lt;a href=&quot;(.*?)&amp;&#x27;</span>, req.text)<br>movie_list.append(&#123;<br>    <span class="hljs-string">&quot;movie_title&quot;</span>: movie_title,<br>    <span class="hljs-string">&quot;link&quot;</span>: link_list<br>&#125;)<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">    # 为列表添加子元素<br>    sum_list.append(<br>        &#123;<br>            <span class="hljs-string">&quot;title&quot;</span>: title,<br>            <span class="hljs-string">&quot;movie_list&quot;</span>: movie_list<br>        &#125;)<br><span class="hljs-comment"># 代码存储至本地</span><br>f = open(<span class="hljs-string">&#x27;dy2018.json&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, <span class="hljs-attribute">encoding</span>=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>f.write(json.dumps(sum_list, <span class="hljs-attribute">ensure_ascii</span>=<span class="hljs-literal">False</span>))<br></code></pre></td></tr></table></figure><hr><h3 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h3><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[<br>  &#123;<br>    <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;2024新片精品&quot;</span>,<br>    <span class="hljs-string">&quot;movie_list&quot;</span>: [<br>      &#123;<br>        <span class="hljs-string">&quot;movie_title&quot;</span>: <span class="hljs-string">&quot;2024年国产6.4分犯罪片《浴火之路》HD国语中英双字&quot;</span>,<br>        <span class="hljs-string">&quot;link&quot;</span>: [<br>          <span class="hljs-string">&quot;magnet:?xt=urn:btih:57eb67973d2dd0e711b989ca6255d9a621b232af&quot;</span><br>        ]<br>      &#125;,<br>      &#123;<br>        <span class="hljs-string">&quot;movie_title&quot;</span>: <span class="hljs-string">&quot;2019年泰国6.2分喜剧片《友情以上》HD泰语中字&quot;</span>,<br>        <span class="hljs-string">&quot;link&quot;</span>: [<br>          <span class="hljs-string">&quot;magnet:?xt=urn:btih:632853d4479bb0e060bbe57a09dcd91275c94529&quot;</span><br>        ]<br>      &#125;,<br>      &#123;<br>        <span class="hljs-string">&quot;movie_title&quot;</span>: <span class="hljs-string">&quot;2024年日本8.5分动画片《蓦然回首》HD日语中字&quot;</span>,<br>        <span class="hljs-string">&quot;link&quot;</span>: [<br>          <span class="hljs-string">&quot;magnet:?xt=urn:btih:e657d8c9e0db74f2ca3d39c2fbb210eb721f8dc7&quot;</span><br>        ]<br>      &#125;,<br>      &#123;<br>......<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>爬虫</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Minecraft 计分板设置教程</title>
    <link href="/posts/2928869750/"/>
    <url>/posts/2928869750/</url>
    
    <content type="html"><![CDATA[<h1 id="Minecraft-计分板设置教程"><a href="#Minecraft-计分板设置教程" class="headerlink" title="Minecraft 计分板设置教程"></a>Minecraft 计分板设置教程</h1><h2 id="1-创建计分目标"><a href="#1-创建计分目标" class="headerlink" title="1. 创建计分目标"></a>1. 创建计分目标</h2><p>创建一个计分目标时，使用以下命令格式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">/scoreboard objectives add <span class="hljs-tag">&lt;<span class="hljs-name">目标名称</span>&gt;</span> dummy <span class="hljs-tag">&lt;<span class="hljs-name">显示名称</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p><code>&lt;目标名称&gt;</code>：目标的内部名称（可以在命令中引用）。</p></li><li><p><code>&lt;显示名称&gt;</code>：在游戏中的显示名称，玩家在侧边栏中看到的名称。</p></li></ul><h2 id="2-显示计分目标"><a href="#2-显示计分目标" class="headerlink" title="2. 显示计分目标"></a>2. 显示计分目标</h2><p>将计分目标显示在屏幕的侧边栏上，使用以下命令：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">/scoreboard objectives setdisplay sidebar <span class="hljs-tag">&lt;<span class="hljs-name">目标名称</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>示例</strong>：将“杂鱼趋势榜”显示在侧边栏。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/scoreboard objectives setdisplay sidebar 杂鱼趋势榜<br></code></pre></td></tr></table></figure><h2 id="3-设置玩家分数"><a href="#3-设置玩家分数" class="headerlink" title="3. 设置玩家分数"></a>3. 设置玩家分数</h2><p>设置玩家的分数时，使用以下命令格式：</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">/scoreboard players <span class="hljs-built_in">set</span> <span class="hljs-variable">&lt;玩家名称&gt;</span> <span class="hljs-variable">&lt;目标名称&gt;</span> <span class="hljs-variable">&lt;分数&gt;</span><br></code></pre></td></tr></table></figure><p><strong>示例</strong>：为玩家 <code>tianzhe2005</code> 设置分数为 27，为玩家 <code>_ZHEEP_</code> 设置分数为 14。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/scoreboard players <span class="hljs-built_in">set</span> tianzhe2005 杂鱼趋势榜 27 /scoreboard players <span class="hljs-built_in">set</span> _ZHEEP_ 杂鱼趋势榜 14<br></code></pre></td></tr></table></figure><h2 id="4-常见命令"><a href="#4-常见命令" class="headerlink" title="4. 常见命令"></a>4. 常见命令</h2><h3 id="添加分数"><a href="#添加分数" class="headerlink" title="添加分数"></a>添加分数</h3><p>如果你希望玩家在现有分数基础上增加分数，可以使用 <code>add</code> 命令：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">/scoreboard players add <span class="hljs-tag">&lt;<span class="hljs-name">玩家名称</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">目标名称</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">分数增量</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>示例</strong>：为玩家 <code>tianzhe2005</code> 增加 5 分：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">/scoreboard players <span class="hljs-built_in">add</span> tianzhe2005 杂鱼趋势榜 5<br></code></pre></td></tr></table></figure><h3 id="移除分数"><a href="#移除分数" class="headerlink" title="移除分数"></a>移除分数</h3><p>如果你希望玩家在现有分数基础上减少分数，可以使用 <code>remove</code> 命令：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">/scoreboard players remove <span class="hljs-tag">&lt;<span class="hljs-name">玩家名称</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">目标名称</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">分数减少量</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>示例</strong>：为玩家 <code>tianzhe2005</code> 减少 3 分：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">/scoreboard players <span class="hljs-built_in">remove</span> tianzhe2005 杂鱼趋势榜 3<br></code></pre></td></tr></table></figure><h3 id="设置显示位置"><a href="#设置显示位置" class="headerlink" title="设置显示位置"></a>设置显示位置</h3><p>你可以将计分目标设置为在不同的位置显示：</p><ul><li><p><code>sidebar</code>：侧边栏</p></li><li><p><code>list</code>：玩家列表</p></li><li><p><code>belowName</code>：玩家姓名下方</p></li></ul><p><strong>示例</strong>：将目标设置为显示在玩家姓名下方。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/scoreboard objectives setdisplay belowName 杂鱼趋势榜<br></code></pre></td></tr></table></figure><h2 id="5-删除计分目标"><a href="#5-删除计分目标" class="headerlink" title="5. 删除计分目标"></a>5. 删除计分目标</h2><p>如果你不再需要某个计分目标，可以使用以下命令删除：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">/scoreboard objectives <span class="hljs-built_in">remove</span> &lt;目标名称&gt;<br></code></pre></td></tr></table></figure><p><strong>示例</strong>：删除“杂鱼趋势榜”目标：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">/scoreboard objectives <span class="hljs-built_in">remove</span> 杂鱼趋势榜<br></code></pre></td></tr></table></figure><h2 id="6-查看计分板"><a href="#6-查看计分板" class="headerlink" title="6. 查看计分板"></a>6. 查看计分板</h2><p>要查看所有当前的计分目标，可以使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/scoreboard objectives list<br></code></pre></td></tr></table></figure><h2 id="7-计分板进阶操作"><a href="#7-计分板进阶操作" class="headerlink" title="7. 计分板进阶操作"></a>7. 计分板进阶操作</h2><h3 id="目标类型"><a href="#目标类型" class="headerlink" title="目标类型"></a>目标类型</h3><p>计分板的目标有多种类型，常见的类型包括：</p><ul><li><p><code>dummy</code>：手动控制分数。玩家和命令都可以修改此类目标的分数。</p></li><li><p><code>trigger</code>：用于玩家触发事件（例如命令方块触发）。</p></li><li><p><code>stat</code>：自动生成并更新的数据类型，通常用于统计数据（如玩家的击杀次数、死亡次数等）。</p></li></ul><h3 id="示例：创建一个新的触发类型目标"><a href="#示例：创建一个新的触发类型目标" class="headerlink" title="示例：创建一个新的触发类型目标"></a>示例：创建一个新的触发类型目标</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">/scoreboard objectives <span class="hljs-keyword">add</span> 触发目标 <span class="hljs-keyword">trigger</span> 触发目标<br></code></pre></td></tr></table></figure><h2 id="8-常见问题"><a href="#8-常见问题" class="headerlink" title="8. 常见问题"></a>8. 常见问题</h2><h3 id="Q-为什么分数无法显示？"><a href="#Q-为什么分数无法显示？" class="headerlink" title="Q: 为什么分数无法显示？"></a>Q: 为什么分数无法显示？</h3><p>A: 请检查是否正确设置了计分目标的显示位置。如果使用 <code>/scoreboard objectives setdisplay</code> 设置了显示位置但依然没有看到分数，可能是目标没有被添加到玩家或目标本身存在问题。</p>]]></content>
    
    
    <categories>
      
      <category>游戏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Minecraft</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>书记：《习惯的力量》</title>
    <link href="/posts/1832925711/"/>
    <url>/posts/1832925711/</url>
    
    <content type="html"><![CDATA[<h1 id="书记：《习惯的力量》"><a href="#书记：《习惯的力量》" class="headerlink" title="书记：《习惯的力量》"></a>书记：《习惯的力量》</h1><h3 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h3><ol><li>不要小看微小进步的力量<ul><li>1%的日常改进通过复利效应（习惯复利）会带来显著长期变化（量变→质变）。</li></ul></li><li>不要只关注目标，更应注重体系<ul><li>关注可持续的系统（如流程、环境设计），而非单一目标结果。</li></ul></li><li>身份习惯法<ul><li>通过行为塑造自我认知（如“我是跑步者”），让习惯与身份认同绑定。</li></ul></li></ol><hr><h3 id="习惯形成四步模型"><a href="#习惯形成四步模型" class="headerlink" title="习惯形成四步模型"></a><strong>习惯形成四步模型</strong></h3><ol><li><strong>提示</strong><br>2. <strong>渴求</strong><br>3. <strong>反应</strong><br>4. <strong>奖励</strong></li></ol><hr><h3 id="习惯转变四大定律"><a href="#习惯转变四大定律" class="headerlink" title="习惯转变四大定律"></a><strong>习惯转变四大定律</strong></h3><h4 id="第一定律：显而易见"><a href="#第一定律：显而易见" class="headerlink" title="第一定律：显而易见"></a>第一定律：显而易见</h4><ol><li><strong>习惯计分卡</strong><ul><li>记录日常习惯并分类（好&#x2F;中&#x2F;坏），让你知道自己做了什么事，有哪些行为需要改进。</li></ul></li><li><strong>执行意图</strong><ul><li>公式：<strong>“当[时间&#x2F;场景]，我会[行为]”</strong>（如“早晨7点，我要喝水”）。</li></ul></li><li><strong>习惯叠加</strong><ul><li>将新习惯绑定到现有习惯上：<strong>“做完[当前习惯]，我会[新习惯]”</strong>（如“洗漱后，我会冥想1分钟”）（胡扯</li></ul></li><li><strong>环境设计</strong><ul><li>让提示清晰可见（如运动鞋放在床边，把零食换成水果）；特定环境绑定特定行为（床&#x3D;睡觉，书桌&#x3D;工作）。</li></ul></li></ol><hr><h4 id="第二定律：吸引力"><a href="#第二定律：吸引力" class="headerlink" title="第二定律：吸引力"></a>第二定律：吸引力</h4><ol><li><strong>诱惑捆绑</strong><ul><li>做完「该做的事」后，奖励自己😋</li></ul></li><li><strong>动机重构</strong><ul><li>戒除坏习惯：列出其长期危害；培养好习惯：关联积极身份（如“健康饮食者”）。<br>  比如🦌🪈，让人焦虑，让人精神不佳，因此我要当阳光下的薯薯，做健康的人</li></ul></li></ol><hr><h4 id="第三定律：简便易行"><a href="#第三定律：简便易行" class="headerlink" title="第三定律：简便易行"></a>第三定律：简便易行</h4><ol><li><strong>酝酿和行动的区别</strong><ul><li>避免过度计划（如“买运动装备”≠锻炼），直接从小行动开始。</li><li>比如你想跑步，不要上网搜如何如何然后在宿舍不出门，而是应该直接去操场上开始跑。</li></ul></li><li><strong>最省力法则</strong><br> 习惯需要的能量越少，重复行为的可能性越大(优化过程)，就是降低门槛，比如穿上鞋就出门跑</li><li><strong>为未来的应用做好环境准备</strong><ul><li>减少阻力，就是提前做好准备，比如🦌之前要放一盒纸巾</li></ul></li></ol><h4 id="第四定律：让习惯令人愉悦"><a href="#第四定律：让习惯令人愉悦" class="headerlink" title="第四定律：让习惯令人愉悦"></a><strong>第四定律：让习惯令人愉悦</strong></h4><ol><li><strong>即时奖励</strong><ul><li>完成习惯后立<del>刻</del>奖<del>励</del>😋（买零食，听歌，买喜欢的东西）</li></ul></li><li><strong>追踪习惯</strong><ul><li>视觉化进度，就是记录，打卡，发QQ空间😋</li></ul></li></ol><h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a><strong>补充</strong></h3><ul><li><p><strong>身份塑造</strong>：通过小胜利证明“我是这样的人”（如每天读书→“我是文<del>学</del>糕~手”）。</p></li><li><p><strong>复利思维</strong>：习惯效果呈指数增长，需耐心（如持续跑步半年后质变），贵在坚持啊，难在坚持。</p></li><li><p><strong>环境＞意志力</strong>：设计“无阻力”环境（如手机放隔壁房间避免和网友吹水）。</p></li><li><p><strong>戒掉坏习惯</strong>？<strong>那就反着来呗</strong>：让它想不起来，让它没有吸引力，提高做它的门槛，让它令人厌恶</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>阅读</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>摆脱在自卑和自负中的反复横跳</title>
    <link href="/posts/672314932/"/>
    <url>/posts/672314932/</url>
    
    <content type="html"><![CDATA[<h3 id="摆脱在自卑和自负中的反复横跳"><a href="#摆脱在自卑和自负中的反复横跳" class="headerlink" title="摆脱在自卑和自负中的反复横跳"></a><strong>摆脱在自卑和自负中的反复横跳</strong></h3><blockquote><p><strong>自卑与自负，都是社交中的焦虑表现。它们的本质来源于“凝视”，当我们过度关注他人的目光，主体性便受损，进而感到不自在。</strong></p></blockquote><hr><h2 id="为何在社交中感到不自在？"><a href="#为何在社交中感到不自在？" class="headerlink" title="为何在社交中感到不自在？"></a><strong>为何在社交中感到不自在？</strong></h2><p>我们常常在内心构建一个理想的自我形象，比如幻想自己是辩论高手，能舌战群儒；或是在听音乐时，想象自己站在舞台上，带动全场气氛……这些想象让我们产生满足感，并增强自我认同。</p><p>然而，当我们真正走出家门，置身人群中，脑海里仿佛响起一个声音：“你真的和想象中的自己一样优秀吗？” 这种无形的审视让人不安，即便没有人真正关注你，你也会感受到一双双目光投射而来，质疑你的价值。</p><p>这种现象被称为 <strong>“凝视”</strong>——当你在意自己如何被他人看待时，就会被“凝视”的压力裹挟，进而产生不自在感。</p><p>不自在的本质是：<strong>自我认同被凝视冲击，导致主体性动摇。</strong></p><hr><h2 id="在自卑和自负中反复横跳"><a href="#在自卑和自负中反复横跳" class="headerlink" title="在自卑和自负中反复横跳"></a><strong>在自卑和自负中反复横跳</strong></h2><blockquote><p><strong>一方面觉得自己出类拔萃，高傲清高；另一方面又觉得自己远远不如别人，陷入深深的自卑。</strong></p></blockquote><p>这种反复横跳，是试图摆脱“凝视”却未能成功的结果。我们一边沉溺于自我想象，认为自己独特非凡，显得自负；一边又渴望得到他人的认可，但现实往往达不到预期，于是陷入自卑。</p><p>举个例子：</p><p>当你盛装出席某个社交场合，期待自己成为焦点，却发现一个衣着普通的人比你更能吸引目光——他谈笑风生，举手投足间展现从容自信。这时，你可能会感到局促，内心不断比较，想要证明自己，试图吸引关注。然而，突然意识到或许根本没有人在意你，你的举动反而显得刻意，甚至有些滑稽……于是，你开始自我怀疑，感到不适，接着又不甘心，试图再次“挽回形象”……这个循环不断重复，你就在自卑与自负间摇摆不定。</p><blockquote><p><strong>如果社交的目的是在他人眼中证明自己的价值，那无论如何努力，都难以真正自在。</strong></p></blockquote><p>当你越想摆脱他人的凝视，便越证明你确实被其困住；当你试图“对抗”，却发现连反抗本身也像一场表演，你便会陷入更深的迷茫。</p><p>正如萨特所说：<strong>“他人即地狱。”</strong>——当一个人试图在他人目光中确认自身价值时，他便无法真正成为自己。</p><hr><h2 id="如何摆脱？——改变社交目的"><a href="#如何摆脱？——改变社交目的" class="headerlink" title="如何摆脱？——改变社交目的"></a><strong>如何摆脱？——改变社交目的</strong></h2><p>许多人社交的隐性目的，是<strong>在他人眼中确认自己的存在感</strong>，试图通过展示自己来“争夺”主体性。但这种方式往往带来焦虑：如果成功了，可能只是短暂的满足；如果失败了，便会自我怀疑，甚至产生更大的焦虑。</p><p><strong>要改变这种状态，就必须调整社交的目的：不再把社交视为“自我证明”的舞台，而是把它当作“自然流动的交流”。</strong></p><hr><h2 id="具体方法："><a href="#具体方法：" class="headerlink" title="具体方法："></a><strong>具体方法：</strong></h2><h3 id="1-把注意力从“自己”转向“世界”"><a href="#1-把注意力从“自己”转向“世界”" class="headerlink" title="1. 把注意力从“自己”转向“世界”"></a><strong>1. 把注意力从“自己”转向“世界”</strong></h3><p>焦虑的根源在于“我如何被他人看待”。如果你把注意力从自我形象转向外界，去感受环境、倾听他人，你会发现很多焦虑自然消解。</p><p>☑ <strong>试着观察世界，而不是观察自己在世界中的位置。</strong><br>☑ <strong>专注于对话本身，而不是思考别人会如何评价你。</strong></p><hr><h3 id="2-练习“非凝视”的眼光"><a href="#2-练习“非凝视”的眼光" class="headerlink" title="2. 练习“非凝视”的眼光"></a><strong>2. 练习“非凝视”的眼光</strong></h3><p>在社交中，我们常常会用标签化的视角看待他人，比如“学霸”“领导”“成功人士”等，这种视角会让你不自觉地产生比较，从而影响你的心态。</p><p><strong>试着去掉这些标签，把对方当作普通人，像朋友一样交流</strong>，你会发现很多压力都会消失。</p><p>☑ <strong>不要对他人进行上&#x2F;下层级的分类。</strong><br>☑ <strong>把社交看作是人与人之间的真实交流，而非身份地位的较量。</strong></p><hr><h3 id="3-承认不完美，坦率面对自己"><a href="#3-承认不完美，坦率面对自己" class="headerlink" title="3. 承认不完美，坦率面对自己"></a><strong>3. 承认不完美，坦率面对自己</strong></h3><p>如果你总是试图维护一个完美的形象，那就等于给自己设下了一个牢笼。真正的自由来自于<strong>承认自己并不完美</strong>，并且接受这一点。</p><p>☑ <strong>允许自己犯错，不必害怕社交中的小失误。</strong><br>☑ <strong>与其想让别人喜欢你，不如试着让自己自在。</strong></p><hr><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a><strong>总结：</strong></h2><p>1️⃣ <strong>不自在的本质，是因为我们活在“他人的凝视”中，试图在社交中证明自己</strong>。<br> 2️⃣ <strong>自卑与自负的反复横跳，是因为我们既想沉溺于自我幻想，又想得到外界认同，但两者难以兼得</strong>。<br> 3️⃣ <strong>真正的自在，不是通过展示自己获得认可，而是坦率面对自己，关注世界，抛开社交中的“表演感”</strong>。</p><p>当你不再执着于“如何被他人看待”，你会发现，焦虑的目光不见了，社交也变得轻松了。</p>]]></content>
    
    
    <categories>
      
      <category>心理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>心理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>曾经抽风写的About</title>
    <link href="/posts/538728647/"/>
    <url>/posts/538728647/</url>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;我很少对外介绍自己，因为总是将思考点放在别人身上，很少考虑到自己会如何。这并不是因为妄自菲薄，而是为了合群，习惯于站在旁人的角度思考。  </p><p>&emsp;&emsp;我在生活中倾向于从自身寻找正能量，不论是为了他人还是自己，我都能做到独立思考。我很清楚自己是什么样的人，知道自己的喜好而不夸夸其谈，了解自己的优缺点而不卑不亢。我认为，藏锋守拙比锋芒毕露更为实在。  </p><p>&emsp;&emsp;在写这篇文章时，我参考了许多人的自我介绍，但最终还是决定随心所欲些。因此，接下来的内容或许显得琐碎，但如果你愿意了解我，请继续读下去。  </p><p>&emsp;&emsp;首先，我是一个热爱游戏，幻想回到儿时与好友们一起创建自己世界的人；一个喜爱音乐，偏爱弹贝斯但也希望把口琴练好的人；一个喜欢动漫，曾憧憬着不可思议国度的人；也是一个正在攻读计算机专业的普通大学生。  </p><p>&emsp;&emsp;如今，我渴望回到儿时，与玩伴们在《Minecraft》上创建属于我们的世界，渴望和朋友在《Terraria》中共同挑战种类繁多的BOSS。  </p><p>&emsp;&emsp;作为一个2004年出生的人，我依稀记得网吧里的大头电脑和灰白色的浏览器页面，还记得家里七八岁时就有了一台带液晶显示屏的电脑。《孤胆枪手》、《宝石迷阵》、《侠盗猎车手》、《抢滩登陆》等游戏让我玩得不亦乐乎。后来，我转战各大网游，如《地下城与勇士》、《QQ飞车》、《穿越火线》，以及4399里的各种西游、三国游戏。  </p><p>&emsp;&emsp;Minecraft在国内爆火后，我在《多玩》上第一次接触到了这款游戏，并在《宅霸》、《游侠》、《爱玩MC》等平台结识了一批又一批网友。  </p><p>&emsp;&emsp;还记得那个暑假，顶着电脑几分钟一次的未响应和朋友一起联机，在QQ上发几张GIF企图让双方卡死，然后彼此和洽地叫骂。  </p><p>&emsp;&emsp;再后来，我接触了《东方Project》，幻想着珍藏梦想的理想乡；看过《JOJO的奇妙冒险》，感慨那为羁绊慷慨，为宿命赴死的星辰十字军；看过《轻音少女》，渴望拥有一群志同道合的队友，一起积极向上（一起喝茶？）。  </p><p>&emsp;&emsp;初中时，我突发奇想要制作游戏，前后接触过Python、C#、Unity，甚至自学过像素画（小学学过素描），使用FL Studio制作过音乐，但最终因为电脑老旧和学业家庭等因素草草结束，至今仍有些遗憾。  </p><p>&emsp;&emsp;如今，步入大学，兴奋地进入了软件工程专业，拥有了自己的高配电脑，却发现身边少有意气相投的人，旧时的玩伴也渐渐模糊。  </p><p>&emsp;&emsp;每每夜晚回寝，晚风吹过阳台，伴着散落的月光，总让我觉得儿时无忧无虑的时光已然变成遥远的异国他乡，曾经志同道合的天真孩子们各自踏上了不同的旅程。何夜无月？何处无竹柏？但少闲人如吾两人者耳。苏轼的意境，我终是在今天感同身受。  </p><p>&emsp;&emsp;很抱歉，说了许多孩子气的话，但这些都是我童年时弥足珍贵的经历。我总希望将它们轻轻托放在手上，系上回忆的缎带，送给那神秘的巡礼者们，让他们能依凭这些故事，将孩子天真的童年续写。  </p><p>&emsp;&emsp;愿大家怀揣儿时的梦想，在计算机领域不断前进。假如遇到什么困难，请不要放弃，也许离终点只差一步之遥。  </p><p align="right">  西行寺岩羊    <br>  2024年5月20日14:55  </p>]]></content>
    
    
    <categories>
      
      <category>记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>记录</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
