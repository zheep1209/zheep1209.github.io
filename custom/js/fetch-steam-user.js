let axios=require("axios"),fs=require("hexo-fs"),path=require("path");hexo.extend.generator.register("steam-user",(async function(){var e=hexo.config.steam;if(e&&e.enable&&e.apiKey&&e.steamId){e=`https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v2/?key=${e.apiKey}&steamids=`+e.steamId;try{var a=(await axios.get(e)).data.response.players[0];if(!a)return void hexo.log.warn("⚠ 没有获取到 Steam 用户信息");var r=path.join(hexo.source_dir,"_data/steam_user.json");await fs.writeFile(r,JSON.stringify(a,null,2)),hexo.log.info("✔ Steam 用户信息已更新 → _data/steam_user.json")}catch(e){hexo.log.error("❌ 拉取 Steam 用户信息失败：",e.message)}return[]}hexo.log.warn("❌ Steam 配置不完整，跳过 steam-user 数据更新")}));